!function(a,b,c){function d(a,b){return typeof a===b}function e(){var a,b,c,e,f,g,h;for(var i in t)if(t.hasOwnProperty(i)){if(a=[],b=t[i],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());for(e=d(b.fn,"function")?b.fn():b.fn,f=0;f<a.length;f++)g=a[f],h=g.split("."),1===h.length?v[h[0]]=e:(!v[h[0]]||v[h[0]]instanceof Boolean||(v[h[0]]=new Boolean(v[h[0]])),v[h[0]][h[1]]=e),s.push((e?"":"no-")+h.join("-"))}}function f(a){var b=x.className,c=v._config.classPrefix||"";if(y&&(b=b.baseVal),v._config.enableJSClass){var d=new RegExp("(^|\\s)"+c+"no-js(\\s|$)");b=b.replace(d,"$1"+c+"js$2")}v._config.enableClasses&&(b+=" "+c+a.join(" "+c),y?x.className.baseVal=b:x.className=b)}function g(){return"function"!=typeof b.createElement?b.createElement(arguments[0]):y?b.createElementNS.call(b,"http://www.w3.org/2000/svg",arguments[0]):b.createElement.apply(b,arguments)}function h(){var a=b.body;return a||(a=g(y?"svg":"body"),a.fake=!0),a}function i(a,c,d,e){var f,i,j,k,l="modernizr",m=g("div"),n=h();if(parseInt(d,10))for(;d--;)j=g("div"),j.id=e?e[d]:l+(d+1),m.appendChild(j);return f=g("style"),f.type="text/css",f.id="s"+l,(n.fake?n:m).appendChild(f),n.appendChild(m),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(b.createTextNode(a)),m.id=l,n.fake&&(n.style.background="",n.style.overflow="hidden",k=x.style.overflow,x.style.overflow="hidden",x.appendChild(n)),i=c(m,a),n.fake?(n.parentNode.removeChild(n),x.style.overflow=k,x.offsetHeight):m.parentNode.removeChild(m),!!i}function j(a,b){return!!~(""+a).indexOf(b)}function k(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,c){return b+c.toUpperCase()}).replace(/^-/,"")}function l(a,b){return function(){return a.apply(b,arguments)}}function m(a,b,c){var e;for(var f in a)if(a[f]in b)return c===!1?a[f]:(e=b[a[f]],d(e,"function")?l(e,c||b):e);return!1}function n(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function o(b,d){var e=b.length;if("CSS"in a&&"supports"in a.CSS){for(;e--;)if(a.CSS.supports(n(b[e]),d))return!0;return!1}if("CSSSupportsRule"in a){for(var f=[];e--;)f.push("("+n(b[e])+":"+d+")");return f=f.join(" or "),i("@supports ("+f+") { #modernizr { position: absolute; } }",function(a){return"absolute"==getComputedStyle(a,null).position})}return c}function p(a,b,e,f){function h(){l&&(delete H.style,delete H.modElem)}if(f=d(f,"undefined")?!1:f,!d(e,"undefined")){var i=o(a,e);if(!d(i,"undefined"))return i}for(var l,m,n,p,q,r=["modernizr","tspan"];!H.style;)l=!0,H.modElem=g(r.shift()),H.style=H.modElem.style;for(n=a.length,m=0;n>m;m++)if(p=a[m],q=H.style[p],j(p,"-")&&(p=k(p)),H.style[p]!==c){if(f||d(e,"undefined"))return h(),"pfx"==b?p:!0;try{H.style[p]=e}catch(s){}if(H.style[p]!=q)return h(),"pfx"==b?p:!0}return h(),!1}function q(a,b,c,e,f){var g=a.charAt(0).toUpperCase()+a.slice(1),h=(a+" "+F.join(g+" ")+g).split(" ");return d(b,"string")||d(b,"undefined")?p(h,b,e,f):(h=(a+" "+A.join(g+" ")+g).split(" "),m(h,b,c))}function r(a,b,d){return q(a,c,c,b,d)}var s=[],t=[],u={_version:"3.2.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){t.push({name:a,fn:b,options:c})},addAsyncTest:function(a){t.push({name:null,fn:a})}},v=function(){};v.prototype=u,v=new v,v.addTest("svg",!!b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var w=u._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):[];u._prefixes=w;var x=b.documentElement,y="svg"===x.nodeName.toLowerCase(),z="Moz O ms Webkit",A=u._config.usePrefixes?z.toLowerCase().split(" "):[];u._domPrefixes=A;var B=function(a){function c(b,c){var e;return b?(c&&"string"!=typeof c||(c=g(c||"div")),b="on"+b,e=b in c,!e&&d&&(c.setAttribute||(c=g("div")),c.setAttribute(b,""),e="function"==typeof c[b],c[b]!==a&&(c[b]=a),c.removeAttribute(b)),e):!1}var d=!("onblur"in b.documentElement);return c}();u.hasEvent=B;var C=g("input"),D="autocomplete autofocus list placeholder max min multiple pattern required step".split(" "),E={};v.input=function(b){for(var c=0,d=b.length;d>c;c++)E[b[c]]=!!(b[c]in C);return E.list&&(E.list=!(!g("datalist")||!a.HTMLDataListElement)),E}(D);var F=u._config.usePrefixes?z.split(" "):[];u._cssomPrefixes=F;var G=(u.testStyles=i,{elem:g("modernizr")});v._q.push(function(){delete G.elem});var H={style:G.elem.style};v._q.unshift(function(){delete H.style}),u.testProp=function(a,b,d){return p([a],c,b,d)},u.testAllProps=q,u.testAllProps=r,e(),f(s),delete u.addTest,delete u.addAsyncTest;for(var I=0;I<v._q.length;I++)v._q[I]();a.Modernizr=v}(window,document),function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=_+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(a){var b=y.length,c=(Q+a)%b;return 0>c?b+c:c}function g(a,b){return Math.round((/%/.test(a)?("x"===b?z.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.photo||a.photoRegex.test(b)}function i(a,b){return a.retinaUrl&&c.devicePixelRatio>1?b.replace(a.photoRegex,a.retinaSuffix):b}function j(a){"contains"in r[0]&&!r[0].contains(a.target)&&(a.stopPropagation(),r.focus())}function k(){var b,c=a.data(P,$);null==c?(K=a.extend({},Z),console&&console.log&&console.log("Error: cboxElement missing settings object")):K=a.extend({},c);for(b in K)a.isFunction(K[b])&&"on"!==b.slice(0,2)&&(K[b]=K[b].call(P));K.rel=K.rel||P.rel||a(P).data("rel")||"nofollow",K.href=K.href||a(P).attr("href"),K.title=K.title||P.title,"string"==typeof K.href&&(K.href=a.trim(K.href))}function l(c,d){a(b).trigger(c),ha.triggerHandler(c),a.isFunction(d)&&d.call(P)}function m(c){U||(P=c,k(),y=a(P),Q=0,"nofollow"!==K.rel&&(y=a("."+aa).filter(function(){var b,c=a.data(this,$);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===K.rel}),Q=y.index(P),-1===Q&&(y=y.add(P),Q=y.length-1)),q.css({opacity:parseFloat(K.opacity),cursor:K.overlayClose?"pointer":"auto",visibility:"visible"}).show(),X&&r.add(q).removeClass(X),K.className&&r.add(q).addClass(K.className),X=K.className,K.closeButton?I.html(K.close).appendTo(t):I.appendTo("<div/>"),S||(S=T=!0,r.css({visibility:"hidden",display:"block"}),A=d(ia,"LoadedContent","width:0; height:0; overflow:hidden"),t.css({width:"",height:""}).append(A),L=u.height()+x.height()+t.outerHeight(!0)-t.height(),M=v.width()+w.width()+t.outerWidth(!0)-t.width(),N=A.outerHeight(!0),O=A.outerWidth(!0),K.w=g(K.initialWidth,"x"),K.h=g(K.initialHeight,"y"),A.css({width:"",height:K.h}),W.position(),l(ba,K.onOpen),J.add(D).hide(),r.focus(),K.trapFocus&&b.addEventListener&&(b.addEventListener("focus",j,!0),ha.one(fa,function(){b.removeEventListener("focus",j,!0)})),K.returnFocus&&ha.one(fa,function(){a(P).focus()})),p())}function n(){!r&&b.body&&(Y=!1,z=a(c),r=d(ia).attr({id:$,"class":a.support.opacity===!1?_+"IE":"",role:"dialog",tabindex:"-1"}).hide(),q=d(ia,"Overlay").hide(),C=a([d(ia,"LoadingOverlay")[0],d(ia,"LoadingGraphic")[0]]),s=d(ia,"Wrapper"),t=d(ia,"Content").append(D=d(ia,"Title"),E=d(ia,"Current"),H=a('<button type="button"/>').attr({id:_+"Previous"}),G=a('<button type="button"/>').attr({id:_+"Next"}),F=d("button","Slideshow"),C),I=a('<button type="button"/>').attr({id:_+"Close"}),s.append(d(ia).append(d(ia,"TopLeft"),u=d(ia,"TopCenter"),d(ia,"TopRight")),d(ia,!1,"clear:left").append(v=d(ia,"MiddleLeft"),t,w=d(ia,"MiddleRight")),d(ia,!1,"clear:left").append(d(ia,"BottomLeft"),x=d(ia,"BottomCenter"),d(ia,"BottomRight"))).find("div div").css({"float":"left"}),B=d(ia,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),J=G.add(H).add(E).add(F),a(b.body).append(q,r.append(s,B)))}function o(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey||(a.preventDefault(),m(this))}return r?(Y||(Y=!0,G.click(function(){W.next()}),H.click(function(){W.prev()}),I.click(function(){W.close()}),q.click(function(){K.overlayClose&&W.close()}),a(b).bind("keydown."+_,function(a){var b=a.keyCode;S&&K.escKey&&27===b&&(a.preventDefault(),W.close()),S&&K.arrowKey&&y[1]&&!a.altKey&&(37===b?(a.preventDefault(),H.click()):39===b&&(a.preventDefault(),G.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+_,"."+aa,c):a("."+aa).live("click."+_,c)),!0):!1}function p(){var e,f,j,m=W.prep,n=++ja;T=!0,R=!1,P=y[Q],k(),l(ga),l(ca,K.onLoad),K.h=K.height?g(K.height,"y")-N-L:K.innerHeight&&g(K.innerHeight,"y"),K.w=K.width?g(K.width,"x")-O-M:K.innerWidth&&g(K.innerWidth,"x"),K.mw=K.w,K.mh=K.h,K.maxWidth&&(K.mw=g(K.maxWidth,"x")-O-M,K.mw=K.w&&K.w<K.mw?K.w:K.mw),K.maxHeight&&(K.mh=g(K.maxHeight,"y")-N-L,K.mh=K.h&&K.h<K.mh?K.h:K.mh),e=K.href,V=setTimeout(function(){C.show()},100),K.inline?(j=d(ia).hide().insertBefore(a(e)[0]),ha.one(ga,function(){j.replaceWith(A.children())}),m(a(e))):K.iframe?m(" "):K.html?m(K.html):h(K,e)?(e=i(K,e),R=b.createElement("img"),a(R).addClass(_+"Photo").bind("error",function(){K.title=!1,m(d(ia,"Error").html(K.imgError))}).one("load",function(){var b;n===ja&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(P).attr(c)||a(P).attr("data-"+c);d&&R.setAttribute(c,d)}),K.retinaImage&&c.devicePixelRatio>1&&(R.height=R.height/c.devicePixelRatio,R.width=R.width/c.devicePixelRatio),K.scalePhotos&&(f=function(){R.height-=R.height*b,R.width-=R.width*b},K.mw&&R.width>K.mw&&(b=(R.width-K.mw)/R.width,f()),K.mh&&R.height>K.mh&&(b=(R.height-K.mh)/R.height,f())),K.h&&(R.style.marginTop=Math.max(K.mh-R.height,0)/2+"px"),y[1]&&(K.loop||y[Q+1])&&(R.style.cursor="pointer",R.onclick=function(){W.next()}),R.style.width=R.width+"px",R.style.height=R.height+"px",setTimeout(function(){m(R)},1))}),setTimeout(function(){R.src=e},1)):e&&B.load(e,K.data,function(b,c){n===ja&&m("error"===c?d(ia,"Error").html(K.xhrError):a(this).contents())})}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},$="colorbox",_="cbox",aa=_+"Element",ba=_+"_open",ca=_+"_load",da=_+"_complete",ea=_+"_cleanup",fa=_+"_closed",ga=_+"_purge",ha=a("<a/>"),ia="div",ja=0,ka={},la=function(){function a(){clearTimeout(g)}function b(){(K.loop||y[Q+1])&&(a(),g=setTimeout(W.next,K.slideshowSpeed))}function c(){F.html(K.slideshowStop).unbind(i).one(i,d),ha.bind(da,b).bind(ca,a),r.removeClass(h+"off").addClass(h+"on")}function d(){a(),ha.unbind(da,b).unbind(ca,a),F.html(K.slideshowStart).unbind(i).one(i,function(){W.next(),c()}),r.removeClass(h+"on").addClass(h+"off")}function e(){f=!1,F.hide(),a(),ha.unbind(da,b).unbind(ca,a),r.removeClass(h+"off "+h+"on")}var f,g,h=_+"Slideshow_",i="click."+_;return function(){f?K.slideshow||(ha.unbind(ea,e),e()):K.slideshow&&y[1]&&(f=!0,ha.one(ea,e),K.slideshowAuto?c():d(),F.show())}}();a.colorbox||(a(n),W=a.fn[$]=a[$]=function(b,c){var d=this;if(b=b||{},n(),o()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c),d.each(function(){a.data(this,$,a.extend({},a.data(this,$)||Z,b))}).addClass(aa),(a.isFunction(b.open)&&b.open.call(d)||b.open)&&m(d[0])}return d},W.position=function(b,c){function d(){u[0].style.width=x[0].style.width=t[0].style.width=parseInt(r[0].style.width,10)-M+"px",t[0].style.height=v[0].style.height=w[0].style.height=parseInt(r[0].style.height,10)-L+"px"}var f,h,i,j=0,k=0,l=r.offset();if(z.unbind("resize."+_),r.css({top:-9e4,left:-9e4}),h=z.scrollTop(),i=z.scrollLeft(),K.fixed?(l.top-=h,l.left-=i,r.css({position:"fixed"})):(j=h,k=i,r.css({position:"absolute"})),k+=K.right!==!1?Math.max(z.width()-K.w-O-M-g(K.right,"x"),0):K.left!==!1?g(K.left,"x"):Math.round(Math.max(z.width()-K.w-O-M,0)/2),j+=K.bottom!==!1?Math.max(e()-K.h-N-L-g(K.bottom,"y"),0):K.top!==!1?g(K.top,"y"):Math.round(Math.max(e()-K.h-N-L,0)/2),r.css({top:l.top,left:l.left,visibility:"visible"}),s[0].style.width=s[0].style.height="9999px",f={width:K.w+O+M,height:K.h+N+L,top:j,left:k},b){var m=0;a.each(f,function(a){return f[a]!==ka[a]?void(m=b):void 0}),b=m}ka=f,b||r.css(f),r.dequeue().animate(f,{duration:b||0,complete:function(){d(),T=!1,s[0].style.width=K.w+O+M+"px",s[0].style.height=K.h+N+L+"px",K.reposition&&setTimeout(function(){z.bind("resize."+_,W.position)},1),c&&c()},step:d})},W.resize=function(a){var b;S&&(a=a||{},a.width&&(K.w=g(a.width,"x")-O-M),a.innerWidth&&(K.w=g(a.innerWidth,"x")),A.css({width:K.w}),a.height&&(K.h=g(a.height,"y")-N-L),a.innerHeight&&(K.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=A.scrollTop(),A.css({height:"auto"}),K.h=A.height()),A.css({height:K.h}),b&&A.scrollTop(b),W.position("none"===K.transition?0:K.speed))},W.prep=function(c){function e(){return K.w=K.w||A.width(),K.w=K.mw&&K.mw<K.w?K.mw:K.w,K.w}function g(){return K.h=K.h||A.height(),K.h=K.mh&&K.mh<K.h?K.mh:K.h,K.h}if(S){var j,k="none"===K.transition?0:K.speed;A.empty().remove(),A=d(ia,"LoadedContent").append(c),A.hide().appendTo(B.show()).css({width:e(),overflow:K.scrolling?"auto":"hidden"}).css({height:g()}).prependTo(t),B.hide(),a(R).css({"float":"none"}),j=function(){function c(){a.support.opacity===!1&&r[0].style.removeAttribute("filter")}var e,g,j=y.length,m="frameBorder",n="allowTransparency";S&&(g=function(){clearTimeout(V),C.hide(),l(da,K.onComplete)},D.html(K.title).add(A).show(),j>1?("string"==typeof K.current&&E.html(K.current.replace("{current}",Q+1).replace("{total}",j)).show(),G[K.loop||j-1>Q?"show":"hide"]().html(K.next),H[K.loop||Q?"show":"hide"]().html(K.previous),la(),K.preloading&&a.each([f(-1),f(1)],function(){var c,d,e=y[this],f=a.data(e,$);f&&f.href?(c=f.href,a.isFunction(c)&&(c=c.call(e))):c=a(e).attr("href"),c&&h(f,c)&&(c=i(f,c),d=b.createElement("img"),d.src=c)})):J.hide(),K.iframe?(e=d("iframe")[0],m in e&&(e[m]=0),n in e&&(e[n]="true"),K.scrolling||(e.scrolling="no"),a(e).attr({src:K.href,name:(new Date).getTime(),"class":_+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",g).appendTo(A),ha.one(ga,function(){e.src="//about:blank"}),K.fastIframe&&a(e).trigger("load")):g(),"fade"===K.transition?r.fadeTo(k,1,c):c())},"fade"===K.transition?r.fadeTo(k,0,function(){W.position(0,j)}):W.position(k,j)}},W.next=function(){!T&&y[1]&&(K.loop||y[Q+1])&&(Q=f(1),m(y[Q]))},W.prev=function(){!T&&y[1]&&(K.loop||Q)&&(Q=f(-1),m(y[Q]))},W.close=function(){S&&!U&&(U=!0,S=!1,l(ea,K.onCleanup),z.unbind("."+_),q.fadeTo(K.fadeOut||0,0),r.stop().fadeTo(K.fadeOut||0,0,function(){r.add(q).css({opacity:1,cursor:"auto"}).hide(),l(ga),A.empty().remove(),setTimeout(function(){U=!1,l(fa,K.onClosed)},1)}))},W.remove=function(){r&&(r.stop(),a.colorbox.close(),r.stop().remove(),q.remove(),U=!1,r=null,a("."+aa).removeData($).removeClass(aa),a(b).unbind("click."+_))},W.element=function(){return a(P)},W.settings=Z)}(jQuery,document,window),function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(b=this.find("input, button"),b.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&b.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)}b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}return d=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d),d.required&&(e=d.required,delete d.required,d=a.extend({required:e},d)),d}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1==arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(RegExp("\\{"+a+"\\}","g"),c)}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var c=this.groups={};a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){this.lastElement=b=this.validationTargetFor(this.clean(b)),this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:c[this.name]=!0})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d=a(b).rules(),e=!1;for(c in d){var f={method:c,parameters:d[c]};try{var g=a.validator.methods[c].call(this,b.value.replace(/\r/g,""),b,f.parameters);if("dependency-mismatch"==g)e=!0;else{if(e=!1,"pending"==g)return void(this.toHide=this.toHide.not(this.errorsFor(b)));if(!g)return this.formatAndAdd(b,f),!1}}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h),h}}return e?void 0:(this.objectLength(d)&&this.successList.push(b),!0)},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={};return(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={};b=a(b);for(var d in a.validator.methods){var e;(e="required"===d&&"function"==typeof a.fn.prop?b.prop(d):b.attr(d))?c[d]=e:b[0].getAttribute("type")===d&&(c[d]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)delete b[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!=d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":return(b=a(c).val())&&b.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,this.pending[c.name])return"pending";if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else h={},d=d||f.defaultMessage(c,"remote"),h[c.name]=e.message=a.isFunction(d)?d(b):d,
f.showErrors(h);e.valid=g,f.stopRequest(c,g)}},d)),"pending"},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){return b=this.getLength(a.trim(b),c),this.optional(c)||b>=d[0]&&b<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--)d=a.charAt(f),d=parseInt(d,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e;return c%10==0},accept:function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){return d=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b==d.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){c=a.port,"abort"==a.mode&&(b[c]&&b[c].abort(),b[c]=d)});else{var c=a.ajax;a.ajax=function(d){var e=("port"in d?d:a.ajaxSettings).port;return"abort"==("mode"in d?d:a.ajaxSettings).mode?(b[e]&&b[e].abort(),b[e]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})}(jQuery),function(a){function b(a,b){return 3===a.nodeType?d(a,b):c(a,b)}function c(c,d){var e,f=a(c),g=f.clone().empty();return f.contents().each(function(){var a=d-g.text().length;0!==a&&(e=b(this,a),e&&g.append(e))}),g}function d(b,c){var d=e(b.data);return h&&(d=d.replace(/^ /,"")),h=!!d.match(/ $/),d=d.slice(0,c),d=a("<div/>").text(d).html()}function e(a){return a.replace(/\s+/g," ")}function f(b){var c=a(b),d=c.children(":last");if(!d)return b;var e=d.css("display");return e&&"inline"!==e?f(d):c}function g(b){var c=a(b),d=c.children(":last");return d&&d.is("p")?d:b}var h=!0;a.fn.truncate=function(c){var d=a.extend({},a.fn.truncate.defaults,c);a(this).each(function(){var c=a.trim(e(a(this).text())).length;if(!(c<=d.max_length)){var h=d.max_length-d.more.length-3,i=b(this,h),j=a(this).hide();i.insertAfter(j),f(i).append(' â€¦ <a href="#more">'+d.more+"</a>"),g(j).append(' <a href="#less">'+d.less+"</a>"),i.find("a:last").click(function(){return i.hide(),j.show(),!1}),j.find("a:last").click(function(){return i.show(),j.hide(),!1})}})},a.fn.truncate.defaults={max_length:100,more:"more",less:"less"}}(jQuery),function(a){a.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=a.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(){};j=function(b,c){return c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(g-e)+Math.abs(h-f)<d.sensitivity?(a(c).unbind("mousemove",i),c.hoverIntent_s=1,d.over.apply(c,[b])):(g=e,h=f,c.hoverIntent_t=setTimeout(function(){j(b,c)},d.interval),void 0)};var k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=jQuery.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),"mouseenter"===b.type?(g=c.pageX,h=c.pageY,a(e).bind("mousemove",i),1!==e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):(a(e).unbind("mousemove",i),1===e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.bind("mouseenter",l).bind("mouseleave",l)}}(jQuery),function(a,b){$window=a(b),a.fn.lazyload=function(c){function d(){var b=0;e.each(function(){var c=a(this);if((!f.skip_invisible||c.is(":visible"))&&!a.abovethetop(this,f)&&!a.leftofbegin(this,f))if(a.belowthefold(this,f)||a.rightoffold(this,f)){if(++b>f.failure_limit)return!1}else c.trigger("appear")})}var e=this,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return c&&(void 0!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),void 0!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(f,c)),$container=void 0===f.container||f.container===b?$window:a(f.container),0===f.event.indexOf("scroll")&&$container.bind(f.event,function(a){return d()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.one("appear",function(){if(!this.loaded){if(f.appear){var d=e.length;f.appear.call(b,d,f)}a("<img />").bind("load",function(){c.hide().attr("src",c.data(f.data_attribute))[f.effect](f.effect_speed),b.loaded=!0;var d=a.grep(e,function(a){return!a.loaded});if(e=a(d),f.load){var g=e.length;f.load.call(b,g,f)}}).attr("src",c.data(f.data_attribute))}}),0!==f.event.indexOf("scroll")&&c.bind(f.event,function(a){b.loaded||c.trigger("appear")})}),$window.bind("resize",function(a){d()}),d(),this},a.belowthefold=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.height()+$window.scrollTop():$container.offset().top+$container.height(),e<=a(c).offset().top-d.threshold},a.rightoffold=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.width()+$window.scrollLeft():$container.offset().left+$container.width(),e<=a(c).offset().left-d.threshold},a.abovethetop=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.scrollTop():$container.offset().top,e>=a(c).offset().top+d.threshold+a(c).height()},a.leftofbegin=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.scrollLeft():$container.offset().left,e>=a(c).offset().left+d.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightofscreen(b,c)||a.leftofscreen(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(c){return a.belowthefold(c,{threshold:0,container:b})},"above-the-top":function(c){return!a.belowthefold(c,{threshold:0,container:b})},"right-of-screen":function(c){return a.rightoffold(c,{threshold:0,container:b})},"left-of-screen":function(c){return!a.rightoffold(c,{threshold:0,container:b})},"in-viewport":function(c){return!a.inviewport(c,{threshold:0,container:b})},"above-the-fold":function(c){return!a.belowthefold(c,{threshold:0,container:b})},"right-of-fold":function(c){return a.rightoffold(c,{threshold:0,container:b})},"left-of-fold":function(c){return!a.rightoffold(c,{threshold:0,container:b})}})}(jQuery,window),$.fn.passwordStrength=function(a){function b(a){var b=a.length;b>5&&(b=5);var c=a.replace(/[0-9]/g,""),d=a.length-c.length;d>3&&(d=3);var e=a.replace(/\W/g,""),f=a.length-e.length;f>3&&(f=3);var g=a.replace(/[A-Z]/g,""),h=a.length-g.length;h>3&&(h=3);var i=10*b-20+10*d+15*f+10*h;return 0>i&&(i=0),i>100&&(i=100),i}return this.each(function(){var c=this;c.opts={},c.opts=$.extend({},$.fn.passwordStrength.defaults,a),c.div=$(c.opts.targetDiv),c.defaultClass=c.div.attr("class"),c.percents=c.opts.classes.length?100/c.opts.classes.length:100,v=$(this).keyup(function(){"undefined"==typeof el&&(this.el=$(this));var a=b(this.value),c=this.percents,d=Math.floor(a/c);a>=100&&(d=this.opts.classes.length-1),this.div.removeAttr("class").addClass(this.defaultClass).addClass(this.opts.classes[d])})})},$.fn.passwordStrength.defaults={classes:["is10 bad","is20 bad","is30 weak","is40 weak","is50 weak","is60 good","is70 good","is80 good","is90 good","is100 good"],targetDiv:"#password-strength",cache:{}},function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){if(d=a.extend({},d),(null===c||void 0===c)&&(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};var g,h,i=d.raw?function(a){return a}:decodeURIComponent,j=document.cookie.split("; ");for(g=0,h;j[g];g++)if(h=j[g].split("="),i(h[0])===b)return i(h[1]||"");return null}}(jQuery),"undefined"==typeof Mendeley&&(Mendeley={}),"undefined"==typeof Mendeley.PDF&&(Mendeley.PDF={}),Mendeley.PDF.Preview={constants:{idLookupUri:"/lookinside/lookup/id/%ID",getDetailsUri:"/lookinside/details/id/%ID",hashPrefix:"page-"},isOpen:!1,isDepositInterrupt:!1,close:function(){return Mendeley.PDF.Preview.isOpen?(Mendeley.PDF.Preview.isOpen=!1,$("html").removeClass("reader"),$("body").removeClass("reader"),$("#reader-overlay").fadeOut(150),"function"==typeof window.history.replaceState?history.replaceState({},"",self.location.href.split("#")[0]):window.location.hash="",Mendeley.PDF.Preview.reset(),!1):!1},open:function(a){return Mendeley.PDF.Preview.isOpen?!1:($("html").addClass("reader"),$("body").addClass("reader"),$("#reader-overlay").fadeIn(250,function(){Mendeley.PDF.Preview.isOpen||(Mendeley.PDF.Preview.isOpen=!0,Mendeley.PDF.Preview.redrawReaderUI(),a=a&&!isNaN(a)?parseInt(a,10):1,Mendeley.PDF.Preview.jumpToPage(a))}),!1)},jumpToPage:function(a){a||(a=window.location.hash,a=a.replace("#"+Mendeley.PDF.Preview.constants.hashPrefix,"")),"function"==typeof window.history.replaceState?history.replaceState({},"",self.location.href.split("#")[0]+"#"+Mendeley.PDF.Preview.constants.hashPrefix+a):(window.location.hash="",window.location.hash="#"+Mendeley.PDF.Preview.constants.hashPrefix+a)},setSize:function(a,b,c){var d=$(a);d.height(b),d.width(c),d.length>0&&d[0].nodeName&&"img"===d[0].nodeName.toLowerCase()&&(d.attr("height",b),d.attr("width",c))},reset:function(){$("#scroller").empty(),Mendeley.PDF.Preview.pageImages={},Mendeley.PDF.Preview.pagesTotal=0},setup:function(a,b){Mendeley.PDF.Preview.reset(),Mendeley.PDF.Preview.isDepositInterrupt=b,$.getJSON(Mendeley.PDF.Preview.constants.idLookupUri.replace("%ID",a),null,function(b,c,d){null!==b&&"success"===c&&b.id&&b.id===a&&b.pages>=0&&Mendeley.PDF.Preview.setupThumbnailAndPages(a,b)})},setupThumbnailAndPages:function(a,b){var c=b.pages;$.getJSON(Mendeley.PDF.Preview.constants.getDetailsUri.replace("%ID",a),null,function(b,d,e){if("success"===d&&b.id&&b.id===a&&b.pages&&b.pages.length>0&&b.pages.length===c){var f=Mendeley.PDF.Preview.setupPages(a,b.pages);f&&Mendeley.PDF.Preview.initialiseReader()}}),$("#pdf-hover").css({opacity:"0"}),$("#pdf-hover").children().css({opacity:"0"})},makeCallbackForNextPage:function(a){return function(){Mendeley.PDF.Preview.jumpToPage(a)}},setupPages:function(a,b){var c,d,e=!0,f=$("#reader-page-template").html(),g=$("#scroller");for(c=0;c<b.length;c++){var h=b[c];if(!(h.url&&h.width&&h.height&&f))return!1;var i=parseInt(c,10)+1,j=f.replace(/%ID/g,c).replace(/%W/g,h.width).replace(/%H/g,h.height).replace(/%P/g,i),k=$(j),l=k.find("#page-img-container-"+c),m=i===b.length?1:i+1;if(l.click(Mendeley.PDF.Preview.makeCallbackForNextPage(m)),h.truncate&&(h.title||h.body)&&l.prepend('<div class="truncate" />'),h.title){var n=$("<h1 />");n.html(h.title),l.append(n),h.body||n.css("padding-bottom","50px"),e=!1}h.body?(d=$('<div class="plaintext" />'),d.html(h.body),l.append(d),e=!1):h.title||(d=$('<div class="notext">No Body Text -- translate me!</div>'),l.append(d)),e&&$("#toggletext").hide(),g.append(k),Mendeley.PDF.Preview.addPageImage(c,h.url)}return $(".pdf-image").data("loaded",!1),!0},initialiseReader:function(){$("#pdf-close").click(Mendeley.PDF.Preview.close),$("#reader-overlay").click(Mendeley.PDF.Preview.close),$("#reader").click(function(a){a.stopPropagation()});var a=$("#viewer");if($("#toggletext").toggle(function(){a.addClass("show-text"),a.removeClass("show-pdf")},function(){a.addClass("show-pdf"),a.removeClass("show-text")}),$("#viewer").scroll(Mendeley.PDF.Preview.onScroll),$.each(Mendeley.PDF.Preview.pageImages,function(a){$("#pdf-page-image-"+a).one("inview",function(a,b){b&&(pageId=$(this).attr("id"),pageId=pageId.replace("pdf-page-image-",""),Mendeley.PDF.Preview.showPage(pageId))})}),Mendeley.PDF.Preview.showPage(0),Mendeley.PDF.Preview.isDepositInterrupt&&($("#scroller > div").css("display","none"),$("#scroller #page-1, #scroller #page-2").css("display","block"),$(".look-inside-interrupt").clone().appendTo($("#scroller"))),0===window.location.hash.indexOf("#"+Mendeley.PDF.Preview.constants.hashPrefix)){var b=window.location.hash.replace("#"+Mendeley.PDF.Preview.constants.hashPrefix,"");b=parseInt(b,10),(1>b||b>Mendeley.PDF.Preview.pagesTotal)&&(b=1),Mendeley.PDF.Preview.open(b)}},onScroll:function(){var a=$("#viewer"),b=a.height(),c=[],d=$.expando;$.each($.cache,function(a,b){var e=b.events;e||(b=this[d],e=b&&b.events),e&&e.inview&&c.push(b.handle.elem)}),c.length&&$(c).each(function(){var c=$(this),d=a.offset().top,e=c.offset().top-d,f=c.height();inview=c.data("inview")||!1,0>e+f||e>b?inview&&c.data("inview",!1):inview||(c.trigger("inview",[!0]),c.data("inview",!0))})},redrawReaderUI:function(){readerSize=$("#reader").width(),$("#reader-overlay .top-shadow").width(readerSize),$("#reader-overlay .bottom-shadow").width(readerSize)},pageImages:{},pagesTotal:0,addPageImage:function(a,b){Mendeley.PDF.Preview.pageImages[a]=b,Mendeley.PDF.Preview.pagesTotal++},showPage:function(a){var b=$("img#pdf-page-image-"+a);b.data("loaded")||(b.data("loaded",!0),b.attr("alt",""),b.attr("src",Mendeley.PDF.Preview.pageImages[a]).hide().fadeIn())}},resizeReader=function(){readerSize=$("#reader").width(),$("#reader-overlay .top-shadow").width(readerSize),$("#reader-overlay .bottom-shadow").width(readerSize)},$(window).resize(function(){resizeReader()}),!function(){var a,b,c,d,e,f={}.hasOwnProperty,g=function(a,b){function c(){this.constructor=a}for(var d in b)f.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},a}(),d.select_to_array=function(a){var b,c,e,f,g;for(c=new d,g=a.childNodes,e=0,f=g.length;f>e;e++)b=g[e],c.add_node(b);return c.parsed},b=function(){function a(b,c){this.form_field=b,this.options=null!=c?c:{},a.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||a.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||a.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||a.default_no_result_text},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},a.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},a.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},a.prototype.result_add_option=function(a){var b,c;return a.search_match&&this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li class="'+b.join(" ")+'"'+c+' data-option-array-index="'+a.array_index+'">'+a.search_text+"</li>"):""},a.prototype.result_add_group=function(a){return(a.search_match||a.group_match)&&a.active_options>0?'<li class="group-result">'+a.search_text+"</li>":""},a.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build(),this.results_showing?this.winnow_results():void 0},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;for(this.no_results_clear(),e=0,g=this.get_search_text(),a=g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),d=this.search_contains?"":"^",c=new RegExp(d+a,"i"),j=new RegExp(a,"i"),m=this.results_data,k=0,l=m.length;l>k;k++)b=m[k],b.search_match=!1,f=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(f=this.results_data[b.group_array_index],0===f.active_options&&f.search_match&&(e+=1),f.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.html,b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(e+=1),b.search_match?(g.length&&(h=b.search_text.search(j),i=b.search_text.substr(0,h+g.length)+"</em>"+b.search_text.substr(h+g.length),b.search_text=i.substr(0,h)+"<em>"+i.substr(h)),null!=f&&(f.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>e&&g.length?(this.update_results_content(""),this.no_results(g)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},a.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},a.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},a.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},a.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},a.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},a.default_multiple_text="Select Some Options",a.default_single_text="Select an Option",a.default_no_result_text="No results match",a}(),a=jQuery,a.fn.extend({chosen:function(d){return b.browser_is_supported()?this.each(function(){var b,e;b=a(this),e=b.data("chosen"),"destroy"===d&&e?e.destroy():e||b.data("chosen",new c(this,d))}):this}}),c=function(b){function c(){return e=c.__super__.constructor.apply(this,arguments)}return g(c,b),c.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},c.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},c.prototype.register_observers=function(){var a=this;return this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},c.prototype.destroy=function(){return a(document).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},c.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},c.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},c.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},c.prototype.search_results_mousewheel=function(a){var b,c,d;return b=-(null!=(c=a.originalEvent)?c.wheelDelta:void 0)||(null!=(d=a.originialEvent)?d.detail:void 0),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},c.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},c.prototype.close_field=function(){return a(document).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},c.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},c.prototype.test_active_click=function(b){return this.container.is(a(b.target).closest(".chosen-container"))?this.active_field=!0:this.close_field()},c.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=d.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,
this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},c.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},c.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},c.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results())},c.prototype.update_results_content=function(a){return this.search_results.html(a)},c.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},c.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},c.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},c.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},c.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},c.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},c.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},c.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},c.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},c.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},c.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_option_count=null,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},c.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},c.prototype.result_select=function(a){var b,c,d;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):(this.result_single_selected&&(this.result_single_selected.removeClass("result-selected"),d=this.result_single_selected[0].getAttribute("data-option-array-index"),this.results_data[d].selected=!1),this.result_single_selected=b),b.addClass("result-selected"),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},c.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},c.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},c.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},c.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},c.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},c.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},c.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},c.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},c.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},c.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},c.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},c.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},c.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},c}(b)}.call(this),jQuery.validator.addMethod("containsDigitAndLetter",function(a,b){return this.optional(b)||/\d+/.test(a)&&/[a-zA-Z]+/.test(a)},"Please include at least one digit and one letter"),Modernizr.input.placeholder||$.getScript("/static/js/internal/lib/jquery.placeholders.min.js");var requirejs,require,define;!function(Z){function H(a){return"[object Function]"===L.call(a)}function I(a){return"[object Array]"===L.call(a)}function y(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function M(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function t(a,b){return ga.call(a,b)}function l(a,b){return t(a,b)&&a[b]}function F(a,b){for(var c in a)if(t(a,c)&&b(a[c],c))break}function Q(a,b,c,d){return b&&F(b,function(b,e){(c||!t(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),Q(a[e],b,c,d)):a[e]=b)}),a}function u(a,b){return function(){return b.apply(a,arguments)}}function aa(a){throw a}function ba(a){if(!a)return a;var b=Z;return y(a.split("."),function(a){b=b[a]}),b}function A(a,b,c,d){return b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),b.requireType=a,b.requireModules=d,c&&(b.originalError=c),b}function ha(a){function b(a,b,c){var d,e,f,g,h,i,j,k=b&&b.split("/");d=k;var m=C.map,n=m&&m["*"];if(a&&"."===a.charAt(0))if(b){for(d=l(C.pkgs,b)?k=[b]:k.slice(0,k.length-1),b=a=d.concat(a.split("/")),d=0;b[d];d+=1)if(e=b[d],"."===e)b.splice(d,1),d-=1;else if(".."===e){if(1===d&&(".."===b[2]||".."===b[0]))break;d>0&&(b.splice(d-1,2),d-=2)}d=l(C.pkgs,b=a[0]),a=a.join("/"),d&&a===b+"/"+d.main&&(a=b)}else 0===a.indexOf("./")&&(a=a.substring(2));if(c&&m&&(k||n)){for(b=a.split("/"),d=b.length;d>0;d-=1){if(f=b.slice(0,d).join("/"),k)for(e=k.length;e>0;e-=1)if((c=l(m,k.slice(0,e).join("/")))&&(c=l(c,f))){g=c,h=d;break}if(g)break;!i&&n&&l(n,f)&&(i=l(n,f),j=d)}!g&&i&&(g=i,h=j),g&&(b.splice(0,h,g),a=b.join("/"))}return a}function c(a){z&&y(document.getElementsByTagName("script"),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===w.contextName?(b.parentNode.removeChild(b),!0):void 0})}function d(a){var b=l(C.paths,a);return b&&I(b)&&1<b.length?(b.shift(),w.require.undef(a),w.require([a]),!0):void 0}function e(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function f(a,c,d,f){var g,h,i=null,j=c?c.name:null,k=a,m=!0,n="";return a||(m=!1,a="_@r"+(M+=1)),a=e(a),i=a[0],a=a[1],i&&(i=b(i,j,f),h=l(K,i)),a&&(i?n=h&&h.normalize?h.normalize(a,function(a){return b(a,j,f)}):b(a,j,f):(n=b(a,j,f),a=e(n),i=a[0],n=a[1],d=!0,g=w.nameToUrl(n))),d=!i||h||d?"":"_unnormalized"+(N+=1),{prefix:i,name:n,parentMap:c,unnormalized:!!d,url:g,originalName:k,isDefine:m,id:(i?i+"!"+n:n)+d}}function g(a){var b=a.id,c=l(D,b);return c||(c=D[b]=new w.Module(a)),c}function h(a,b,c){var d=a.id,e=l(D,d);!t(K,d)||e&&!e.defineEmitComplete?(e=g(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(K[d])}function i(a,b){var c=a.requireModules,d=!1;b?b(a):(y(c,function(b){(b=l(D,b))&&(b.error=a,b.events.error&&(d=!0,b.emit("error",a)))}),d||j.onError(a))}function k(){R.length&&(ia.apply(J,[J.length-1,0].concat(R)),R=[])}function m(a){delete D[a],delete E[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,y(a.depMaps,function(d,e){var f=d.id,g=l(D,f);g&&!a.depMatched[e]&&!c[f]&&(l(b,f)?(a.defineDep(e,K[f]),a.check()):n(g,b,c))}),c[d]=!0)}function o(){var a,b,e,f,g=(e=1e3*C.waitSeconds)&&w.startTime+e<(new Date).getTime(),h=[],j=[],k=!1,l=!0;if(!s){if(s=!0,F(E,function(e){if(a=e.map,b=a.id,e.enabled&&(a.isDefine||j.push(e),!e.error))if(!e.inited&&g)d(b)?k=f=!0:(h.push(b),c(b));else if(!e.inited&&e.fetched&&a.isDefine&&(k=!0,!a.prefix))return l=!1}),g&&h.length)return e=A("timeout","Load timeout for modules: "+h,null,h),e.contextName=w.contextName,i(e);l&&y(j,function(a){n(a,{},{})}),g&&!f||!k||!z&&!da||B||(B=setTimeout(function(){B=0,o()},50)),s=!1}}function p(a){t(K,a[0])||g(f(a[0],null,!0)).init(a[1],a[2])}function q(a){var a=a.currentTarget||a.srcElement,b=w.onScriptLoad;return a.detachEvent&&!W?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=w.onScriptError,(!a.detachEvent||W)&&a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function r(){var a;for(k();J.length;){if(a=J.shift(),null===a[0])return i(A("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}}var s,v,w,x,B,C={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},D={},E={},G={},J=[],K={},L={},M=1,N=1;return x={require:function(a){return a.require?a.require:a.require=w.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=K[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b=l(C.pkgs,a.map.id);return(b?l(C.config,a.map.id+"/"+b.main):l(C.config,a.map.id))||{}},exports:K[a.map.id]}}},v=function(a){this.events=l(G,a.id)||{},this.map=a,this.shim=l(C.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=u(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;L[a]||(L[a]=!0,w.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var d=this.exports,e=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(H(e)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{d=w.execCb(c,e,b,d)}catch(f){a=f}else d=w.execCb(c,e,b,d);if(this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?d=b.exports:void 0===d&&this.usingExports&&(d=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",i(this.error=a)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(K[c]=d,j.onResourceLoad)&&j.onResourceLoad(w,this.map,this.depMaps),m(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,c=a.id,d=f(a.prefix);this.depMaps.push(d),h(d,"defined",u(this,function(d){var e,k;k=this.map.name;var n=this.map.parentMap?this.map.parentMap.name:null,o=w.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(d.normalize&&(k=d.normalize(k,function(a){return b(a,n,!0)})||""),d=f(a.prefix+"!"+k,this.map.parentMap),h(d,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(k=l(D,d.id))&&(this.depMaps.push(d),this.events.error&&k.on("error",u(this,function(a){this.emit("error",a)})),k.enable())):(e=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=u(this,function(a){this.inited=!0,this.error=a,a.requireModules=[c],F(D,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&m(a.map.id)}),i(a)}),e.fromText=u(this,function(b,d){var h=a.name,k=f(h),l=O;d&&(b=d),l&&(O=!1),g(k),t(C.config,c)&&(C.config[h]=C.config[c]);try{j.exec(b)}catch(m){return i(A("fromtexteval","fromText eval for "+c+" failed: "+m,m,[c]))}l&&(O=!0),this.depMaps.push(k),w.completeLoad(h),o([h],e)}),d.load(a.name,o,e,C))})),w.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){E[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(a,b){var c,d;if("string"==typeof a){if(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=l(x,a.id))return void(this.depExports[b]=c(this));this.depCount+=1,h(a,"defined",u(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&h(a,"error",u(this,this.errback))}c=a.id,d=D[c],!t(x,c)&&d&&!d.enabled&&w.enable(a,this)})),F(this.pluginMaps,u(this,function(a){var b=l(D,a.id);b&&!b.enabled&&w.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},w={config:C,contextName:a,registry:D,defined:K,urlFetched:L,defQueue:J,Module:v,makeModuleMap:f,nextTick:j.nextTick,onError:i,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=C.pkgs,c=C.shim,d={paths:!0,config:!0,map:!0};F(a,function(a,b){d[b]?"map"===b?(C.map||(C.map={}),Q(C[b],a,!0,!0)):Q(C[b],a,!0):C[b]=a}),a.shim&&(F(a.shim,function(a,b){I(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=w.makeShimExports(a)),c[b]=a}),C.shim=c),a.packages&&(y(a.packages,function(a){a="string"==typeof a?{name:a}:a,b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ja,"").replace(ea,"")}}),C.pkgs=b),F(D,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=f(b))}),(a.deps||a.callback)&&w.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(Z,arguments)),b||a.exports&&ba(a.exports)}},makeRequire:function(d,e){function h(b,c,k){var l,m;return e.enableBuildCallback&&c&&H(c)&&(c.__requireJsBuild=!0),"string"==typeof b?H(c)?i(A("requireargs","Invalid require call"),k):d&&t(x,b)?x[b](D[d.id]):j.get?j.get(w,b,d,h):(l=f(b,d,!1,!0),l=l.id,t(K,l)?K[l]:i(A("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+a+(d?"":". Use require([])")))):(r(),w.nextTick(function(){r(),m=g(f(null,d)),m.skipMap=e.skipMap,m.init(b,c,k,{enabled:!0}),o()}),h)}return e=e||{},Q(h,{isBrowser:z,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0];return-1!==e&&("."!==f&&".."!==f||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),w.nameToUrl(b(a,d&&d.id,!0),c,!0)},defined:function(a){return t(K,f(a,d,!1,!0).id)},specified:function(a){return a=f(a,d,!1,!0).id,t(K,a)||t(D,a)}}),d||(h.undef=function(a){k();var b=f(a,d,!0),e=l(D,a);c(a),delete K[a],delete L[b.url],delete G[a],e&&(e.events.defined&&(G[a]=e.events),m(a))}),h},enable:function(a){l(D,a.id)&&g(a).enable()},completeLoad:function(a){var b,c,e=l(C.shim,a)||{},f=e.exports;for(k();J.length;){if(c=J.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(c=l(D,a),!b&&!t(K,a)&&c&&!c.inited){if(C.enforceDefine&&(!f||!ba(f)))return d(a)?void 0:i(A("nodefine","No define call for "+a,null,[a]));p([a,e.deps||[],e.exportsFn])}o()},nameToUrl:function(a,b,c){var d,e,f,g,h,i;if(j.jsExtRegExp.test(a))g=a+(b||"");else{for(d=C.paths,e=C.pkgs,g=a.split("/"),h=g.length;h>0;h-=1){if(i=g.slice(0,h).join("/"),f=l(e,i),i=l(d,i)){I(i)&&(i=i[0]),g.splice(0,h,i);break}if(f){a=a===f.name?f.location+"/"+f.main:f.location,g.splice(0,h,a);break}}g=g.join("/"),g+=b||(/^data\:|\?/.test(g)||c?"":".js"),g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+g}return C.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+C.urlArgs):g},load:function(a,b){j.load(w,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||ka.test((a.currentTarget||a.srcElement).readyState))&&(P=null,a=q(a),w.completeLoad(a.id))},onScriptError:function(a){var b=q(a);return d(b.id)?void 0:i(A("scripterror","Script error for: "+b.id,a,[b.id]))}},w.require=w.makeRequire(),w}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),da=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),E={},s={},R=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(H(requirejs))return;s=requirejs,requirejs=void 0}"undefined"!=typeof require&&!H(require)&&(s=require,require=void 0),j=requirejs=function(a,b,c,d){var e,f="_";return!I(a)&&"string"!=typeof a&&(e=a,I(b)?(a=b,b=c,c=d):a=[]),e&&e.context&&(f=e.context),(d=l(E,f))||(d=E[f]=j.s.newContext(f)),e&&d.configure(e),d.require(a,b,c)},j.config=function(a){return j(a)},j.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=j),j.version="2.1.9",j.jsExtRegExp=/^\/|:|\?|\.js$/,j.isBrowser=z,w=j.s={contexts:E,newContext:ha},j({}),y(["toUrl","undef","defined","specified"],function(a){j[a]=function(){var b=E._;return b.require[a].apply(b,arguments)}}),z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0])&&(x=w.head=C.parentNode),j.onError=aa,j.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},j.load=function(a,b,c){var d=a&&a.config||{};if(z)return d=j.createNode(d,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||W?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(O=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,K=d,C?x.insertBefore(d,C):x.appendChild(d),K=null,d;if(da)try{importScripts(c),a.completeLoad(b)}catch(e){a.onError(A("importscripts","importScripts failed for "+b+" at "+c,e,[b]))}},z&&!s.skipDataMain&&M(document.getElementsByTagName("script"),function(a){return x||(x=a.parentNode),(J=a.getAttribute("data-main"))?(q=J,s.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",s.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),s.deps=s.deps?s.deps.concat(q):[q],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),I(b)||(c=b,b=null),!b&&H(c)&&(b=[],c.length&&(c.toString().replace(la,"").replace(ma,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),O&&((d=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(a){return"interactive"===a.readyState?P=a:void 0}),d=P),d&&(a||(a=d.getAttribute("data-requiremodule")),e=E[d.getAttribute("data-requirecontext")])),(e?e.defQueue:R).push([a,b,c])},define.amd={jQuery:!0},j.exec=function(b){return eval(b)},j(s)}}(this),!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():a[b]=c()}(this,"verge",function(){function a(){return{width:l(),height:m()}}function b(a,b){var c={};return b=+b||0,c.width=(c.right=a.right+b)-(c.left=a.left-b),c.height=(c.bottom=a.bottom+b)-(c.top=a.top-b),c}function c(a,c){return a=a&&!a.nodeType?a[0]:a,a&&1===a.nodeType?b(a.getBoundingClientRect(),c):!1}function d(b){b=null==b?a():1===b.nodeType?c(b):b;var d=b.height,e=b.width;return d="function"==typeof d?d.call(b):d,e="function"==typeof e?e.call(b):e,e/d}var e={},f="undefined"!=typeof window&&window,g="undefined"!=typeof document&&document,h=g&&g.documentElement,i=f.Modernizr,j=f.matchMedia||f.msMatchMedia,k=j?function(a){return!!j.call(f,a).matches}:function(){return!1},l=h.clientWidth<f.innerWidth?function(){return f.innerWidth}:function(){return h.clientWidth},m=h.clientHeight<f.innerHeight?function(){return f.innerHeight}:function(){return h.clientHeight};return e.mq=!j&&i&&i.mq||k,e.matchMedia=j?function(){return j.apply(f,arguments)}:function(){return{}},e.viewportW=l,e.viewportH=m,e.viewport=a,e.scrollX=function(){return f.pageXOffset||h.scrollLeft},e.scrollY=function(){return f.pageYOffset||h.scrollTop},e.rectangle=c,e.aspect=d,e.inX=function(a,b){var d=c(a,b);return!!d&&d.right>=0&&d.left<=l()},e.inY=function(a,b){var d=c(a,b);return!!d&&d.bottom>=0&&d.top<=m()},e.inViewport=function(a,b){var d=c(a,b);return!!d&&d.bottom>=0&&d.right>=0&&d.top<=m()&&d.left<=l()},e}),define("depositInterruption/DepositInterruptionController",[],function(){function a(a,b,c){var d=this,e=function(b){var c=b.getContentType(),d=b.getDoi(),e=b.getHref();a.isDepositInterruptible(c,d)?f(b):g(e)};d.continueCallbackForLink=function(a){return function(b){c.redirectTo(a.getHref()+"?costCode="+b+"&ic=1")}};var f=function(a){b.showPopup(a.getHref(),d.continueCallbackForLink(a))},g=function(a){c.redirectTo(a)};d.init=function(){b.useModal()&&b.onClick(e)}}return a}),define("depositInterruption/DepositInterruptionService",[],function(){function a(a){var b=this;b.isDepositInterruptible=function(b,c){var d="/deposit-interrupt/shouldinterrupt?contentType="+b+"&contentId="+c,e=!1;return a.getJSONNoAsync(d).done(function(a){e=a.displayPopup}),e}}return a}),define("depositInterruption/DepositInterruptionLink",[],function(){function a(a){var b=this,c=a;return b.getHref=function(){return c.attr("href")},b.getContentType=function(){return c.attr("contentType")},b.getDoi=function(){return c.attr("doi")},b.getParentDoi=function(){return c.attr("parentDoi")},b}return a}),define("depositInterruption/DepositInterruptionView",["./DepositInterruptionLink"],function(a){function b(){var b=this;b.useModal=function(){return!$("html").hasClass("lt-ie9")},b.onClick=function(b){$(document).delegate(".deposit-interrupt","click",function(c){c.preventDefault(),b(new a($(this)))}),$("#reader").delegate(".deposit-interrupt","click",function(c){c.preventDefault(),b(new a($(this)))})},b.showPopup=function(a,b){$.colorbox({href:"/interruption .mod",trapFocus:!0,opacity:.75,width:400,height:292,overlayClose:!1,onComplete:function(){$("#cost-code").focus(),$("#colorbox .btn-monster").click(function(){var a=$("#cost-code").val();$.colorbox.close(),b(a)}),$("#colorbox .cancel").click(function(a){a.preventDefault(),$.colorbox.close()})},onOpen:function(){$("#cboxOverlay, #colorbox").css("z-index","9999"),window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})}}return b}),define("utils/DocumentHelper",[],function(){function a(){this.queryString=function(){return document.location.search},this.currentUri=function(){return document.location.href},this.redirectTo=function(a){document.location=a},this.redirectAfterDelay=function(a){setTimeout(function(){document.location.href=a},100)},this.reloadPageWithQuery=function(a){document.location=document.location.pathname+"?"+a},this.getHashParameter=function(){return window.location.hash.substring(1)}}return a}),define("utils/Requests",[],function(){function a(){var a=this;a.post=function(a,b){return $.post(a,b)},a.get=function(a){return $.get(a)},a.getJSON=function(a){return $.getJSON(a)},a.getJSONWithHeaders=function(a){return $.ajax({headers:{Accept:"application/json"},url:a})},a.getJSONNoAsync=function(a){return $.ajax({dataType:"json",url:a,async:!1})}}return a}),define("depositInterruption/start",["./DepositInterruptionController","./DepositInterruptionService","./DepositInterruptionView","utils/DocumentHelper","utils/Requests"],function(a,b,c,d,e){return{init:function(){var f=!!("ontouchstart"in window);if("callPhantom"in window&&(f=!1),f!==!0){var g=new c,h=new b(new e);new a(h,g,new d).init()}}}}),define("abstractPage/CookiePolicy",[],function(){function a(){var a="cookie-policy",b="banner-cookie=closed",c="cookie-banner__right-ui",d="."+c;$("#"+a).find("form").replaceWith(function(){return $($(this).contents())}),document.cookie.indexOf(b)<0&&$("#"+a).show(),$("#"+a).find(d).on("click",function(){var c=new Date;c.setTime(c.getTime()+31536e6),document.cookie=b+";path=/;expires="+c.toUTCString(),$("#"+a).hide()})}return a}),define("abstractPage/DeepDyveController",[],function(){function a(a,b){var c=function(){var c=a.getUrl()+"?docId="+a.getDoi()+"&fieldName=journal_doi&journal="+a.getPrintIssn()+"&affiliateId=springer&format=jsonp&callback=?";b.getJSON(c).done(function(b){"ok"===b.status?(a.setUrl(b.url),a.show()):a.setUrl("#")}).fail(function(){a.setUrl("#")})};a.isOnPage()&&c()}return a}),define("abstractPage/DeepDyve",[],function(){function a(){this.getUrl=function(){return $("#deepdyve-link").attr("href")},this.setUrl=function(a){$("#deepdyve-link").attr("href",a)},this.getDoi=function(){return $("#abstract-about-doi").text()},this.getPrintIssn=function(){return $("#abstract-about-issn").text()},this.isOnPage=function(){return $(".deepdyve-content").length>0},this.show=function(){$(".deepdyve-content, .line-divider").show()}}return a}),define("abstractPage/ExpanderElement",[],function(){function a(a){var b=a,c=b.children(".expander-content"),d=c.children().children(),e=b.find(".expander-title");this.onClick=function(a){e.click(a)},this.onKbEnter=function(a){e.keypress(a)},this.isEmpty=function(){b.not(".expander-open")},this.getId=function(){return b.attr("id")},this.showLoader=function(){b.addClass("expander-loading")},this.hideLoader=function(){b.removeClass("expander-loading")},this.show=function(){b.removeClass("hidden")},this.hideContent=function(){d.addClass("hidden")},this.showContent=function(){d.removeClass("hidden")},this.setContent=function(a){d.html(a)},this.open=function(){c.slideDown(function(){b.addClass("expander-open");var a=document.createEvent("Event");a.initEvent("sl-expand",!0,!0),b.get(0).dispatchEvent(a)})},this.close=function(){c.slideUp(function(){b.removeClass("expander-open")})},this.isOpen=function(){return c.is(":visible")},this.hasContent=function(){return""!==$.trim(d.html())}}return a}),define("abstractPage/Expander",["abstractPage/ExpanderElement"],function(a){function b(){this.onClick=function(b){$(document).delegate(".expander-title","click",function(c){c.preventDefault(),b(new a($(this).parent()))})},this.getAllElements=function(){return $(".expander").map(function(b,c){return new a($(c))})}}return b}),define("abstractPage/ExpanderController",[],function(){function a(a,b){var c=function(b){var c,d=a.getAllElements();for(c=0;c<d.length;c++){var e=d[c];e.isOpen()&&e.getId()!==b?e.close():e.isOpen()||e.getId()!==b||e.open();
}};this.toggle=function(a){a.isOpen()?a.close():a.open()},this.openFromHashParameter=function(){var a=b.getHashParameter();""!==a&&c(a)},a.onClick(this.toggle)}return a}),define("abstractPage/LookInside",[],function(){function a(a){var b=this,c=a;return b.hasInterruptPreviewClass=function(){return c.hasClass("interrupt-preview")},b.hasDepositInterruptPreviewClass=function(){return c.hasClass("deposit-interrupt-preview")},b.getHref=function(){return c.attr("href")},b.isEnabled=function(){return"undefined"!=typeof b.getHref()},b.getContentType=function(){return c.attr("contentType")},b.getDoi=function(){return c.attr("doi")},b.parentHasNoAccessClass=function(){return c.parents("li,.document").hasClass("no-access")},b}function b(){var b=this,c=$(".lookinside-href");return b.onClick=function(b){c.click(function(c){c.preventDefault(),b(new a($(this)))})},b}return b}),define("abstractPage/LookInsideController",[],function(){function a(a,b,c){var d=this,e=function(b){if(b.hasInterruptPreviewClass())return!0;if(b.hasDepositInterruptPreviewClass()){var c=b.getContentType(),d=b.getDoi();return a.isDepositInterruptible(c,d)}return!1},f=function(a){return a.replace(/^\/(?:article|chapter|protocol|referenceworkentry)\/(.*)\/lookinside\/000.png$/m,"$1")},g=function(a){a.parentHasNoAccessClass()||c.hasUnlockIcon()?(j(),$("#reader-overlay").addClass("no-access")):i()},h=function(a){if(a.isEnabled()){var b=f(a.getHref());Mendeley.PDF.Preview.setup(b,e(a)),Mendeley.PDF.Preview.open(0),g(a)}};this.init=function(){b.onClick(h)},this.maybeAutoOpenLookInside=function(){d.shouldAutoShowLookInside()&&setTimeout(function(){$(".lookinside-href:first").click().mousedown()},200)},this.shouldAutoShowLookInside=function(){return"true"===$("#autoShowLookInside").val()};var i=function(){if(!$("#reader .bar-dock").length&&$("span.action:not(:has(.access-link)):first").length){for(var a=$(".bar-actions a.pdf-link:not(.fake-feature)"),b="",c=0;c<a.size();c++)b=b+'<span class="action icon-download-alt help">'+a[c].parentElement.innerHTML+"</span>";$("#reader .top-shadow").after('<div class="bar-dock"><div class="bar-wrapper"><div class="bar-actions">'+b+"</div></div></div>")}},j=function(){$("#reader .bar-dock").remove()}}return a}),define("abstractPage/ActionBarView",[],function(){function a(){var a=this,b=$(".bar-wrapper");0===b.length&&(b=$(".bar-actions"));var c=$(".bar-dock"),d=$(".bar-access-restr");d.css("margin-top","-24px"),a.openAccessRestr=function(){d.animate({marginTop:"0px"},"fast")},a.closeAccessRestr=function(){d.delay(1200).animate({marginTop:"-24px"},"fast")},a.onGetAccessButtonHover=function(a,b){$(".bar-actions .icon-unlock a").hoverIntent({over:a,out:b})},a.hasUnlockIcon=function(){return $(".bar-actions .icon-unlock a").length>0},a.onGetAccessButtonClick=function(a){$("a.access-link").click(function(b){b.preventDefault(),a($(this).attr("href"))})},a.onWindowResize=function(a){$(window).resize(a)},a.onScroll=function(a){$(window).scroll(a)},a.scrollActionBar=function(){b.length>0&&($(document).scrollTop()>c.offset().top?b.addClass("bar-scrolled").css({left:c.offset().left-$(document).scrollLeft(),width:c.width()}):(b.removeClass("bar-scrolled").css("left",0),b.width("100%")))},a.fixPosition=function(){b.length>0&&$(document).scrollTop()>c.offset().top&&b.css({left:c.offset().left-$(document).scrollLeft(),width:c.width()})}}return a}),define("abstractPage/AbstractController",[],function(){function a(a){$("#abstract-actions-placeholder").append($("#abstract-actions"));var c=new b($("#fulltext-provided-abstracts").html());c.setExcerptMessage(),a.expandArticleHistoryLink()}function b(a){var b=$("<div>").html(a);this.getDataFragmentType=function(){return b.find("span").first().attr("data-fragment-type")},this.setExcerptMessage=function(){var a=this.getDataFragmentType(),b=$(".excerpt-message");"true"===b.attr("displayExcerpt")&&("excerpt"===a?b.html(b.attr("abstractTruncateMessage")):b.html(b.attr("abstractFullcontentMessage")))}}return a}),define("abstractPage/JournalView",[],function(){function a(){var a=this,b=$(".browse form");a.onBrowseFormSummit=function(a){b.submit(a)},a.validateVolumeIssue=function(a){var b=a.currentTarget,c=$(b).find("#volume"),d=$(b).find("#issue");return""===c.val()?($(b).find(".volume .error-message").removeClass("hidden"),c.addClass("error"),""===d.val()&&d.addClass("error"),!1):!0},a.getVolume=function(){return b.find("#volume").val()},a.getIssue=function(){return b.find("#issue").val()},a.displayErrorMessage=function(){b.find(".volume .error-message").removeClass("hidden")},a.setVolumeError=function(){b.find("#volume").addClass("error")},a.setIssueError=function(){b.find("#issue").addClass("error")},a.clearErrors=function(){b.find(".volume .error-message").addClass("hidden"),$("#volume").removeClass("error"),b.find(".issue .error-message").addClass("hidden"),$("#issue").removeClass("error")},a.expandJournalHistoryLink=function(){$("#about-journal-history").length&&$(".journal-history-link").click(function(a){a.preventDefault();var b=$("#about-journal-history");b.addClass("expander-open"),b.children(".expander-content").show(),$("html,body").scrollTop($(this.hash).offset().top-40)})},a.isJournalHistoryAvailable=function(){return $("#about-journal-history").length>0},a.setGoogleAnalyticsEvent=function(a,b){$("#open-access-view-articles-link").on("click",function(){var c=$(this).attr("data-journal-id"),d=$(this).attr("data-journal-title"),e=c+" | "+d;a.trackEvent(b,"View open access articles",e)})}}return a}),define("abstractPage/AbstractView",[],function(){function a(){var a=this;a.expandArticleHistoryLink=function(){$("#article-history").length&&$("#article-history-link").click(function(a){a.preventDefault();var b=$("#article-history");b.addClass("expander-open"),b.children(".expander-content").show(),$("html,body").scrollTop($(this.hash).offset().top-40)})}}return a}),define("abstractPage/JournalController",[],function(){function a(a,b){var c=function(){return b.clearErrors(),""===b.getVolume()?(b.displayErrorMessage(),b.setVolumeError(),""===b.getIssue()&&b.setIssueError(),!1):!0};if(b.isJournalHistoryAvailable()===!0){var d=$("input[name=facet-journal-id]").val(),e=$("#title").text(),f=d+" | "+e;a.trackEvent("Journal history","Available on abstract page",f)}b.setGoogleAnalyticsEvent(a,"Journal homepage"),b.onBrowseFormSummit(c),b.expandJournalHistoryLink()}return a}),define("abstractPage/ContentCitations",[],function(){function a(){this.getUrl=function(){return $("#citation-link").attr("href")},this.setUrl=function(a){$("#citation-link").attr("href",a)},this.getContentType=function(){return $("#contentType").val()},this.getDoi=function(){return"Article"===this.getContentType()?$("#abstract-about-doi").text():$("#abstract-about-book-chapter-doi").text()},this.setCount=function(a){$("#citation-link .abstract-numbers__count").text(a)},this.setSingularLabel=function(){$("#citation-link .abstract-numbers__label").text("Citation")},this.isOnPage=function(){return $(".abstract-numbers").length>0},this.show=function(){$("#citation-link").removeClass("hidden")},this.hide=function(){$("#citation-link").addClass("hidden")},this.hideArticleMetricsTitle=function(){0===$(".abstract-numbers h2.thereAreSocialMentions").length&&$(".abstract-numbers h2").addClass("hidden")},this.showArticleMetricsTitle=function(){$(".abstract-numbers h2").removeClass("hidden"),$(".abstract-numbers h2").addClass("thereAreArticleMetrics")},this.setGoogleAnalyticsEvent=function(a,b){$(".abstract-numbers").delegate("#citation-link","mousedown",function(){a.trackEvent(b,"click","cited by")})}}return a}),define("abstractPage/ContentCitationsController",[],function(){function a(a,b,c){var d=function(){var d=a.getUrl()+"?doi="+a.getDoi()+"&callback=?";b.getJSONWithHeaders(d).done(function(b){if(b&&"0"!==b["citation-count-result"]["citation-count"]){var d=b["citation-count-result"]["citation-count"];a.setCount(d),"1"===d&&a.setSingularLabel(),a.setUrl("http://citations.springer.com/item?doi="+a.getDoi()),a.setGoogleAnalyticsEvent(c,"Article metrics"),a.showArticleMetricsTitle(),a.show()}else a.hideArticleMetricsTitle(),a.hide(),a.setUrl("#")}).fail(function(){a.hideArticleMetricsTitle(),a.hide(),a.setUrl("#")})};a.isOnPage()&&d()}return a}),define("abstractPage/ActionBarController",[],function(){function a(a){a.onWindowResize(a.fixPosition),a.onScroll(a.scrollActionBar),$(window).width()>=600&&a.onGetAccessButtonHover(a.openAccessRestr,a.closeAccessRestr)}return a}),define("abstractPage/SocialLinksView",[],function(){function a(){this.getWindowFeatures=function(a,b){var c=window.screen.width/2-(a/2+10),d=window.screen.height/2-(b/2+50);return"status=no,height="+b+",width="+a+",resizable=yes,left="+c+",top="+d+",screenX="+c+",screenY="+d+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no"},this.getTitle=function(){var a=$("h1#title").text();return a.replace(/(\r\n|\n|\r)\s{2,}/gm," ")},this.onFacebookClick=function(a){$("#facebook").click(a)},this.onLinkedInClick=function(a){$("#linkedin").click(a)},this.onTwitterClick=function(a){$("#twitter").click(a)},this.openSharerWindow=function(a){window.open(a,"sharer",this.getWindowFeatures(550,520))},this.openFacebookPopup=function(a,b){return this.openSharerWindow("http://www.facebook.com/sharer.php?s=100&p[title]="+encodeURIComponent(a)+"&p[url]="+encodeURIComponent(b)),!1},this.openLinkedInPopup=function(a,b,c){return this.openSharerWindow("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(c)+"&title="+encodeURIComponent(a)+"&summary="+encodeURIComponent(b)),!1},this.openTwitterPopup=function(a,b,c){return this.openSharerWindow("https://twitter.com/intent/tweet?hashtags="+encodeURIComponent(c)+"&url="+encodeURIComponent(b)+"&text="+encodeURIComponent(a)),!1}}return a}),define("abstractPage/SocialLinksController",[],function(){function a(a,b){a.onFacebookClick(function(){var c="I'm reading "+a.getTitle();a.openFacebookPopup(c,b.currentUri())}),a.onLinkedInClick(function(){a.openLinkedInPopup(a.getTitle(),"I'm reading this article",b.currentUri())}),a.onTwitterClick(function(){var c="I'm reading "+a.getTitle(),d="springerlink";a.openTwitterPopup(c,b.currentUri(),d)})}return a}),define("analytics/WebTrekk",[],function(){function a(a){var b,c=function(a){var b={};try{b=new webtrekkV3(a)}catch(c){}return b},d=function(){var d={trackDomain:a.trackDomain,trackId:a.trackId,linkTrack:"standard",heatmap:"1",form:"1",contentId:a.pageType};return b=c(d),a.userDetails&&(b.customSessionParameter=a.userDetails),b};this.init=function(){if(b=d(),"undefined"!=typeof webtrekkV3)if($("#web-trekk-abstract").length){var a=$("#web-trekk-abstract"),c=a.attr("doi"),e=a.attr("contentType"),f=a.attr("publication"),g=a.attr("viewType"),h=a.attr("pageType"),i=a.attr("unsiloed"),j=a.attr("openChoice");a.attr("embedFulltext").length>0&&"true"===a.attr("embedFulltext")?this.sendInfo(c,e,f,"full text download","rd_springer_com.reference_work.entry_full_text",null,j):this.sendInfo(c,e,f,g,h,i,j)}else this.sendInfo()};var e=function(a,c,d,e,f,g,h){return f&&(b.contentId=f),b.product=a,b.productStatus="view",c&&(b.productCategory={1:c.toLowerCase(),2:d}),e&&(b.customEcommerceParameter={1:e.toLowerCase()}),b.customParameter={},g&&(b.customParameter[1]=g),h&&(b.customParameter[2]=h),b};this.sendInfo=function(a,b,c,d,f,g,h){try{e(a,b,c,d,f,g,h).sendinfo()}catch(i){}}}return a}),define("analytics/GoogleAnalytics",[],function(){function a(){this.loadForAbstract=function(){if($("#google-analytics-abstract").length){var a=$("#google-analytics-abstract");this.trackEvent(a.attr("gaEventCategory"),a.attr("gaEventAction"),a.attr("gaEventLabel"))}},this.trackEvent=function(){var a=["send","event"].concat(Array.prototype.slice.call(arguments));ga.apply(this,a)}}return a}),define("abstractPage/SocialMentionView",[],function(){function a(){this.getDoi=function(){return $("#abstract-about-doi").text()},this.onLinkClick=function(a){return $(".abstract-numbers__comments").is(":visible")?void $(".abstract-numbers__comments").click(a):void 0},this.initWith=function(a){$(".social-mention").append(a)},this.hideArticleMetricsTitle=function(){0===$(".abstract-numbers h2.thereAreArticleMetrics").length&&$(".abstract-numbers h2").addClass("hidden")},this.showArticleMetricsTitle=function(){$(".abstract-numbers h2").removeClass("hidden"),$(".abstract-numbers h2").addClass("thereAreSocialMentions")}}return a}),define("abstractPage/SocialMentionController",[],function(){function a(a,b,c){var d=b.getDoi(),e="/social/"+d;""!==d&&c.get(e).done(function(c){c.indexOf("Social Share")>-1&&(b.initWith(c),b.showArticleMetricsTitle(),b.onLinkClick(function(){a.trackEvent("Article metrics","click","altmetric")}))})}return a}),define("abstractPage/BookSeriesOnlineFirstChaptersExpander",[],function(){function a(a){var b=a.find(".fewer-chapters"),c=a.find(".more-chapters"),d=b.find(".functions-bar"),e=d.find("a"),f=c.find(".functions-bar a");e.click(function(){d.addClass("hidden"),c.removeClass("hidden")}),f.click(function(){d.removeClass("hidden"),c.addClass("hidden")})}return a}),define("abstractPage/FakeFeaturesController",[],function(){function a(a,b){var c=this;c.handleFakeFeatureClick=function(c){var d=$(c.currentTarget);return a.trackEvent(d.attr("fakeFeatureCategory"),d.attr("fakeFeatureAction"),d.attr("pageType")),b.openPopup(),!1},c.init=function(){b.onClick(c.handleFakeFeatureClick)}}return a}),define("abstractPage/FakeFeaturesView",[],function(){function a(){var a=this;a.onClick=function(a){$(".fake-feature").click(a)},a.openPopup=function(){$.colorbox({html:'<div class="lb-fake-feature mod lb"><div class="mod-hd"><h3>Sorry!</h3><a class="btn btn-close" href="#close" title="close">Close</a></div><div class="mod-bd"><p>Thank you for registering your interest in this feature. Although it is not yet available, we are constantly working to improve our product and services to our users.</p></div></div>',trapFocus:!0,opacity:.75,overlayClose:!0,fixed:!0,scrolling:!1,maxWidth:"70%",onOpen:function(){$("#cboxOverlay, #colorbox").css("z-index","9999"),window.returnFocusTo=document.activeElement},onComplete:function(){$(".btn-close").click(function(a){$.colorbox.close(),a.preventDefault()})},onClosed:function(){window.returnFocusTo.focus()}})}}return a}),define("abstractPage/LeafPpvOption",[],function(){function a(){$("#display-leaf-ppv").hide();var a=".aggregate-pricing",b=$("#display-leaf-ppv a").attr("href");$("#display-leaf-ppv").load(b+" "+a,"",function(a,b){if("success"===b){$("#display-leaf-ppv").html(a);var c=$("<div>").html(a).find("#promo-message").text();c&&($("div.shout-out p").append(c),$(".line-divider").addClass("line-divider--extend-padding"),$("#display-book-ppv").addClass("display-book-ppv--extend-margin"),$("#price-promo-message").removeClass("hidden")),$("#display-leaf-ppv").show()}})}return a}),define("abstractPage/FulltextToggleAction",[],function(){function a(a,b,c){var d=this,e=$("div.fulltext-content"),f=$("span.fulltext-embed-action.open"),g=$("span.fulltext-embed-action.closed"),h=$("div.gradient-wash"),i=$.trim(e.text()),j=function(){h.addClass("hidden"),e.removeClass("closed").addClass("open"),f.addClass("hidden"),g.removeClass("hidden")},k=function(){h.removeClass("hidden"),e.removeClass("open").addClass("closed"),f.removeClass("hidden"),g.addClass("hidden")},l=function(c,d){a.isDepositInterruptible(d,c)?b.showPopup("",function(a){$.post("/track/fulltext",{doi:c,costCode:a}),j()}):($.post("/track/fulltext",{doi:c}),j())};this.trackShowAllClick=function(a,b,d,e){c.trackEvent("ReferenceWork","Expand full text",d),e?l(a,b):j()},!i||i.length<6e3?h.add(f).length>0&&(h.add(f).addClass("hidden"),e.removeClass("closed").addClass("open")):(window.location.hash&&(j(),$(document).scrollTop($(window.location.hash).offset().top)),$("div.fulltext-content a[href*=#CR]").click(function(){j()}),f.click(function(){var a=$("#abstract-about .doi").text(),b="ReferenceWorkEntry",c=f.hasClass("deposit"),e=f.attr("publication");d.trackShowAllClick(a,b,e,c)}),g.click(function(){k(),$(document).scrollTop($("#fulltext-content-anchor").offset().top),$("html, body").animate({scrollTop:f.offset().top-300},"fast")}))}return a}),define("abstractPage/LiveReferenceWorkEntryVersionHistory",[],function(){function a(){var a=$(".toggle-collapse-down"),b=$(".version-history ol");a.click(function(){b.slideToggle("fast",function(){a.hasClass("open")?a.removeClass("open"):a.addClass("open")})})}return a}),define("abstractPage/TocBrowse",[],function(){function a(){var b=$(".book-navigation-button"),c=$(".book-navigation-selection"),d=$("div.toc > ol > li");a.modal=function(){var b=c.html(),d='<div class="mod lb"><div class="mod-hd"><strong>Filter by:</strong></div></div><div class="mod-bd">'+b+'</div><div class="mod lb"><div class="mod-hd"><a class="btn btn-close" href="#close" title="close">Close</a></div></div></div>';$.colorbox({html:d,trapFocus:!0,opacity:.75,overlayClose:!0,fixed:!0,scrolling:!1,left:"auto",top:"0",innerWidth:$(".functions-bar").width(),onOpen:function(){$("#cboxOverlay, #colorbox").css("z-index","9999"),window.returnFocusTo=document.activeElement},onComplete:function(){$(".btn-close").click(function(a){$.colorbox.close(),a.preventDefault()}),a.areaClickLink()},onClosed:function(){window.returnFocusTo.focus()}})},a.areaClickLink=function(){$(".book-navigation-grid > li").click(function(){window.location=$(this).children().attr("href")})},b&&(a.areaClickLink(),window.innerHeight<window.innerWidth&&c.children().addClass("landscape"),d.length>1&&d.children("h3").addClass("style-1"),b.click(function(){$(window).width()<600==!0?a.modal():b.hasClass("active")?(b.addClass("inactive").removeClass("active"),c.slideUp("fast").removeClass("active").addClass("inactive")):(b.addClass("active").removeClass("inactive"),c.slideDown("fast").addClass("active").removeClass("inactive"))}))}return a}),define("abstractPage/BookmetrixView",[],function(){function a(){function a(a){console.log(a);var b=$.map(a.items,function(a){var b=a.label.toLowerCase();return'<dt class="book-metric-item-name Meta_name '+b+'"><a data-analytics="'+a.label+'" href="'+a.link+'">'+a.label+'</a></dt><dd class="book-metric-item-value Meta_value '+b+'"><a data-analytics="'+a.label+'" href="'+a.link+'">'+a.count+"</a></dt>"}).join("");return'<dl class="Meta Meta--2colBordedBackground">'+b+"</dl>"}this.getDoi=function(){return $("#abstract-about-book-chapter-doi").text()},this.getContentType=function(){var a=$(".book-metrics");return a.length?a.attr("data-contenttype"):null},this.getBookmetricsApiUrl=function(){var a=$(".book-metrics");return a.length?a.attr("data-url"):null},this.initWith=function(b){$(".book-metrics-items").append(a(b)),$(".book-metrics-footer a").attr("href",b.bookMetrixPageUrl),$(".book-metrics").removeClass("hidden")},this.setGoogleAnalyticsEvent=function(a,b){$(".book-metric-item-name a, .book-metric-item-value a").on("click",function(){var c=$(this).attr("data-analytics");a.trackEvent(b,"Click",c)})}}return a}),define("abstractPage/BookmetrixController",[],function(){function a(a,b){function c(a){return 1e3>a?a.toString():1e6>a?Math.round(a/1e3)+"K":Math.round(a/1e6)+"M"}function d(b,d,e){var f="data_summary",g=a[f],h=a.links[e];return{label:d,count:c(g[b]),link:h}}var e=[d("citation_count","Citations","citations"),d("altmetric_mention_count","Mentions","mentions"),d("reader_count","Readers","readers"),d("review_count","Reviews","reviews"),d("download_count","Downloads","downloads")],f=$.grep(e,function(a){var c="Reviews"===a.label&&"chapter"===b;return a.count>"0"&&!c});return{bookMetrixPageUrl:a.links.home,items:f}}function b(b,c,d){var e=c.getDoi(),f=c.getContentType(),g=c.getBookmetricsApiUrl(),h=g+"/"+f+"s/"+encodeURIComponent(e);window.screen.width>=1024&&""!==e&&g&&d.getJSON(h).done(function(d){var e=a(d,f);e.items.length>0&&(c.initWith(e),c.setGoogleAnalyticsEvent(b,"Book metrics"))}).fail(function(){})}return b}),define("abstractPage/Copublisher",[],function(){function a(){var a=$("#copublisher-container");if(a.length){var b=a.attr("data-url");a.load(b,function(){var b=a.attr("on-sidebar");b&&$(".partner-logos").length>0&&a.addClass("SideBox_separator")})}}return a}),define("abstractPage/ArticleMetricsWebComponent",[],function(){function a(a){void 0!==window.HTMLImports&&window.HTMLImports.whenReady(function(){if(void 0!==window.ArticleMetrics){var b=new window.ArticleMetrics($("#doi-for-article-metrics").val()),c=document.getElementById("article-metrics-wrapper");c.appendChild(b),b.addEventListener("sl-article-metrics-citation-click",function(){a.trackEvent("Article metrics","click","cited by")}),b.addEventListener("sl-article-metrics-mention-click",function(){a.trackEvent("Article metrics","click","altmetric")})}})}return a}),define("abstractPage/UnsiloWebComponent",[],function(){function a(a,b){document.addEventListener("unsilo-web-event-loaded",function(){b.show(),b.open(),ga("unsiloTracker.send","pageview","article/abstract"),a.trackEvent("Related content","Loaded","Unsilo")}),document.addEventListener("unsilo-web-event",function(a){ga("unsiloTracker.send",a.detail.eventData.convertToGA())}),void 0!==window.HTMLImports&&window.HTMLImports.whenReady(function(){if(void 0!==window.UnsiloWeb){var a=new window.UnsiloWeb($("#doi-for-unsilo").val()),b=document.getElementById("unsilo-wrapper");b.appendChild(a)}})}return a}),define("abstractPage/ArticleCitationsController",[],function(){function a(){var a=$("#article-export-citation");a.click(function(){a.hasClass("isOpen")?a.removeClass("isOpen"):a.addClass("isOpen")}),a.blur(function(){setTimeout(function(){a.removeClass("isOpen")},100)}),$("#article-export-citation li a").mousedown(function(a){a.preventDefault();var b=$(a.target);window.location.href=b.attr("href")}),$("#article-export-citation li a").click(function(a){a.preventDefault()})}return a}),define("abstractPage/start",["./CookiePolicy","./DeepDyveController","./DeepDyve","./Expander","./ExpanderElement","./ExpanderController","./LookInside","./LookInsideController","./ActionBarView","./AbstractController","./JournalView","./AbstractView","./JournalController","./ContentCitations","./ContentCitationsController","./ActionBarController","./SocialLinksView","./SocialLinksController","depositInterruption/DepositInterruptionService","depositInterruption/DepositInterruptionView","analytics/WebTrekk","utils/Requests","analytics/GoogleAnalytics","utils/DocumentHelper","./SocialMentionView","./SocialMentionController","./BookSeriesOnlineFirstChaptersExpander","./FakeFeaturesController","./FakeFeaturesView","./LeafPpvOption","./FulltextToggleAction","./LiveReferenceWorkEntryVersionHistory","./TocBrowse","./BookmetrixView","./BookmetrixController","./Copublisher","./ArticleMetricsWebComponent","./UnsiloWebComponent","./ArticleCitationsController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){return{init:function(){var u=!!("ontouchstart"in window);"callPhantom"in window&&(u=!1);var N=new v;new b(new c,N);var O=new x,P=new f(new d,O);P.openFromHashParameter();var Q=new i,R=new h(new s(N),new g,Q);u!==!0&&R.init(),R.maybeAutoOpenLookInside();var S=new w;S.loadForAbstract(),new p(Q),new j(new l),new m(new w,new k),new r(new q,O),new o(new n,N,S),new z(S,new y,N),new I(S,new H,N),new A($("#bookseries-onlinechapters")),new B(S,new C).init(),new D,new E(new s(N),new t,S),new F,new G,new J,new a,new K(S),new L(S,new e($("#abstract-related"))),new M}}}),define("search/FacetSection",[],function(){function a(){}return a.prototype.onShowAll=function(a){$("a.colorbox-enabled,.facet-header .all").click(function(b){b.preventDefault(),a({url:$(this).attr("href")})})},a}),define("search/ExpandedFacetSection",[],function(){function a(){$(".facet .highlight").each(function(){var a=$(".facet-title",this).css("color");$(".facet-title",this).css("color","#FFF"),$(".facet-title",this).animate({color:a},1500,"easeOutCirc"),$("a",this).append('<span class="highlight-area">'),$(".highlight-area",this).animate({opacity:0},1500,"easeOutCirc")})}var b=function(a){var b=[];return $.each($(a).find('input[type="hidden"]'),function(a,c){b.push($(c).attr("name")+"="+$(c).val())}),b.push("page="+$(a).find('input[name="page"]').val()),b.join("&")};return a.prototype.onPagination=function(a){$("body").delegate("#cboxLoadedContent .next, #cboxLoadedContent .prev","click",function(b){b.preventDefault();var c=$(this).attr("href");a({url:c})}),$("body").delegate("#cboxLoadedContent form:not(#filtering-options)","submit",function(c){c.preventDefault();var d=b(this),e=$(this).attr("action")+"?"+d;a({url:e})})},a.prototype.show=function(a){$.colorbox({href:a+" .mod.lb",fixed:!0,opacity:.75,width:555,trapFocus:!0,initialHeight:"332px",initialWidth:"555px",scrolling:!1,onComplete:function(){$(".lb .btn-close").click(function(){$.colorbox.close()})},onOpen:function(){window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})},a.prototype.repopulate=function(a){$(a).find(".facet-expanded .functions-bar-top").replaceAll(".facet-expanded .functions-bar-top"),$(a).find(".facet-expanded ol").replaceAll("#cboxLoadedContent ol"),$(a).find(".facet-expanded .functions-bar-bottom").replaceAll(".facet-expanded .functions-bar-bottom"),$.colorbox.resize()},a}),define("search/FacetController",[],function(){function a(a,b){var c=this;return c.expandedFacetSection=a,c.requests=b,c.showExpandedSection=function(a){c.expandedFacetSection.show(a.url)},c.reloadSection=function(a){c.requests.get(a.url).done(function(a){c.expandedFacetSection.repopulate(a)})},c}return a}),define("search/SearchResults",[],function(){function a(){var a=this;this.getSortOrderUrl=function(){var a=$("#sort-results")[0];return a.options[a.selectedIndex].value},this.getNumberOfPages=function(){return parseInt($(".pagination .number-of-pages:eq(0)").text().replace(/[^0-9]/g,""),10)},this.getPreviouslySelectedPage=function(){return parseInt($(".pagination .previous-page").val(),10)},this.isInSingleYearMode=function(){return $('#date-facet-mode  option:[value="in"]').prop("selected")},this.getSelectedStartDate=function(){return $(".start-year").val()},this.getSelectedEndDate=function(){return $(".end-year").val()},this.getAvailableStartDate=function(){return $("#available-start-year").text()},this.getAvailableEndDate=function(){return $("#available-end-year").text()},this.getPreviousStartDate=function(){return $(".previous-start-year").val()},this.getPreviousEndDate=function(){return $(".previous-end-year").val()},this.getToggleShowAllUri=function(){return $("#results-only-access .results-only-access-toggle").attr("href")},this.setStartDateWithError=function(a){$(".start-year").addClass("error"),$(".start-year").val(a)},this.setEndDateWithError=function(a){$(".end-year").addClass("error"),$(".end-year").val(a)},this.setEndDate=function(a){$(".end-year").val(a)},this.clearDateRangeErrors=function(){$("#start-year-error").addClass("hidden"),$("#start-year-error-single-year").addClass("hidden"),$(".start-year").removeClass("error"),$("#end-year-error").addClass("hidden"),$(".end-year").removeClass("error")},this.hideEndYearField=function(){$(".date-between-sep").hide(),$(".date-between-end").hide()},this.showEndYearField=function(){$(".date-between-sep").show(),$(".date-between-end").show();var a=$(".previous-end-year").val();$(".end-year").val(a)},this.singleYearMode=function(){return $('#date-facet-mode  option[value="in"]').prop("selected")},this.setSingleYearMode=function(){$('#date-facet-mode  option[value="in"]').prop("selected",!0)},this.setMultiYearMode=function(){$('#date-facet-mode  option[value="between"]').prop("selected",!0)},this.setRemoveFaceLinkText=function(a){$("#date-facet-remove a").text(a)},this.setDateRangeStartError=function(b,c){a.isInSingleYearMode()?($("#start-year-error-single-year .invalid-range-year").text(b),$("#start-year-error-single-year").removeClass("hidden")):($("#start-year-error .invalid-range-year").text(b+" - "+c),$("#start-year-error").removeClass("hidden")),$(".start-year").addClass("error"),$(".publication-date-range .start-year").val($(".previous-start-year").val())},this.setDateRangeEndError=function(b,c){a.isInSingleYearMode()?($("#start-year-error-single-year .invalid-range-year").text(b),$("#start-year-error-single-year").removeClass("hidden"),$(".start-year").addClass("error")):($("#end-year-error .invalid-range-year").text(b+" - "+c),$("#end-year-error").removeClass("hidden")),$(".end-year").addClass("error"),$(".publication-date-range .end-year").val($(".previous-end-year").val())},this.displayPaginationError=function(a,b){$(".pagination-error").removeClass("hidden"),$(".pagination .invalid-page-number").text(a),$(".pagination .page-number").addClass("error"),$(".pagination .page-number").val(b)},this.enablePublicationDateFacet=function(){$("#date-facet-mode").removeAttr("disabled")},this.addFocusToSearchForm=function(){$(".big-search").addClass("has-focus")},this.removeFocusFromSearchForm=function(){$(".big-search").removeClass("has-focus")},this.onDateFacetModeChange=function(a){$("#date-facet-mode").change(a)},this.onSearchFieldFocus=function(a){$(".search-field .text").focus(a)},this.onSearchFieldBlur=function(a){$(".search-field .text").blur(a)},this.onIncludePreviewOnlyChange=function(a){$("#results-only-access-checkbox").change(a)},this.onPageNumberKeypress=function(a){$(document).on("keypress",".pagination .page-number",a)},this.onDateRangeKeypress=function(a){$("#date-facet-fields .start-year, #date-facet-fields .end-year").keypress(a)},this.onSortOrderChange=function(a){$("#sort-results").change(a)},this.onPublicationDateRangeSubmit=function(a){$(".publication-date-range").submit(a)},this.onPaginationFormSubmit=function(a){$(".pagination").submit(function(b){var c=$(b.currentTarget).find(".page-number").val();return a(parseInt(c,10))})},this.renderGraph=function(a){$.plot($("#pub-date-graph"),[a],{lines:{show:!0,color:"red",fill:!0,fillColor:"#c2c2c2",lineWidth:1},yaxis:{show:!1},xaxis:{mode:"time",color:"#555"},colors:["#a7a7a7"],grid:{color:"silver",borderColor:"silver",borderWidth:1},shadowSize:0})}}return a}),define("search/SearchController",[],function(){function a(a,b,c,d){var e=this,f=function(){b.redirectTo(a.getSortOrderUrl())},g=function(b){return 1>b||b>a.getNumberOfPages()?(a.displayPaginationError(b,a.getPreviouslySelectedPage()),!1):!0},h=function(){var b=a.getSelectedStartDate(),c=a.getSelectedEndDate();if(isNaN(b))return a.setDateRangeStartError(b,c),a.setStartDateWithError(a.getPreviousStartDate()),!1;if(isNaN(c))return a.setDateRangeEndError(b,c),a.setEndDateWithError(a.getPreviousEndDate()),!1;var d=parseInt(b,10),e=parseInt(c,10);return d>e?(a.setDateRangeStartError(b,c),a.setStartDateWithError(a.getPreviousStartDate()),a.setEndDateWithError(a.getPreviousEndDate()),!1):d<parseInt(a.getAvailableStartDate(),10)?(a.setDateRangeStartError(b,c),a.setStartDateWithError(a.getPreviousStartDate()),!1):e>parseInt(a.getAvailableEndDate(),10)?(a.setDateRangeEndError(b,c),a.setEndDateWithError(a.getPreviousEndDate()),!1):!0},i=function(){a.addFocusToSearchForm()},j=function(){a.removeFocusFromSearchForm()},k=function(){b.redirectTo(a.getToggleShowAllUri())};e.changeDateFacetMode=function(){a.clearDateRangeErrors(),a.singleYearMode()?a.hideEndYearField():a.showEndYearField()},a.onSortOrderChange(f),a.onPaginationFormSubmit(g),a.onPublicationDateRangeSubmit(h),a.onSearchFieldFocus(i),a.onSearchFieldBlur(j),a.onIncludePreviewOnlyChange(k),a.onDateFacetModeChange(e.changeDateFacetMode),a.onPageNumberKeypress(c.applyLimitKeystrokes),a.onDateRangeKeypress(c.applyLimitKeystrokes),d.onSubmit(function(){a.singleYearMode()&&a.setEndDate(a.getSelectedStartDate())}),e.setDateFacetMode=function(){-1!==b.queryString().indexOf("date-facet-mode=in")?(a.setSingleYearMode(),a.setRemoveFaceLinkText(a.getSelectedStartDate())):-1!==b.queryString().indexOf("date-facet-mode=between")&&(a.setMultiYearMode(),
a.setRemoveFaceLinkText(a.getSelectedStartDate()+" - "+a.getSelectedEndDate()))},e.enablePublicationDateFacet=function(){a.enablePublicationDateFacet()}}return a}),define("search/AutoSuggestController",[],function(){function a(a){a.onSelect(function(b){a.setValue(b),a.submitForm()}),a.onKeyUp(function(b){13===b.keyCode&&a.submitForm()}),a.onWindowResize(a.hideSuggestions)}return a}),define("search/SearchFieldView",[],function(){function a(a){var b=this;b.onSelect=function(a){$("#query").bind("autocompleteselect",function(b,c){a(c.item.label)})},b.onKeyUp=function(a){$("#query").keyup(a)},b.onWindowResize=function(a){$(window).resize(a)},b.setValue=function(a){$("#query").val(a)},b.submitForm=function(){$("#query").closest("form").trigger("submit")},b.hideSuggestions=function(){$(".ui-autocomplete").hide()};var c=function(a,b){var c=$.trim(a).split(" ").join("|"),d=new RegExp("("+c+")","gi");return b.replace(d,"<strong>$1</strong>")};$("#query").length>0&&void 0!==$.ui&&($.ui.autocomplete.prototype._renderItem=function(a,b){var d=c(this.term,b.label);return $("<li></li>").data("item.autocomplete",b).append("<a>"+d+"</a>").appendTo(a)},$("#query").autocomplete({source:a,appendTo:".search-field",minLength:2,open:function(){return $(this).autocomplete("widget").css({width:$(".search-field").innerWidth()-53,"z-index":"999999"}),!1}}))}return a}),define("search/SearchWithinView",[],function(){function a(){function a(a,b){$(".search-within").focus(a),$(".search-within").blur(b)}function b(a){$(a).val()===d&&$(a).val("")}function c(a){""===$(a).val()&&$(a).val(d)}var d=$(".search-within").val(),e={registerSearchWithinFocus:a,clear:b,description:c};return e}return a}),define("search/SearchWithinController",[],function(){function a(a){var b=function(b){a.clear(b.currentTarget)},c=function(b){a.description(b.currentTarget)};a.registerSearchWithinFocus(b,c)}return a}),define("utils/NumberField",[],function(){function a(){var a,b=this,c=function(){return a.which||a.charCode},d=function(){return c()<=31},e=function(){var a=c();return a>=48&&57>=a},f=function(){var b=/max-length-(\d)/,c=a.currentTarget.className.match(b),d=a.currentTarget.value.length;return c?parseInt(c[1],10)>d:!0},g=function(){var b=a.currentTarget;return b.selectionStart!==b.selectionEnd};b.applyLimitKeystrokes=function(b){return a=b,d()||e()&&(f()||g())}}return a}),define("utils/WindowLocation",[],function(){function a(){this.getSearch=function(){return window.location.search},this.getPath=function(){return window.location.pathname}}return a}),define("search/DatePublishedForm",[],function(){function a(){this.onSubmit=function(a){$(".publication-date-range").submit(a)}}return a}),define("search/start",["./FacetSection","./ExpandedFacetSection","./FacetController","./SearchResults","./SearchController","./AutoSuggestController","./SearchFieldView","./SearchWithinView","./SearchWithinController","utils/NumberField","utils/Requests","utils/DocumentHelper","utils/WindowLocation","./DatePublishedForm"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{init:function(){var m=!!("ontouchstart"in window);"callPhantom"in window&&(m=!1);var o=new a,p=new b,q=new c(p,new k);m!==!0&&(o.onShowAll(q.showExpandedSection),p.onPagination(q.reloadSection)),new f(new g("https://sl-auto-suggest.live.cf.public.springer.com")),new i(new h);var r=new e(new d,new l,new j,new n);r.setDateFacetMode(),r.enablePublicationDateFacet(),r.changeDateFacetMode()}}}),define("account/AccountDetails",[],function(){function a(a){var b={};this.init=function(){b.setupCancelButton(),b.setupFormSubmit(),$(".organisation-section ul li a.action").click(this.clickFunction)},this.clickFunction=function(a){var c=$(this).attr("data-bpid");a.preventDefault(),b.changeDetailsPressed(c)},b.changeDetailsPressed=function(a){var b=$("li.bpid-"+a).parents(".organisation-section"),c=$("li.bpid-"+a).find("a").attr("href");$(".form-container",b).length||b.append('<div class="form-container" style="display:none"></div>'),$("li.bpid-"+a).parent().slideUp(500,"easeInOutQuad",function(){b.find(".form-container").load(c+" form.add-organisation-details",function(){b.find(".form-container").slideDown(500,"easeInOutQuad")})})},b.setupCancelButton=function(){$(document).on("click",".association-cancel",function(a){a.preventDefault(),b.cancel($(this).attr("data-bpid"))})},b.cancel=function(a){$("form.bp-"+a).parent().slideUp(500,"easeInOutQuad",function(){$("li.bpid-"+a).parent().slideDown(500,"easeInOutQuad")})},b.setupFormSubmit=function(){$(document).on("submit","form.add-organisation-details",function(){return b.postForm($(this)),!1})},b.postForm=function(c){a.post("/account/save-associate-details",c.serialize()).done(function(){b.updateFields(c)}).fail(function(a){var b=a.responseText,d=$(b).find("#error p");if(d){var e=d.addClass("error-message").css("margin-top","7px");c.children(".form-section").append(e)}})},b.updateFields=function(a){var c=a.attr("data-bpid"),d=$("#department-"+c),e=$("#costcode-"+c),f=$(".bpid-"+c+" a.action");b.showHideUpdateLabels(a.find(".department"),d),b.showHideUpdateLabels(a.find(".cost-code"),e),d.text().length>0||e.text().length>0?f.text($("#details-label.hidden").text()):f.text($("#cost-label.hidden").text()),b.cancel(c)},b.showHideUpdateLabels=function(a,b){a.val().length>0?b.parent().removeClass("hidden"):b.parent().addClass("hidden"),b.text(a.val())}}return a}),define("webshop/GetAccessPopup",[],function(){function a(){var a=this,b=function(){var a=$(".requested-access");$(".btn-back").remove(),$(".btn-close").show().click(function(){return $.colorbox.close(),!1}),$("#web-shop-get-access").click(function(){var a=$("form#getaccess-webshop").addClass("lb-form");a.appendTo("body"),$.colorbox.close()});var b=$("#getaccess-request");b.click(function(){var c=$("#getaccess-from-admin");return $.post(c.prop("action"),c.serialize(),function(){b.hide(),a.fadeIn("slow"),$("#colorbox,#cboxWrapper,#cboxContent,#cboxLoadedContent").height("450px")}),!1})};return a.onWebShopGetAccessMouseDown=function(a){$("#cboxContent").delegate("#web-shop-get-access","mousedown",a)},a.onAggregateWebShopLinkMouseDown=function(a){$("#cboxContent").delegate("#aggregate-webshop-link","mousedown",a)},a.show=function(a){$.colorbox({href:a+" .get-access",opacity:.75,trapFocus:!0,fixed:!0,width:555,initialHeight:"332px",initialWidth:"555px",scrolling:!1,onComplete:b,onOpen:function(){window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})},a}return a}),define("account/start",["./AccountDetails","webshop/GetAccessPopup","utils/Requests"],function(a,b,c){return{init:function(){var b=new a(new c),d=$("html.ie6").length,e=$("html.ie7").length;0===d&&0===e&&b.init()}}}),define("admin/AdminDashboardView",[],function(){function a(){var a=this;a.onOrganizationSelectionChange=function(a){$("#change-institution").change(a)},a.onArchiveYearSelectionChange=function(a){$("#archive-year").change(a)},a.onForceLoginToggleClick=function(a){$(".enforced-toggle a.toggled-off").click(function(){return a(),!1})},a.onAutoAssociateToggleClick=function(a){$(".access-toggle a.toggled-off").click(function(){return a(),!1})},a.onDepositInterruptionToggleClick=function(a){$(".deposit-interruption-toggle a.toggled-off").click(function(){return a(),!1})},a.onRemoveLogoClick=function(a){$(".remove-logo").click(function(){return a(),!1})},a.onDownloadReportButtonClick=function(a){$("#download-report-button").click(a)},a.getOrganization=function(){return $("#change-institution option:selected").val()},a.getArchiveYear=function(){return $("#archive-year option:selected").val()},a.showForceLoginSettings=function(){$.colorbox({href:".mod-force-login",fixed:!0,inline:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#toggle-force-login-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#toggle-force-login-confirm").attr("href",$(".enforced-toggle a.toggled-off").attr("href"))}})},a.showAutoAssociateSettings=function(){$.colorbox({href:".mod-auto-associate",fixed:!0,inline:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#toggle-auto-associate-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#toggle-auto-associate-confirm").attr("href",$(".access-toggle a.toggled-off").attr("href"))}})},a.showDepositInterruptionSettings=function(){$.colorbox({href:".mod-deposit-interruption",fixed:!0,inline:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#toggle-deposit-interruption-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#toggle-deposit-interruption-confirm").attr("href",$(".deposit-interruption-toggle a.toggled-off").attr("href"))}})},a.showRemoveLogoPopup=function(){$.colorbox({href:".modlogo",inline:!0,fixed:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#deletelogo-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#deletelogo-confirm").click(function(){".remove-logo".parent().submit()})}})},a.hideErrorMessage=function(){$(".counter-reports .error-message").hide()}}return a}),define("admin/AdminDashboardController",[],function(){function a(a,b){var c=function(){b.reloadPageWithQuery("bp="+a.getOrganization())},d=function(){b.reloadPageWithQuery("bp="+a.getOrganization()+"&archive-year="+a.getArchiveYear()+"#reports-archive")};a.onOrganizationSelectionChange(c),a.onArchiveYearSelectionChange(d),a.onForceLoginToggleClick(a.showForceLoginSettings),a.onAutoAssociateToggleClick(a.showAutoAssociateSettings),a.onDepositInterruptionToggleClick(a.showDepositInterruptionSettings),a.onRemoveLogoClick(a.showRemoveLogoPopup),a.onDownloadReportButtonClick(a.hideErrorMessage)}return a}),define("admin/start",["./AdminDashboardView","./AdminDashboardController","utils/DocumentHelper"],function(a,b,c){return{init:function(){new b(new a,new c)}}}),define("webshop/WebshopTracker",[],function(){function a(a,b,c,d){var e=function(){d.isLoggedIn()?c.trackEvent("Webshop","Click through","Logged in"):c.trackEvent("Webshop","Click through","Not logged in")};a.onBuyButtonMouseDown(e),b.onWebShopGetAccessMouseDown(e),b.onAggregateWebShopLinkMouseDown(e)}return a}),define("webshop/AccessController",[],function(){function a(a,b,c){if($(".icon-unlock a").length>0&&window.location.search.indexOf("no-access=true")>-1){var d=$(".icon-unlock a").attr("href");a.show(d)}c.onGetAccessButtonClick(function(b){a.show(b)}),b.onGetAccessButtonClick(function(b){a.show(b)})}return a}),define("abstractPage/AbstractActions",[],function(){function a(){this.onBuyButtonMouseDown=function(a){$("#leaf-pricing-buy-now").mousedown(a)},this.onGetAccessButtonClick=function(a){$("#request-access-link").click(function(b){b.preventDefault(),a($(this).attr("href"))})}}return a}),define("account/LoginStatus",[],function(){function a(){this.isLoggedIn=function(){return $("#account-details").length>0}}return a}),define("webshop/start",["./WebshopTracker","./GetAccessPopup","./AccessController","abstractPage/AbstractActions","abstractPage/ActionBarView","account/LoginStatus","analytics/GoogleAnalytics"],function(a,b,c,d,e,f,g){return{init:function(){var h=$(window).width(),i=new b,j=new d;h>=600&&new c(i,j,new e),new a(j,i,new g,new f)}}}),define("analytics/TrackableLinkController",[],function(){function a(a,b,c){c.onMouseDown(function(c){var d=c.gaCategory;void 0===d&&(d=c.parentContentType),a.trackEvent(d,c.gaAction,c.gaLabel),void 0!==c.doi&&b.sendInfo(c.doi,c.contentType,c.gaLabel,c.gaAction,c.pageType)})}return a}),define("analytics/TrackableLink",[],function(){function a(){var a=function(a){return function(){var b=$(this),c=b.attr("viewType");void 0===c&&(c=b.attr("gaAction"));var d=b.attr("publication");void 0===d&&(d=b.attr("gaLabel")),a({doi:b.attr("doi"),parentContentType:b.attr("parentContentType"),contentType:b.attr("contentType"),pageType:b.attr("pageType"),gaCategory:b.attr("gaCategory"),gaLabel:d,gaAction:c})}};this.onMouseDown=function(b){$("body").delegate(".webtrekk-track","mousedown",a(b))}}return a}),define("analytics/start",["./TrackableLinkController","./GoogleAnalytics","./TrackableLink","./WebTrekk"],function(a,b,c,d){return{init:function(){var e;"undefined"!=typeof webtrekkProperties&&(e=new d(webtrekkProperties),e.init()),new a(new b,e,new c)}}}),define("utils/toolTips",[],function(){var a=function(){0===$(".tooltip-clone:hover").length&&$(".tooltip-clone").remove()},b=function(a,b,c){return a.clone().css({left:b,top:c}).addClass("tooltip-clone")},c=function(a,c){if(!$("body").hasClass("reader")&&$(this).hasClass("action")){var d=$(window).width();600>d?b(a,c.left+80,c.top+60).appendTo("body").show():b(a,c.left+12,c.top+40).appendTo("body").show()}else $("body").hasClass("reader")?b(a,c.left-8,c.top+15).appendTo(".reader-position").show():b(a,c.left+15,c.top+30).appendTo("body").show()};return{init:function(){$("body").delegate(".help","mouseover",function(){var a=$(".tooltip",this);c(a,$(this).offset())}),$("body").delegate(".help, .tooltip-clone","mouseleave",function(){setTimeout(function(){a()},100)})}}}),define("utils/BackButton",[],function(){function a(){$(".btn-back").click(function(){return history.back(),!1})}return a}),define("utils/Authors",[],function(){function a(a){var b=$(this).find(".AuthorNames_popup");if($(window).width()>=600){var c=a.pageX+20,d=255,e=$(window).width()-(c+d);b.attr("class","AuthorNames_popup"),b.find(".AuthorNames_details").attr("class","AuthorNames_details flyout-content flyout--arrowTopLeft"),20>e&&(b.css({right:d-20}),b.addClass("AuthorNames_popup--right"),b.find(".AuthorNames_details").addClass("flyout--arrowTopRight"))}$(window).width()<600&&(b.click(function(){$(this).css("display","none")}),$(document).click(function(){$(b).css("display","none")})),$(this).find(".AuthorNames_popup").css("display","block")}function b(){$(this).find(".AuthorNames_popup").css("display","none")}function c(){$(".AuthorNames_moreLink").click(function(a){return a.preventDefault(),$(this).closest(".AuthorNames").addClass("showAll")}),$(".AuthorNames_hideLink").click(function(a){return a.preventDefault(),$(this).closest(".AuthorNames").removeClass("showAll")}),$(".AuthorName_container").hoverIntent(d)}var d={interval:300,timeout:300,over:a,out:b};return c}),define("utils/ClearForm",[],function(){function a(){return $("body").delegate(".ClearForm","click",function(a){a.preventDefault(),$(".form-section input").val("").removeClass("valid, error"),$(".form-section label[generated]").remove()})}return a}),define("old/PageController",[],function(){function a(a){this.init=function(){a.focus(),a.truncateShowLabel()}}return a}),define("old/PageView",[],function(){function a(){this.focus=function(){var a=$(".focus").first();a.focus(),a.val(a.val())},this.truncateShowLabel=function(){0!==$(".show-label").size()&&$(".abstract-content").truncate({max_length:440,more:$(".show-label").html(),less:$(".hide-label").html()})}}return a}),define("old/PersonsController",[],function(){function a(a){var b={};return b.init=function(){a.addLinks(),a.firstShorten()},b}return a}),define("old/PersonsView",[],function(){function a(a){var b={},c=a+"s",d=10,e=$(".document-main ul."+c);return b.addLinks=function(){e.each(function(e,f){var g=$("li."+a,f).size(),h=$("li."+a+":gt("+(d-1)+")",f);if(d>=g)$(".show-all-hide-"+c,f).hide();else{$(".show-all-hide-"+c,f).css("display","inline"),$(".more-"+c,f).css("display","inline");var i=$(".show-all-hide-"+c+" .show-all-"+c,f),j="";h.each(function(){0!==j.length&&(j+=" "),j+=$.trim($(this).text())}),i.attr("title",j),i.click(function(){b.showAll(f)});var k=$(".show-all-hide-"+c+" .hide-"+c,f);k.click(function(){b.shorten(f)})}})},b.shorten=function(b){var e=$("li."+a,b).size(),f=$("li."+a+":gt("+(d-1)+")",b);d>e||(f.hide(),$(".show-all-"+c,b).show(),$(".more-"+c,b).show(),$(".hide-"+c,b).hide())},b.firstShorten=function(){var a=$(".document-main ul."+c);a.each(function(a,c){b.shorten(c)})},b.showAll=function(a){$("li:hidden",a).fadeIn("normal",function(){}),$(".show-all-"+c,a).hide(),$(".more-"+c,a).hide(),$(".hide-"+c,a).show()},b}return a}),define("old/HomeTabs",[],function(){function a(){function a(a){a.addClass("disabled").siblings(".tabMenu-tabLabel").removeClass("disabled"),$(a.prop("hash")).removeClass("hidden").siblings(".tabMenu-tabContent").addClass("hidden")}this.init=function(){$(".tabMenu").each(function(){var b=$(this),c=b.children(".tabMenu-tabLabel"),d=null,e="<a/>";c.each(function(){var b=$(this);b.replaceWith($(e).attr({href:"#"+b.text(),"data-tabset_name":b.data("tabset_name"),text:b.text(),"class":b.attr("class")}).text(b.text()).click(function(b){b.preventDefault(),$.cookie("tabSet",$(this).data("tabset_name")),a($(this)),$(this).focus()}))}),d=b.children(".tabMenu-tabLabel"),$(".multi-level").delegate("h3","click",function(){$(this).toggleClass("is-open").next().slideToggle("normal")});var f=$.cookie("tabSet")||"industries";a(d.filter('[data-tabset_name="'+f+'"]'))})}}return a}),define("old/BookPpvOption",[],function(){function a(){$("#display-book-ppv, .line-divider").hide();var a=".aggregate-pricing",b=$("#display-book-ppv a").attr("href");$("#display-book-ppv").load(b+" "+a,"",function(a,b){"success"===b&&a.indexOf("Error")<0&&$("#display-book-ppv, .line-divider").show()})}return a}),define("old/ExportCitation",[],function(){function a(){var a="slow",b=null;this.init=function(){b=this,$.colorbox&&$("#export-citation").colorbox({href:function(){return $(this).attr("href")+" .mod.lb"},opacity:.75,fixed:!0,scrolling:!1,height:444,width:555,onComplete:function(){$(".btn-close").click(function(){$.colorbox.close()}),b.addDropDown()}}),this.addDropDown()},this.addDropDown=function(){var b=$(".btn-dd");b.click(function(b){$(this).toggleClass("act").find(".menu").slideToggle(a),$(this).parents(".mod.lb").length&&b.stopPropagation()}),$(".mod.lb").parent().click(function(){b.removeClass("act").find(".menu").hide(a)})}}return a}),define("old/ActivateOrResetPasswordController",[],function(){function a(a){var b={};return b.init=function(){a.registerValidation()},b}return a}),define("old/ActivateOrResetPasswordView",[],function(){function a(){var a=$("#invalid-password-message").html(),b=$("#mismatch-password-message").html(),c={};return c.registerValidation=function(){$("#set-password-form").validate({groups:{anypassword:"password password-retype"},errorClass:"error-message",errorElement:"div",rules:{password:{required:!0,minlength:6,containsDigitAndLetter:!0},"password-retype":{minlength:6,containsDigitAndLetter:!0,equalTo:"#password"}},messages:{password:{required:a,minlength:a,containsDigitAndLetter:a},"password-retype":{minlength:a,containsDigitAndLetter:a,equalTo:b}}})},c}return a}),define("old/ForgottenPasswordController",[],function(){function a(){this.init=function(){$("#forgotForm").validate({errorClass:"error-message",errorElement:"div"})}}return a}),define("old/LoadingAnimationController",[],function(){function a(){var a={},b=$("body").attr("data-name")||"link";return a.init=function(){$("body").delegate(".facet-link","click",function(){$(this).addClass("loading").append('<img class="loading" src="../static/sites/'+b+'/images/loading.gif" alt="" />')}),$(".search-filter input.search-submit, #date-facet-submit").after('<img class="loading js-hidden" src="/static/sites/'+b+'/images/loading.gif" alt="" />'),$("#search, .bar-actions input.search-submit").after('<img class="loading js-hidden" src="/static/sites/'+b+'/images/loading_search.gif" alt="" />'),$("body").delegate("#date-facet-submit,.search-submit","click",function(){$(this).addClass("loading").next("img.loading").show()})},a}return a}),define("old/CoverImageAnimation",[],function(){function a(){var a={},b=$(".look-inside.cover-image-animate a"),c=b.find(".look-inside-cover"),d=b.find(".look-inside-page"),e=b.find(".look-inside-badge");return a.init=function(){var c={over:a.lIEnter,out:a.lILeave,timeout:500,interval:250};b.hoverIntent(c)},a.lIEnter=function(){c.animate({left:"-30px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).animate({left:"0",boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.3)"},400)}),d.animate({right:"-110px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).css({zIndex:"3"}).animate({right:"0",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},400)}),e.animate({right:"-110px"},300,function(){$(this).animate({right:"1px"},400)})},a.lILeave=function(){c.animate({left:"-30px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).animate({left:"0",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},400)}),d.animate({right:"-110px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).css({zIndex:"1"}).animate({right:"0",boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.3)"},400)}),e.animate({right:"-110px"},300,function(){$(this).animate({right:"1px"},400)})},a}return a}),define("old/Registration",[],function(){function a(){this.init=function(){if($("#registration-form").length&&($("#login-box .form-field input:first").focus(),$.validator.addMethod("check-email-required",$.validator.methods.required,all_messages.provideEmail_message),$.validator.addMethod("check-email-valid",$.validator.methods.email,all_messages.invalidEmail_message),$.validator.addMethod("check-email-remote",$.validator.methods.remote,all_messages.uniqueEmail_message),$.validator.addMethod("check-password-min",function(a,b){var c=this.optional(b)||a.length>=6&&/\d/.test(a)&&/[a-z]/i.test(a);return c},all_messages.password_invalid_message),$.validator.addMethod("check-password-required",$.validator.methods.required,all_messages.password_required_message),$.validator.addClassRules({required:{required:!0,minlength:1},"email-address":{"check-email-required":!0,"check-email-valid":!0},"email-address-test":{"check-email-remote":{url:"/email/available",beforeSend:function(){var a=$(".email-address-test").parents("form").outerWidth(),b=$(".email-address-test").position();$(".email-address-test").after('<img alt="" src="../core/src/main/webapp/static/images/loading.gif" class="loading">'),$(".email-address-test").siblings("img.loading").css({left:a-30,top:b.top+4})},complete:function(){$(".form-row img.loading").fadeOut("fast")}}},password:{"check-password-required":!0,"check-password-min":{}},"password-confirm":{required:!0,minlength:6,equalTo:"#password"}}),!$("html.ie6").length)){if($("html.js").length&&$("#registration-form").addClass("js-validation"),$("#registration-form").length){var a=$("input#password").position();$("input#password").after('<div id="password-strength" class="progress-bar is0" style="display:none"><span class="progress"></span></div>').passwordStrength(),$("#password-strength").css({right:10,top:a.top+12}).fadeIn()}var b={messages:{"first-name":all_messages.firstName_message,"last-name":all_messages.lastName_message,"password-confirm":{required:all_messages.password_confirm_message,minlength:all_messages.password_invalid_message,equalTo:all_messages.password_match_message},"email-address":{remote:all_messages.uniqueEmail_message}},success:function(a){a.addClass("tick");var b=a.siblings("input").position(),c=a.siblings("input").outerWidth();a.css({left:b.left+c+10,top:b.top+3})},showErrors:function(a,b){var c;for(c=0;b[c];c++){var d=this.errorList[c].element;this.errorsFor(d).remove()}this.defaultShowErrors()},errorPlacement:function(a,b){b.parents("form").outerWidth(),b.position();a.insertAfter(b);b.outerHeight(),a.outerHeight();b.siblings(".error").removeClass("tick")}};$("#registration-form").validate(b)}$(".edit-field").parents(".editing-form").length||$(".form-row-editable").click(function(){window.location.href=$("a",this).attr("href")})}}return a}),define("old/DisciplinesExpander",[],function(){function a(){this.init=function(){$.extend($.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),$(".show-nav").click(function(){return $(this).hide(),$(".collapse-nav").css("display","block"),$(".hide-nav").slideDown("slow").find("a:first").focus(),!1}),$(".collapse-nav").click(function(){return $(this).hide(),$(".hide-nav").hide(),$("html,body").animate({scrollTop:0},1400,"easeOutQuad",function(){}),$(".show-nav").css("display","block").focus(),!1})}}return a}),define("old/FlyOut",[],function(){function a(){function a(a){$("body").removeClass("show-footer-menu"),a.removeClass("is-open").find(".pillow-btn-active").removeClass("pillow-btn-active")}var b=!(!("ontouchstart"in window)||"callPhantom"in window),c=1e3,d=500,e={over:function(){},timeout:d,out:function(){$("input:focus",this).length<=0&&b!==!0&&(a($(this)),$(".flyout-caption",this).blur())}};this.init=function(){$(".flyout").each(function(){var b=$(this),d=null;b.click(function(a){$(this).hasClass("is-open")?$("form",this).length||$(this).removeClass("is-open"):$(this).addClass("is-open"),a.stopPropagation()}).hoverIntent(e),b.find("input,a,button").blur(function(){d=setTimeout(function(){a(b)},c)}).focus(function(){clearTimeout(d)})}),$(document).click(function(){b!==!0&&a($(".flyout"))})}}return a}),define("old/EntitlementsExpander",[],function(){function a(){this.init=function(){$(".entitlements").length>1&&($(".default-table caption").addClass("closed"),$(".default-table thead,.default-table tbody").hide()),$(".entitlements caption").click(function(){$(this).toggleClass("closed");var a=$(this).parent();return a.find("thead,tbody").toggle(),!1})}}return a}),define("old/KeyboardController",[],function(){function a(){var a=this;this.init=function(){a.registerKeyPressListeners()},this.registerKeyPressListeners=function(){$(document).keypress(function(a){var b=a.which,c=String.fromCharCode(b),d=/[A-Za-z0-9Ã„Ã¤Ã–Ã¶ÃœÃ¼ÃŸ\[;']/,e=a.ctrlKey,f=a.altKey,g=a.metaKey,h=$(".fc-form textarea"),i=$("#fc_chat_window textarea");!d.test(c)||$("input,select").is(":focus")||e||f||g||h||i.is(":focus")||$("#global-search input#query").focus().val("")}),$(document).keydown(function(a){27===a.which&&$("#global-search input#query").is(":focus")&&($("#global-search input#query").focus().val(""),$("#global-search input#query").blur())})}}return a}),define("old/CompanyLogos",[],function(){function a(){this.changeLogo=function(){var a=$("#logo-company"),b=a.find("img:visible"),c=b.next("img");0===c.length&&(c=a.find("img:first")),b.fadeOut(500,function(){c.fadeIn(500)})},this.init=function(){$("#logo-company img").length>1&&setInterval(this.changeLogo,6e3)}}return a}),define("old/AthensShibbolethLogin",[],function(){function a(){this.init=function(){($("select.chosen option").length>1||1===$("select.chosen option").length&&""!==$("select.chosen option:first").val())&&$("select.chosen").chosen({no_results_text:"No results matched"}),$(".athens-shibboleth-login-page .chosen-search input").attr("placeholder","Start typing to find your institution")}}return a}),define("old/MobileJS",[],function(){function a(){var a=$(window).width(),b=function(){var a=$("body");$(".pillow-btn").click(function(){$(this).toggleClass("pillow-btn-active")}),$(".open-search").click(function(){a.toggleClass("show-search")}),$(".open-menu").click(function(){a.toggleClass("show-menu")}),$(".open-search-options").click(function(){a.toggleClass("show-search-options")}),$(".open-legal").click(function(){a.toggleClass("show-legal")}),$("#footer-verticals .pillow-btn").click(function(){a.toggleClass("show-footer-menu")})},c=function(){600>a&&$(".expander").removeClass("expander-open")};this.init=function(){b(),c()}}return a}),define("old/LazyLoader",[],function(){function a(){var a=$(window).width(),b=!1;this.init=function(){a>=600&&$("img.lazy").show().lazyload(),$(window).resize(function(){a=$(window).width(),b===!1&&a>=600&&($("img.lazy").show().lazyload(),b=!0)})}}return a}),define("old/Grid",[],function(){function a(){var a=940;this.init=function(){function b(){a=$("#content").width(),$("#grid").css("max-width",a)}$.shift=function(a,b,c){$(document).keydown(function(d){return c||(c=[]),d.keyCode===a.charCodeAt(0)&&d.shiftKey?(b.apply(this,c),!1):void 0})};var c=function(){a=$("#content").width(),$(".gridToggle").removeClass("gridOff"),$("#content").append('<div id="grid"></div>');for(var b=$("#content").outerHeight(),c=0;47>c;c++)$("#grid").append('<div class="slice"></div>');$("#grid").css({height:b+165,maxWidth:a})};$(window).resize(function(){$("#grid").length&&(b(),clearTimeout(this.id),this.id=setTimeout(b,200))});var d;$.shift("6",function(){$("#grid, .gridToggle").remove(),c(),$(".layout-1").length&&($("#grid").addClass("layout1"),d="layout1"),$(".layout-2").length&&($("#grid").addClass("layout2"),d="layout2"),$(".layout-3").length&&($("#grid").addClass("layout3"),d="layout3"),$(".layout-3b").length&&($("#grid").addClass("layout3b"),d="layout3b"),$(".layout-4").length&&($("#grid").addClass("layout4"),d="layout4"),$(".layout-5").length&&($("#grid").addClass("layout5"),d="layout5"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("7",function(){d=3,$("#grid, .gridToggle").remove(),c(),$("#grid").addClass("grid3"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("8",function(){d=6,$("#grid, .gridToggle").remove(),c(),$("#grid").addClass("grid6"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("9",function(){d=12,$("#grid, .gridToggle").remove(),c(),$("#grid").addClass("grid12"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("0",function(){$("#grid, .gridToggle").remove()}),$("body").delegate(".gridToggle","click",function(){$(this).hasClass("gridOff")?(c(),3===d&&$("#grid").addClass("grid3"),6===d&&$("#grid").addClass("grid6"),12===d&&$("#grid").addClass("grid12"),"layout1"===d&&$("#grid").addClass("layout1"),"layout2"===d&&$("#grid").addClass("layout2"),"layout3"===d&&$("#grid").addClass("layout3"),"layout3b"===d&&$("#grid").addClass("layout3b"),"layout4"===d&&$("#grid").addClass("layout4"),"layout5"===d&&$("#grid").addClass("layout5")):($("#grid").remove(),$(".gridToggle").addClass("gridOff"))})}}return a}),define("old/start",["./PageController","./PageView","./PersonsController","./PersonsView","./HomeTabs","./BookPpvOption","./ExportCitation","./ActivateOrResetPasswordController","./ActivateOrResetPasswordView","./ForgottenPasswordController","./LoadingAnimationController","./CoverImageAnimation","./Registration","./DisciplinesExpander","./FlyOut","./EntitlementsExpander","./KeyboardController","./CompanyLogos","./AthensShibbolethLogin","./MobileJS","./LazyLoader","./Grid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return{init:function(){var w=new a(new b),x=new c(new d("author")),y=new c(new d("editor")),z=new e,A=new g,B=new h(new i),C=new j,D=new k,E=new l,F=new m,G=new n,H=new o,I=new p,J=new q,K=new r,L=new s,M=new t,N=new u;new f,new v,w.init(),x.init(),y.init(),A.init(),z.init(),B.init(),C.init(),D.init(),E.init(),F.init(),G.init(),H.init(),I.init(),J.init(),K.init(),L.init(),M.init(),N.init()}}}),define("utils/KeyboardNavigation",[],function(){return{init:function(){var a=9;$().ready(function(){var b=$(document.body),c=!1,d=$("#skip-navigation"),e=!1;b.click(function(){c&&(b.removeClass("kb_user"),c=!1,e=!0,setTimeout(function(){e=!1},200))}).keyup(function(d){c||(d.keyCode===a||e)&&(b.addClass("kb_user"),c=!0)}),d.find("a").focus(function(){d.addClass("focus"),this.selectedIndex=0,location.hash=""}).blur(function(){d.removeClass("focus")}).click(function(a){a.preventDefault(),$(this.hash).attr("tabindex",-1).focus()})})}}}),define("concurrentlogin/ConcurrentLoginFailedController",[],function(){function a(a){a.checkConcurrentLoginFailed()&&a.showPopup()}return a}),define("concurrentlogin/ConcurrentLoginFailedView",[],function(){function a(){var a=this;a.showPopup=function(){$.colorbox({html:'<div id="concurrent-login-popup" class="lb mod-hd concurrent-login"><div class="mod-hd"> <h3 role="heading" aria-level="2">Notice</h3> <a class="btn btn-back" href="/search?query=">Back</a> <a class="btn btn-close" href="#close" title="Close facet">Close</a> </div><div class="mod-bd"><h2>You have been logged out, and are now browsing with limited access rights </h2><h3>Why has this happened?</h3><p>Someone else appears to be using your account; use of your account details by more than one person at a time is not allowed. If this is happening without your knowledge, you should reset you password <a href="/forgot">here</a>.</div> </div>',
opacity:.75,width:555,height:230,trapFocus:!0,fixed:!0,initialHeight:"332px",initialWidth:"555px",scrolling:!1,onComplete:function(){$(".btn-close").click(function(a){$.colorbox.close(),a.preventDefault()})},onOpen:function(){window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})},a.checkConcurrentLoginFailed=function(){return $("#concurrentLoginFailed").length}}return a}),define("concurrentlogin/start",["./ConcurrentLoginFailedController","./ConcurrentLoginFailedView"],function(a,b){return{init:function(){var c=!!("ontouchstart"in window);if("callPhantom"in window&&(c=!1),c!==!0){var d=new b;new a(d)}}}}),require.config({baseUrl:"/static/js/app"}),require(["depositInterruption/start","abstractPage/start","search/start","account/start","admin/start","webshop/start","analytics/start","utils/toolTips","utils/BackButton","utils/Authors","utils/ClearForm","old/start","utils/KeyboardNavigation","concurrentlogin/start"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){g.init(),a.init(),b.init(),c.init(),d.init(),e.init(),f.init(),h.init(),new i,new j,new k,l.init(),m.init(),n.init()}),define("main",function(){});