!function(){"use strict";angular.module("templates.xpl.document",[]).run(["$anchorScroll",function($anchorScroll){$anchorScroll.yOffset=100}]),angular.module("xpl.document",["xpl","xpl.product","xpl.search","templates.xpl.document"]).config(["$httpProvider","$locationProvider",function($httpProvider,$locationProvider){$locationProvider.html5Mode(!0).hashPrefix("!"),$httpProvider.defaults.cache=!1,$httpProvider.defaults.headers.get||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.get["If-Modified-Since"]="0"}]),angular.module("xpl.document").filter("sanitize",["$sce",function($sce){return function(htmlCode){return $sce.trustAsHtml(htmlCode)}}])}(),function(){"use strict";function xplCmptDocument(){return{controller:DocumentComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-component.html",transclude:!0}}function DocumentComponent($log,$rootScope,$scope,$state,$window,documentConstants,documentService,userService,utilsService,tealiumService,$location){function initialize(){vm.section=$state.params.section,vm.currentPart=$state.params.part,vm.showFullText="document.figures"!==$state.current.name,documentService.getDocument($state.params.id).then(getDocumentSuccess)["catch"](catchPromiseFailure),documentService.getDocumentRelatedArticles($state.params.id).then(getDocumentRelatedArticlesSuccess)["catch"](catchPromiseFailure),$scope.$on("$stateChangeStart",function(event,toState,toParams,fromState,fromParams,options){vm.showFullText="document.figures"!==toState.name,fromState.name==toState.name&&fromParams.section!=toParams.section&&(event.preventDefault(),$state.go($state.current.name,{section:toParams.section},{notify:!1}),$rootScope.stateIsLoading=!1,$state.params.section=toParams.section,$scope.$broadcast(documentConstants.events.sectionChanged))}),tealiumCall()}function tealiumCall(){if(tealiumService.isTealiumEnabled());}function breadCrumbPubTitle(){var ptitle=vm.document.displayPublicationTitle;return void 0!==ptitle&&(ptitle=ptitle.length>30?ptitle.substring(0,29)+"...":ptitle),ptitle}function getKeywordsForMetaTag(){var keyWordString="";return vm.document.keywords&&(keyWordString=_.flattenDeep(_.map(vm.document.keywords,"kwd")).join(";")),keyWordString}function viewDocument(){return vm.snippet?($window.location="/document/"+vm.document.articleNumber+"/#full-text-section",!1):void utilsService.scrollTo("#full-text-section",80)}function viewMoreRelated(){utilsService.scrollTo("#fullTextRelatedArticles",120)}function showACMContent(link,title){if(link){var w=600,h=400,left=screen.width/2-w/2,top=screen.height/2-h/2;$window.open(link,title,"location=no,toolbar=no,directories=no,status=no, menubar=no,scrollbars=yes,resizable=yes,top="+top+"px,left="+left+"px,width="+w+"px,height="+h+"px")}}function getDocumentSuccess(data){userService.setUser(data.userInfo),vm.document=data,initCommenting(),vm.user=userService.getUser(),vm.document.isStandard?setStandardTitle():vm.displayDocTitle=vm.document.title,vm.authors=vm.document.authors,setBrowseLink(),setVisibleTabs(),"LICENSE"===vm.document.denialReason&&(vm.document.denialMessage=null),!vm.document.fullTextAccess&&!vm.document.isFreeDocument&&vm.document.userInfo&&(vm.document.userInfo.institute||vm.document.userInfo.member||vm.document.userInfo.individual||vm.document.userInfo.guest)&&"LICENSE"===vm.document.denialReason&&vm.document.isCustomDenial&&(vm.document.denialMessage="This document is outside of your subscription. For access, contact the IEEE Customer Center or purchase the document."),setHelpText(vm.document.isConference,vm.document.isStandard),vm.showAd=$window.noAdBlocker&&!vm.document.userInfo.institute&&!vm.document.userInfo.individual,vm.loading=!1}function getDocumentRelatedArticlesSuccess(data){vm.loadingRelated=!1,vm.relatedArticles=data.similar}function catchPromiseFailure(error){$log.error(error),vm.error=!0,vm.loading=!1}function setVisibleTabs(){var contentType=vm.document.contentType,tabList=[];documentConstants.tabs.forEach(function(value){value.hideForContent&&value.hideForContent.indexOf(contentType)!=-1||tabList.push(value)}),vm.tabs=tabList}function setBrowseLink(){var browseBreadcrumbs=[],contentType=documentConstants.contentTypeDisplay[vm.document.contentType];switch(contentType){case documentConstants.contentTypeDisplay.standards:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.standards,browseLink:"/browse/"+vm.document.contentType+"/collection/ieee"});break;case documentConstants.contentTypeDisplay.periodicals:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.periodicals,browseLink:"/browse/"+vm.document.contentType+"/title/",separator:" >"}),browseBreadcrumbs.push({display:vm.breadCrumbPubTitle(),browseLink:vm.document.pubLink,separator:" >"});var obj={display:"Volume: "+vm.document.volume,browseLink:vm.document.issueLink};vm.document.issue&&(obj.display+=" Issue: "+vm.document.issue),browseBreadcrumbs.push(obj);break;case documentConstants.contentTypeDisplay.preprints:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.periodicals,browseLink:"/browse/"+vm.document.contentType+"/title/",separator:" >"}),browseBreadcrumbs.push({display:vm.breadCrumbPubTitle(),browseLink:vm.document.pubLink,separator:" >"}),browseBreadcrumbs.push({display:"Volume: "+vm.document.volume+" Issue: "+vm.document.issue,browseLink:vm.document.issueLink});break;case documentConstants.contentTypeDisplay.conferences:browseBreadcrumbs.push({display:"Browse  "+documentConstants.contentTypeDisplay.conferences,browseLink:"/browse/"+vm.document.contentType+"/title/",separator:" >"}),browseBreadcrumbs.push({display:vm.breadCrumbPubTitle(),browseLink:vm.document.pubLink})}vm.browseBreadcrumbs=browseBreadcrumbs}function setStandardTitle(){vm.displayDocTitle=vm.document.standardTitle,vm.document.standardTitle&&vm.document.standardTitle.indexOf("- Redline")>-1&&(vm.titleContainsRedline=!0,vm.displayDocTitle=vm.displayDocTitle.replace("- Redline",""))}function initCommenting(){vm.document.allowComments&&(vm.disqusConfig={disqus_shortname:global.document.disqus.short_name,disqus_identifier:vm.document.articleId,disqus_url:global.document.disqus.client_url+"/document/"+vm.document.articleId,disqus_title:vm.document.title,disqus_remote_auth_s3:global.document.disqus.remote_auth_s3,disqus_api_key:global.document.disqus.public_api_key},global.document.disqus.sso_enabled&&(vm.disqusConfig.disqus_sso={name:"IEEE Account",button:"http://ieeexplore.ieee.org/assets/img/IEEE_Logo_Full.png",icon:"http://ieeexplore.ieee.org/favicon.ico",url:global.document.disqus.client_url+"/xpl/popupSignIn.jsp",logout:"/servlet/Login?logout=/Xplore/guesthome.jsp",width:"800px",height:"800px"}))}function setHelpText(isConference,isStandard){return isConference?vm.helpText="Get help using Conference documents":isStandard&&(vm.helpText="Get help using Standards documents"),!1}var vm=this;vm.error=!1,vm.loading=!0,vm.loadingRelated=!0,vm.document={},vm.relatedArticles=[],vm.tabs=[],vm.user={},vm.disqusConfig={},vm.section="",vm.showFullText=!0,vm.showAd=!1,vm.titleContainsRedline=!1,vm.hideCart=!0,global.document.snippet&&(vm.snippet=global.document.snippet),vm.$state=$state,vm.queryText=$state.params.q,vm.context=$state.params.ctx,vm.purchaseNow="undefined"!=typeof $state.params.purchaseNow&&"false"!==$state.params.purchaseNow,vm.breadCrumbPubTitle=breadCrumbPubTitle,vm.keywordString=getKeywordsForMetaTag,vm.viewDocument=viewDocument,vm.viewMoreRelated=viewMoreRelated,vm.showACMContent=showACMContent,vm.displayDocTitle="",vm.helpText="Help Working with Interactive HTML",initialize()}angular.module("xpl.document").directive("xplCmptDocument",xplCmptDocument),DocumentComponent.$inject=["$log","$rootScope","$scope","$state","$window","documentConstants","documentService","userService","utilsService","tealiumService","$location"]}(),function(){"use strict";var contentTypes={standards:"standards",periodicals:"periodicals",conferences:"conferences",preprints:"preprints"};angular.module("xpl.document").constant("documentConstants",{tabs:[{state:".abstract({ctx:null})",title:"Abstract",sectionName:"abstract",tabStateName:"abstract"},{state:'.full({tab:"authors", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Authors",hideForContent:contentTypes.standards,sectionName:"authors",tabStateName:"authors"},{state:'.full({tab:"figures", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Figures",hideForContent:"",sectionName:"figures",tabStateName:"figures"},{state:'.full({tab:"references", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"References",hideForContent:"",sectionName:"references",tabStateName:"references"},{state:'.full({tab:"citations", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Citations",sectionName:"citedby",tabStateName:"citations"},{state:'.full({tab:"keywords", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Keywords",sectionName:"keywords",tabStateName:"keywords"},{state:'.full({tab:"definitions", q:null, ctx:"definitions", section:null, part:null, anchor:null, tabfilter:null})',title:"Definitions",hideForContent:[contentTypes.periodicals,contentTypes.conferences,contentTypes.preprints],sectionName:"definitions",tabStateName:"definitions"},{state:'.full({tab:"metrics", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Metrics",sectionName:"metrics",tabStateName:"metrics"},{state:'.full({tab:"versions", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Versions",hideForContent:[contentTypes.periodicals,contentTypes.conferences],sectionName:"versions",tabStateName:"versions"},{state:'.full({tab:"media", q:null, ctx:null, section:null, part:null, anchor:null, tabfilter:null})',title:"Media",sectionName:"multimedia",tabStateName:"media"}],events:{sectionChanged:"document.event.sectionChanged",resetFullTextHeaderScroll:"document.event.ft.header.resetScroll",resetFullTextRightRailScroll:"document.event.ft.rightrail.resetScroll"},contentTypes:{standards:contentTypes.standards,periodicals:contentTypes.periodicals,conferences:contentTypes.conferences,preprints:contentTypes.preprints},contentTypeDisplay:{standards:"Standards",periodicals:"Journals & Magazines",conferences:"Conferences",preprints:"Early Access"},stdnotice:"This document has been converted into XML for display in HTML. The​ ​IEEE does not take responsibility, nor does it provide any warranty​ ​whatsoever neither expressed nor implied, for any conflicts which may​ ​occur due to conversion errors that are inherent to the conversion​ ​process. In all cases, the IEEE PDF version, published in English,​ ​shall serve as the official document. "})}(),function(){"use strict";function documentRoutes($stateProvider,$urlRouterProvider){function documentRoute(){return{"abstract":!0,template:"<xpl-cmpt-document/>",url:"/{id:[0-9]*}?:q&:part&:ctx&:purchaseNow"}}function documentAbstractFullTextRoute(){return{url:"/?:section",template:function($stateParams){return'<xpl-cmpt-document-abstract id="'+$stateParams.id+'" class="pure-u-1-1" />'}}}function documentFullTextRoute(){return{url:"/:tab?:section&:anchor&:tabFilter",template:function($stateParams){return"<xpl-cmpt-product-"+$stateParams.tab+' id="'+$stateParams.id+'" detail="'+$stateParams.tab+'" class="pure-u-1-1 u-p-1" />'}}}function documentAllFiguresRoute(){return{url:"/all-figures",template:function($stateParams){return'<xpl-cmpt-document-all-figures id="'+$stateParams.id+'"></xpl-cmpt-document-all-figures>'}}}$urlRouterProvider.when("/{id:[0-9]*}","/{id:[0-9]*}/"),$stateProvider.state("document",documentRoute()).state("document.abstract",documentAbstractFullTextRoute()).state("document.figures",documentAllFiguresRoute()).state("document.full",documentFullTextRoute())}angular.module("xpl.document").config(documentRoutes),documentRoutes.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function documentService($http,$log,$q,api){function addCitationAlert(id){return $http.get(api.document.addCitationAlert.replace("{0}",id)).then(addCitationAlertSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocument(id){var self=this,deferred=$q.defer();return Object.keys(self._document).length||(global=global||{},global.document=global.document||{},this._document=global.document.metadata,this._document.fullTextAccess=global.document.fullTextAccess,this._document.denialReason=global.document.denialReason,this._document.denialMessage=global.document.denialMessage,this._document.canAddToFileCabinet=this._document.userInfo.fileCabinetUser&&("SLOT_NOT_PICKED"===global.document.denialReason||"SLOTS_EXHAUSTED"===global.document.denialReason)),deferred.resolve(self._document),deferred.promise}function getDocumentAbstract(id){var self=this;return self.getDocument(id)}function getDocumentAuthors(id){return $http.get(api.document.authors.replace("{0}",id),{cache:!0}).then(getDocumentAuthorsSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentFullTextToc(id){return $http.get(api.document.toc.replace("{0}",id),{cache:!0}).then(getDocumentFullTextTocSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSectionList(id,part){var url=api.document.sectionList.replace("{0}",id).replace("{1}",part);return global.document.firstTime&&(url+="?logAccess=true",global.document.firstTime=!1),$http.get(url,{cache:!0}).then(getDocumentSectionListSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSectionListHighlighted(id,part,highlightTerm){return $http.get(api.document.sectionList.replace("{0}",id).replace("{1}",part)+"/"+highlightTerm,{cache:!0}).then(getDocumentSectionListSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSnippet(id){var url=api.document.snippet.replace("{0}",id);return $http.get(url,{cache:!0}).then(getDocumentSnippetSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentEvolution(id){return $http.get(api.document.evolution.replace("{0}",id),{cache:!0}).then(getDocumentEvolutionSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentFigures(id){return $http.get(api.document.figures.replace("{0}",id),{cache:!0}).then(getDocumentFiguresSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentSectionText(id){return $http.get(api.document.sectionText).then(getDocumentSectionTextSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentInfo(id){return $http.get(api.document.info.replace("{0}",id),{cache:!0}).then(getDocumentInfoSuccess)["catch"](function(error){return promiseFailure(error,id)})}function getDocumentRelatedArticles(id){return $http.get(api.document.relatedArticles.replace("{0}",id),{cache:!0}).then(getDocumentRelatedArticlesSuccess)["catch"](function(error){return promiseFailure(error,id)})}function searchInFullText(id,txt){return $http.post(api.document.searchInDocument.replace("{0}",id),txt,{cache:!0}).then(searchInFullTextSuccess)["catch"](function(error){return promiseFailure(error,id)})}function updateChargeBackInfo(id,chgbkUser){var queryString="";return chgbkUser.name&&(queryString=queryString+"?name="+chgbkUser.name),chgbkUser.email&&(queryString=queryString+"&chargeback_email="+chgbkUser.email),chgbkUser.code&&(queryString=queryString+"&chargeback_code="+chgbkUser.code),$http.post(api.document.updateChgbkInfo.replace("{0}",id)+queryString,{cache:!0}).then(updateChargeBackInfoSuccess)["catch"](function(error){return promiseFailure(error,id)})}function addCitationAlertSuccess(response){return!0}function getDocumentAuthorsSuccess(response){return response.data}function getDocumentFullTextTocSuccess(response){return response.data}function getDocumentSectionListSuccess(response){return response.data}function getDocumentSnippetSuccess(response){return response.data}function getDocumentEvolutionSuccess(response){return response.data.versions}function getDocumentFiguresSuccess(response){return response.data}function getDocumentSectionTextSuccess(response){var randomNum=Math.floor(5*Math.random());return randomNum=randomNum>response.data.length?response.data.length:randomNum,response.data[randomNum]}function getDocumentInfoSuccess(response){return response.data}function getDocumentRelatedArticlesSuccess(response){return response.data}function searchInFullTextSuccess(response){return response.data}function updateChargeBackInfoSuccess(response){return response.data}function promiseFailure(error,id){return"401"==error.status?($log.error("Error: ",error.statusText?error.statusText:error),error):($log.error("Error",error),error)}var documentService={_document:{},addCitationAlert:addCitationAlert,getDocument:getDocument,getDocumentAbstract:getDocumentAbstract,getDocumentAuthors:getDocumentAuthors,getDocumentFullTextToc:getDocumentFullTextToc,getDocumentSectionList:getDocumentSectionList,getDocumentSectionListHighlighted:getDocumentSectionListHighlighted,getDocumentSnippet:getDocumentSnippet,getDocumentEvolution:getDocumentEvolution,getDocumentFigures:getDocumentFigures,getDocumentSectionText:getDocumentSectionText,getDocumentInfo:getDocumentInfo,getDocumentRelatedArticles:getDocumentRelatedArticles,searchInFullText:searchInFullText,updateChargeBackInfo:updateChargeBackInfo};return documentService}angular.module("xpl.document").factory("documentService",documentService),documentService.$inject=["$http","$log","$q","api"]}(),function(){"use strict";function xplCmptDocumentAbstract(){return{bindToController:{id:"@"},controller:DocumentAbstractComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-abstract-component.html"}}function DocumentAbstractComponent($filter,$rootScope,$scope,$state,$log,documentConstants,documentService,utilService,utilsService){function initialize(){documentService.getDocumentAbstract(vm.id).then(getDocumentAbstractSuccess)["catch"](catchPromiseFailure)}function toggleFullCaption(){vm.graphicalAbstractControls.viewFullCaption=!vm.graphicalAbstractControls.viewFullCaption,vm.graphicalAbstractControls.caption=$filter("charlimitHtml")(vm.details.graphicalAbstract.summary,vm.graphicalAbstractControls.maxCaptionLength,vm.graphicalAbstractControls.viewFullCaption,maxLimitExceededCallback)}function toggleAllISBN(){vm.toggleControls.isbn.viewAll=!vm.toggleControls.isbn.viewAll}function toggleAllISSN(){vm.toggleControls.issn.viewAll=!vm.toggleControls.issn.viewAll}function getDocumentAbstractSuccess(data){vm.details=data,$state.params&&$state.params.section&&"abstract"==$state.params.section&&utilsService.scrollTo("document-tabs",50,function(){$rootScope.$broadcast(documentConstants.events.resetFullTextHeaderScroll),$rootScope.$broadcast(documentConstants.events.resetFullTextRightRailScroll)}),void 0!==vm.details.graphicalAbstract&&(vm.jwpOptions={file:vm.details.graphicalAbstract.file,image:vm.details.graphicalAbstract.coverImage,flashplayer:"/assets/vendor/jwplayer/player.swf",caption:vm.details.graphicalAbstract.summary,type:vm.details.graphicalAbstract.type,autoplay:!1,height:300,width:405},vm.graphicalAbstractControls.caption=$filter("charlimitHtml")(vm.details.graphicalAbstract.summary,vm.graphicalAbstractControls.maxCaptionLength,!1,maxLimitExceededCallback)),Array.isArray(vm.details.isbn)&&1===vm.details.isbn.length&&(vm.toggleControls.isbn.viewAll=!0,vm.toggleControls.isbn.showToggle=!1),Array.isArray(vm.details.issn)&&1===vm.details.issn.length&&(vm.toggleControls.issn.viewAll=!0,vm.toggleControls.issn.showToggle=!1)}function catchPromiseFailure(error){$log.error(error)}function maxLimitExceededCallback(isExceeded){vm.graphicalAbstractControls.maxLimitExceeded=isExceeded}var vm=this;vm.details={},vm.jwpOptions={},vm.graphicalAbstractControls={viewFullCaption:!1,toggleFullCaption:toggleFullCaption,caption:null,maxLimitExceeded:!1,maxCaptionLength:170},vm.toggleControls={isbn:{viewAll:!1,toggleViewAll:toggleAllISBN,showToggle:!0},issn:{viewAll:!1,toggleViewAll:toggleAllISSN,showToggle:!0}},initialize()}angular.module("xpl.document").directive("xplCmptDocumentAbstract",xplCmptDocumentAbstract),DocumentAbstractComponent.$inject=["$filter","$rootScope","$scope","$state","$log","documentConstants","documentService","utilService","utilsService"]}(),function(){"use strict";function xplCmptDocumentAllFigures(){return{bindToController:{id:"@"},controller:DocumentAllFiguresComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-all-figures-component.html"}}function DocumentAllFiguresComponent($location,$anchorScroll,$log,$window,documentService){function initialize(){documentService.getDocument(vm.id).then(getDocumentSuccess)["catch"](catchPromiseFailure)}function getDocumentSuccess(data){vm.document=data,vm.document.fullTextAccess||vm.document.isFreeDocument?documentService.getDocumentFigures(vm.id).then(getDocumentFiguresSuccess)["catch"](catchPromiseFailure):$window.location.href=$window.location.href.replace("all-figures","")}function getDocumentFiguresSuccess(data){updateFigures(data),vm.figures=data.figures,vm.title=data.title,vm.standardNumber=data.standardNumber}function catchPromiseFailure(error){$log.error(error)}function updateFigures(data){for(var figures=data.figures,i=0;i<figures.length;i++){var figure=figures[i];figure.graphic.glance=data.mediaPath+"/"+figure.graphic.glance,figure.graphic.large=data.mediaPath+"/"+figure.graphic.large,figure.graphic.hires=data.mediaPath+"/"+figure.graphic.hires,figure.graphic.small=data.mediaPath+"/"+figure.graphic.small}}var vm=this,$jumpLink=$("#jump-link");vm.document={},vm.figures={},vm.scrollTo=function(id){$location.hash(id),$anchorScroll(),$jumpLink.qtip().hide()},$jumpLink.qtip({content:{text:$jumpLink.next("div")},hide:{event:"unfocus"},position:{my:"top center",at:"bottom center"},show:{event:"click",solo:!0},style:{classes:"qtip-popover all-figures-jump-toc document-toc"}}),initialize()}angular.module("xpl.document").directive("xplCmptDocumentAllFigures",xplCmptDocumentAllFigures),DocumentAllFiguresComponent.$inject=["$location","$anchorScroll","$log","$window","documentService"]}(),function(){"use strict";function xplCmptDocumentButtons(documentConstants){return{bindToController:{},controller:DocumentButtons,controllerAs:"vm",replace:!0,restrict:"E",templateUrl:"document/document-buttons.html",link:function($scope){$scope.scrollResetEventName=documentConstants.events.resetScroll}}}function DocumentButtons($log,$scope,$state,documentService,utilsService){function initialize(){function updateTabStateParam(newStateParams,oldStateParams){newStateParams.tab!=oldStateParams.tab&&(newStateParams.tab?vm.currentTab=newStateParams.tab:vm.currentTab=void 0)}vm.currentTab=$state.params.tab,vm.queryText=$state.params.q,vm.part=$state.params.part,$scope.$watchCollection(function(){return $state.params},updateTabStateParam)}function scrollTo(id){utilsService.scrollTo(id,50)}function loadFullText(){$state.includes("document.abstract")?$state.go("document.abstract",{q:null,ctx:null,part:1}):$state.go("document.full",{q:null,ctx:null,part:1,section:null,tab:vm.currentTab,anchor:null,tabfilter:null})}function loadOtherContext(context){$state.includes("document.abstract")?$state.go("document.abstract",{q:null,ctx:context,part:null}):$state.go("document.full",{q:null,ctx:context,part:null,section:null,tab:vm.currentTab,anchor:null,tabfilter:null})}var vm=this;vm.$state=$state,vm.fullText=$scope.ft,vm.scrollTo=scrollTo,vm.loadFullText=loadFullText,vm.loadOtherContext=loadOtherContext,initialize()}angular.module("xpl.document").directive("xplCmptDocumentButtons",xplCmptDocumentButtons),xplCmptDocumentButtons.$inject=["documentConstants"],DocumentButtons.$inject=["$log","$scope","$state","documentService","utilsService"]}(),function(){"use strict";function xplCmptDocumentFullText(){return{bindToController:{id:"@",rightsLink:"@",article:"=",relatedArticles:"=",queryText:"@",currentPartSec:"@",context:"@",viewAtAcm:"&"},controller:DocumentFullTextComponent,controllerAs:"ft",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-full-text-component.html"}}function DocumentFullTextComponent($window,$log,$state,$location,$scope,$timeout,documentService,productService,utilService,utilsService,tealiumService,api,documentConstants,$sce,$compile,$anchorScroll){function initialize(){ft.currentPartSec=decodeURIComponent(ft.currentPartSec);var partSecPair=ft.currentPartSec.split("|");(partSecPair.length=2)&&(ft.currentPart=partSecPair[0],ft.section=partSecPair[1]),ft.currentPart<=1&&(ft.currentPart=1,ft.showPrevious=!1),documentService.getDocumentFullTextToc(ft.article.articleNumber).then(getDocumentFullTextTocSuccess)["catch"](catchPromiseFailure),loadMainSection(),tealiumCall(ft)}function loadMainSection(){if($state.params.part&&ft.queryText)getFullText(ft.article.articleNumber,ft.currentPart,ft.queryText);else if(ft.queryText)documentService.searchInFullText(ft.article.articleNumber,ft.queryText).then(getDocumentSearchReferencesSuccess)["catch"](catchPromiseFailure);else if(ft.context){if(!("definitions"!==ft.context||ft.article.fullTextAccess||ft.article.isFreeDocument||ft.article.userInfo.institute||ft.article.userInfo.member||ft.article.userInfo.individual))return documentService.getDocumentSnippet(ft.article.articleNumber).then(getDocumentSectionListSuccess).then(function(){ft.showSnippet=!0})["catch"](catchPromiseFailure),!1;var reqParams;"citations"===ft.context&&(reqParams={count:30}),productService.getProductDetail(ft.article.articleNumber,ft.context,reqParams).then(getDocumentContextDataSuccess)["catch"](catchPromiseFailure)}else ft.article.isDynamicHtml?ft.snippet||!global.document.userLoggedIn&&!ft.article.isFreeDocument||ft.article.chargeBackInfo&&(!ft.article.chargeBackInfo||ft.article.chargeBackInfo.showChgbkModal)?documentService.getDocumentSnippet(ft.article.articleNumber).then(getDocumentSectionListSuccess).then(function(){ft.showSnippet=!0})["catch"](catchPromiseFailure):((ft.article.fullTextAccess||ft.article.isFreeDocument)&&void 0===global.document.firstTime&&(global.document.firstTime=!0),ft.article.fullTextAccess||ft.article.isFreeDocument?productService.getProductDetail(ft.article.articleNumber,"references").then(getReferencesSuccess)["catch"](catchPromiseFailure).then(function(){getFullText(ft.article.articleNumber,ft.currentPart)}):getFullText(ft.article.articleNumber,ft.currentPart)):ft.loading.main=!1}function tealiumCall(ft){if(tealiumService.isTealiumEnabled()){var tealiumUtagData={sheet_name:"Dynamic html doc detail",sheet_type:"dynamic html",document_isAbstract:ft.isAbstract(),document_isDHTML:ft.isDHTML(),document_isHTML:!1,document_id:ft.article.articleNumber,document_pub_id:ft.article.publicationNumber,content_type:ft.article.contentType};tealiumService.view(tealiumUtagData)}}function isDHTML(){return!(!ft.article.isDynamicHtml||ft.showSnippet)}function isAbstract(){return!(isDHTML()&&(!ft.article.fullTextAccess&&!ft.isFreeDocument||!ft.article.isACM||ft.contextData))}function scrollTo(id,margin){margin=margin||80,utilsService.scrollTo(id,margin)}function getFullText(articleNumber,part,queryText){return queryText?documentService.getDocumentSectionListHighlighted(articleNumber,part,queryText).then(getDocumentSectionListSuccess)["catch"](catchPromiseFailure):documentService.getDocumentSectionList(articleNumber,part).then(getDocumentSectionListSuccess)["catch"](catchPromiseFailure)}function getDocumentSectionListSuccess(data){data.status&&("401"==data.status&&(ft.showSnippet=!0),data=data.data),ft.sectionText=data,ft.loading.main=!1,$state.params.anchor?scrollTo($state.params.anchor,150):ft.section?$location.hash(ft.section):$state.params.part&&scrollTo("full-text-section")}function getDocumentSearchReferencesSuccess(data){ft.loading.main=!1,ft.searchReferences=data,$state.params.anchor?scrollTo($state.params.anchor,150):scrollTo("full-text-section")}function getDocumentContextDataSuccess(data){if(ft.loading.main=!1,ft.contextData=data,ft.contextData.authors)for(var i=0,l=ft.contextData.authors.length;i<l;i++){var authorName=ft.contextData.authors[i].name;ft.contextData.authors[i].hashedName=authorName?utilService.string2Hash(ft.contextData.authors[i].name):null}$state.params.anchor?scrollTo($state.params.anchor,120):scrollTo("full-text-section")}function getDocumentFullTextTocSuccess(data){ft.loading.toc=!1,ft.toc=data,ft.partsCount=data.standardParts,ft.currentPart<=1&&(ft.currentPart=1),ft.showNext=parseInt(ft.currentPart)<parseInt(ft.partsCount)}function getReferencesSuccess(data){ft.referenceData=data}function catchPromiseFailure(error){for(var k in ft.loading)ft.loading.hasOwnProperty(k)&&(ft.loading[k]=!1);$log.error(error)}function nextClick(){ft.currentPart<=1&&(ft.currentPart=1,ft.showPrevious=!1),ft.currentPart=parseInt(ft.currentPart)+1,updateSection()}function previousClick(){ft.currentPart<=1&&(ft.currentPart=1,ft.showPrevious=!1),ft.currentPart=parseInt(ft.currentPart)-1,updateSection()}function updateSection(){$state.go($state.current.name,{part:ft.currentPart,q:null,ctx:null,section:null,anchor:null})}function openRightsLink(){$window.open(ft.article.rightsLink,"Rightslink","location=no,toolbar=no,directories=no,status=no, menubar=no,scrollbars=yes,resizable=yes,width=650,height=550")}function printWindow(){$window.print()}var ft=this;ft.showSnippet=!1,ft.sectionList=[],ft.showPrevious=!0,ft.showNext=!0,ft.previousClick=previousClick,ft.nextClick=nextClick,ft.pdfUrl=api.pdfUrl+ft.article.articleNumber,ft.openRightsLink=openRightsLink,ft.printWindow=printWindow,ft.dwnldRefUrl=api.dwnldRefUrl+ft.article.articleNumber,ft.scrollTo=scrollTo,ft.isDHTML=isDHTML,ft.isAbstract=isAbstract,ft.snippet=!1,global.document.snippet&&(ft.snippet=global.document.snippet),ft.section=null,ft.currentPart=1,ft.notice=documentConstants.stdnotice,ft.loading={main:!0,toc:!0},ft.scrollResetEventName=documentConstants.events.resetFullTextHeaderScroll,ft.loadMainSection=loadMainSection,initialize()}angular.module("xpl.document").directive("xplCmptDocumentFullText",xplCmptDocumentFullText),DocumentFullTextComponent.$inject=["$window","$log","$state","$location","$scope","$timeout","documentService","productService","utilService","utilsService","tealiumService","api","documentConstants","$sce","$compile","$anchorScroll"]}(),function(){"use strict";function xplCmptDocumentFullTextEvolution(){return{bindToController:{evolutionList:"="},controller:DocumentEvolutionComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-full-text-evolution-component.html"}}function DocumentEvolutionComponent($log,documentService){function initialize(){produceEvolutionLists()}function produceEvolutionLists(){if(vm.history=[],vm.evolutionListActive=[],vm.evolutionListInactive=[],vm.evolutionList)for(var i=0;i<vm.evolutionList.length;i++){var item=vm.evolutionList[i],active="ACTIVE"===item.status.toUpperCase();active?vm.evolutionListActive.push(item):vm.evolutionListInactive.push(item),vm.history.push({active:active,on:1===vm[active?"evolutionListActive":"evolutionListInactive"].length,status:item.evolutionStatus,date:item.date})}}var vm=this;vm.history=[],vm.evolutionListActive=[],vm.evolutionListInactive=[],initialize()}angular.module("xpl.document").directive("xplCmptDocumentFullTextEvolution",xplCmptDocumentFullTextEvolution),DocumentEvolutionComponent.$inject=["$log","documentService"]}(),function(){"use strict";function xplCmptDocumentFullTextExtra(){return{bindToController:{articleNumber:"@"},controller:DocumentFullTextExtraComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"document/document-full-text-extra-component.html"
}}function DocumentFullTextExtraComponent($log,$state,documentService,productService){function initialize(){"keywords"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"keywords").then(getKeywordsSuccess)["catch"](catchKeywordsPromiseFailure):vm.loading.keywords=!1,"authors"!==$state.params.ctx?productService.getProductDetail(vm.articleNumber,"authors").then(getAuthorsSuccess)["catch"](catchAuthorsPromiseFailure):vm.loading.authors=!1,documentService.getDocumentRelatedArticles(vm.articleNumber).then(getDocumentRelatedArticlesSuccess)["catch"](catchRelatedArticlesPromiseFailure)}function getKeywordsSuccess(data){vm.loading.keywords=!1,vm.data.keywords=data}function getAuthorsSuccess(data){vm.loading.authors=!1,vm.data.authors=data}function getDocumentRelatedArticlesSuccess(data){vm.loading.relatedArticles=!1,vm.data.relatedArticles=data}function catchKeywordsPromiseFailure(error){vm.loading.keywords=!1,vm.data.keywords=!1,$log.error(error)}function catchAuthorsPromiseFailure(error){vm.loading.authors=!1,vm.data.authors=!1,$log.error(error)}function catchRelatedArticlesPromiseFailure(error){vm.loading.relatedArticles=!1,vm.data.relatedArticles=!1,$log.error(error)}var vm=this;vm.loading={keywords:!0,authors:!0,relatedArticles:!0},vm.data={keywords:null,authors:null,relatedArticles:null},initialize()}angular.module("xpl.document").directive("xplCmptDocumentFullTextExtra",xplCmptDocumentFullTextExtra),DocumentFullTextExtraComponent.$inject=["$log","$state","documentService","productService"]}(),function(){"use strict";function xplCmptChargeBackButton(){return{bindToController:{articleNumber:"=",userInfo:"=",chgBkInfo:"=",loadFullText:"&"},controller:ChargeBackButtonComponent,controllerAs:"bvm",replace:!0,restrict:"A",scope:{},link:link}}function link(scope,element,attr,ctrl){function openModal(){ctrl.openChargeBack()}element.on("click",openModal)}function ChargeBackButtonComponent($log,$state,$uibModal,documentService){function openChargeBack(){function closedResolve(){}var modalInstance=$uibModal.open({templateUrl:"document/chargeback/chargeback-component.html",controller:ChargeBackComponent,controllerAs:"vm",resolve:{},backdrop:"static"});modalInstance.closed.then(closedResolve)}function ChargeBackComponent($filter,$window,$http,$uibModalInstance,documentService){function submitForm(isValid){vm.errorMsg="",vm.chgBkInfo.showField1&&!vm.chgbkUser.name||vm.chgBkInfo.showField2&&!vm.chgbkUser.email||vm.chgBkInfo.showField3&&!vm.chgbkUser.code?vm.errorMsg="Please enter all the fields.":documentService.updateChargeBackInfo(vm.articleNumber,vm.chgbkUser).then(chgbkSuccess)}function chgbkSuccess(data){"success"===data&&(bvm.chgBkInfo.showChgbkModal=!1,close(),bvm.loadFullText())}function close(){$uibModalInstance.close()}var vm=this;vm.articleNumber=bvm.articleNumber,vm.error=!1,vm.close=close,vm.submitForm=submitForm,vm.errorMsg="",vm.chgBkInfo=bvm.chgBkInfo,vm.chgbkUser={name:bvm.chgBkInfo.chgbkUserField1,email:bvm.chgBkInfo.chgbkUserField2,code:""},vm.chgbkCodeMap=bvm.chgBkInfo.chgbkCodeMap,vm.instName=bvm.chgBkInfo.chgbkInstName,vm.contactName=bvm.chgBkInfo.chgbkInstContactName,vm.contactEmail=bvm.chgBkInfo.chgbkInstContactEmail,vm.isEmpty=function(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0}}var bvm=this;bvm.openChargeBack=openChargeBack,ChargeBackComponent.$inject=["$filter","$window","$http","$uibModalInstance","documentService"]}angular.module("xpl.document").directive("xplCmptChargeBackButton",xplCmptChargeBackButton),ChargeBackButtonComponent.$inject=["$log","$state","$uibModal","documentService"]}(),function(){"use strict";function xplCmptCitationMapButton(){return{bindToController:{articleNumber:"@"},controller:CitationMapButtonComponent,controllerAs:"bvm",replace:!0,restrict:"E",scope:{},templateUrl:"document/citation-map/citation-map-button-component.html"}}function CitationMapButtonComponent($log,$state,$uibModal,documentService){function openMap(){function closedResolve(){}var modalInstance=$uibModal.open({templateUrl:"document/citation-map/citation-map-component.html",controller:CitationMapComponent,controllerAs:"vm",resolve:{}});modalInstance.closed.then(closedResolve)}function CitationMapComponent($filter,$uibModalInstance,productService){function initialize(){productService.getProductDetail(vm.articleNumber,"references").then(getReferencesSuccess)["catch"](catchPromiseFailure).then(function(){productService.getProductDetail(vm.articleNumber,"citations",{count:10}).then(getCitationsSuccess)["catch"](catchPromiseFailure)})}function close(){$uibModalInstance.close()}function prevPage(i){vm.currentPage[i]<=0||(vm.currentPage[i]--,setPagingStates(i))}function nextPage(i){vm.currentPage[i]>=Math.ceil(vm[i].length/vm.pageSize)||(vm.currentPage[i]++,setPagingStates(i))}function setPagingStates(i){vm.hasPrevPage[i]=vm.currentPage[i]>0,vm.hasNextPage[i]=Math.ceil(vm[i].length/vm.pageSize)-1>vm.currentPage[i]}function getReferencesSuccess(data){data.references&&(vm.references=$filter("limitTo")(data.references,10),setPagingStates("references"),vm.articleTitle=data.title)}function getCitationsSuccess(data){if(data.paperCitations&&(data.paperCitations.ieee||data.paperCitations.nonIeee)){var paperCits=data.paperCitations,retCitations=[];paperCits.ieee&&paperCits.ieee.length>0&&(retCitations=$filter("limitTo")(paperCits.ieee,10)),retCitations.length<10&&paperCits.nonIeee&&paperCits.nonIeee.length>0&&(retCitations=retCitations.concat($filter("limitTo")(paperCits.nonIeee,10))),vm.citations=retCitations,setPagingStates("citations"),vm.articleTitle||(vm.articleTitle=data.title)}vm.loading=!1}function loadSection(tabName){close(),$state.go("document.full",{q:null,ctx:tabName,part:null,section:null,tab:tabName,anchor:null,tabfilter:null})}function catchPromiseFailure(error){$log.error(error),vm.error=!0,vm.loading=!1}var vm=this;vm.articleNumber=bvm.articleNumber,vm.error=!1,vm.loading=!0,vm.references=[],vm.citations=[],vm.articleTitle=void 0,vm.pageSize=5,vm.currentPage={references:0,citations:0},vm.hasPrevPage={references:!1,citations:!1},vm.hasNextPage={references:!1,citations:!1},vm.close=close,vm.loadSection=loadSection,vm.prevPage=prevPage,vm.nextPage=nextPage,initialize()}var bvm=this;bvm.openMap=openMap,CitationMapComponent.$inject=["$filter","$uibModalInstance","productService"]}angular.module("xpl.document").directive("xplCmptCitationMapButton",xplCmptCitationMapButton),CitationMapButtonComponent.$inject=["$log","$state","$uibModal","documentService"]}();