!function(){"use strict";window.Xplore=window.Xplore||{},window.Xplore.ngscopes={};var xplDependencies=["ui.router","ui.bootstrap","templates.xpl","ngAria","ngAnimate","ngSanitize","xpl.common","xpl.ads","xpl.ui","ui-rangeSlider","xpl.tags"];angular.module("templates.xpl",[]),angular.module("xpl",xplDependencies)}(),function(){"use strict";angular.module("xpl").constant("api",{document:{"abstract":"/rest/document/{0}/abstract",addCitationAlert:"/xpl/add_citation_alerts.jsp?documentid={0}",authors:"/rest/document/{0}/authors",citations:"/rest/document/{0}/citations",disclaimer:"/rest/document/{0}/disclaimer",definitions:"/rest/document/{0}/definitions",evolution:"/rest/document/{0}/versions",figures:"/rest/document/{0}/figures",footnotes:"/rest/document/{0}/footnotes",keywords:"/rest/document/{0}/keywords",media:"/rest/document/{0}/multimedia",metrics:"/rest/document/{0}/metrics",references:"/rest/document/{0}/references",relatedArticles:"/rest/document/{0}/similar",searchInDocument:"/rest/document/{0}/search",sectionList:"/rest/document/{0}/part/{1}",snippet:"/rest/document/{0}/snippet",toc:"/rest/document/{0}/toc",updateChgbkInfo:"/rest/document/{0}/chgbk",versions:"/rest/document/{0}/versions"},dwnldRefUrl:"/xpl/dwnldReferences?arnumber=",ics:"/rest/ics",login:"/servlet/LoginModalController",loginSso:"/servlet/getWayflessURLByEmail.jsp",pdfUrl:"/stamp/stamp.jsp?arnumber=",product:{details:"/rest/document/"},publication:"/rest/publication",search:"/rest/search",standardPackages:"/rest/standard/packages",typeahead:{browse:"/rest/publication/typeahead",search:"/rest/search/typeahead"}})}(),function(){"use strict";angular.module("xpl").filter("encodeURIComponent",function(){return function(item){return window.encodeURIComponent(item)}})}(),function(){"use strict";angular.module("xpl.common",[])}(),function(){"use strict";angular.module("xpl.ui",["ngAnimate","ngSanitize"]).config(["$httpProvider",function($httpProvider){$httpProvider.defaults.cache=!1,$httpProvider.defaults.headers.get||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.get["If-Modified-Since"]="0"}])}(),function(){"use strict";angular.module("xpl.ads",[])}(),function(){"use strict";angular.module("xpl.tags",["xpl.tags.tealium","xpl.tags.tealium.directive"]).config(["tealiumPrvdrProvider",function(tealiumPrvdrProvider){tealiumPrvdrProvider.setConfig({enabled:TEALIUM_CONFIG_TAGGING_ENABLED,tealium_cdn_url:TEALIUM_CONFIG_CDN_URL,account_profile_environment:TEALIUM_CONFIG_ACCOUNT_PROFILE_ENV,suppress_first_view:!0});var search=function(){var data={sheet_name:"SERP search page - default",sheet_type:"search - default"};return data},home=search,browse=function(){var data={sheet_name:"Browse page - default",sheet_type:"browse - default"};return data},courses=function(){var data={sheet_name:"Courses page - default",sheet_type:"courses - default"};return data};tealiumPrvdrProvider.setViewIdMap({"":home,"/searchresult.jsp":search,"/browse":browse,"/courses":courses})}])}(),function(){"use strict";angular.module("xpl.tags.tealium",["xpl.tags.tealium.data"]).provider("tealiumPrvdr",["tealiumDataPrvdrProvider",function(tealiumDataPrvdrProvider){var config={enabled:!1,tealium_cdn_url:"",account_profile_environment:"",suppress_first_view:!0},isValidAccountProfileEnvironmentStr=function(account_profile_environment){return"string"==typeof account_profile_environment&&account_profile_environment.split(/\//).length>=3&&account_profile_environment.split(/\//)[0].length>0&&account_profile_environment.split(/\//)[1].length>0&&account_profile_environment.split(/\//)[2].length>0};return{getConfig:function(){return config},setConfig:function(newConfig){config=newConfig},setConfigValue:function(key,value){config[key]=value},getViewIdMap:tealiumDataPrvdrProvider.getViewIdMap,setViewIdMap:tealiumDataPrvdrProvider.setViewIdMap,setViewIdMapEntry:tealiumDataPrvdrProvider.setViewIdMapEntry,$get:["tealiumDataPrvdr","$location","$log",function(tealiumDataPrvdr,$location,$log){config?config.enabled?isValidAccountProfileEnvironmentStr(config.account_profile_environment)?this.setConfigValue("script_src",config.tealium_cdn_url+config.account_profile_environment+"/utag.js"):($log.error("ERROR - Please configure Tealium properly. Disabling tealium. Not valid account_profile_environment value of;",config.account_profile_environment),config.enabled=!1):$log.warn("WARNING - Tealium tagging was disabled"):($log.error("ERROR - Please configure Tealium properly. Disabling tealium. Not valid config value of;",config),config={enabled:!1});var isTealiumEnabled=function(){return!(!config||config.enabled!==!0)},getViewIdMap=tealiumDataPrvdr.getViewIdMap,setViewIdMapEntry=tealiumDataPrvdr.setViewIdMapEntry,view=function(data){if(config.enabled){var data=data||tealiumDataPrvdr.getDataLayer($location.path());track("view",data)}},link=function(data){if(config.enabled){var data=data||tealiumDataPrvdr.getDataLayer($location.path());track("link",data)}},track=function(ev,data){if(config.enabled){var data=data||tealiumDataPrvdr.getDataLayer($location.path()),ev=ev||"view",src=config.script_src;"undefined"==typeof utag?getScript(src,function(){utag.track(ev,data)}):utag.track(ev,data)}},getScript=function(src,callback){if(config.enabled){var s,t,d=document,o={callback:callback||function(){}};"undefined"!=typeof src&&("undefined"!=typeof jQuery?(jQuery.ajaxSetup({cache:!0}),jQuery.getScript(src,o.callback)):(s=d.createElement("script"),s.language="javascript",s.type="text/javascript",s.async=1,s.charset="utf-8",s.src=src,"function"==typeof o.callback&&(d.addEventListener?s.addEventListener("load",function(){o.callback()},!1):s.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,o.callback())}),t=d.getElementsByTagName("script")[0],t.parentNode.insertBefore(s,t)))}};return{isTealiumEnabled:isTealiumEnabled,getViewIdMap:getViewIdMap,setViewIdMapEntry:setViewIdMapEntry,view:view,link:link,track:track,run:function(){"undefined"==typeof utag_data&&(window.utag_data=tealiumDataPrvdr.getDataLayer($location.path())||{}),config.suppress_first_view?window.utag_cfg_ovrd={noview:!0}:getScript(config.script_src)}}}]}}]).run(["tealiumPrvdr",function(tealiumPrvdr){tealiumPrvdr.run()}])}(),function(){"use strict";angular.module("xpl.tags.tealium.data",[]).provider("tealiumDataPrvdr",function(){var view_id_map={};return{getViewIdMap:function(){return view_id_map},setViewIdMap:function(map){view_id_map=map},setViewIdMapEntry:function(id,dataFunc){view_id_map=view_id_map||{},view_id_map[id]=dataFunc},$get:function(){var getViewIdMap=function(){return view_id_map},setViewIdMapEntry=function(id,dataFunc){view_id_map=view_id_map||{},view_id_map[id]=dataFunc},getDataLayer=function(view_id){var dataLayer;try{dataLayer=view_id_map[view_id]?view_id_map[view_id]():view_id_map.generic?view_id_map.generic():{}}catch(err){data={},data.page_type="generic dataLayer error",data.error_name=err.name,data.error_message=err.message,dataLayer=data}return dataLayer};return{getViewIdMap:getViewIdMap,setViewIdMapEntry:setViewIdMapEntry,getDataLayer:getDataLayer}}}})}(),function(){"use strict";function xplCmptActionBar(){return{bindToController:{records:"=",selectedItems:"=",user:"="},controller:ActionBarComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/action-bar-component.html"}}function ActionBarComponent(){function toggleSelection(){allSelected()?vm.selectedItems=[]:vm.selectedItems=_.pluck(vm.records,"articleNumber")}function allSelected(){return vm.selectedItems.length===vm.records.length}var vm=this;vm.allSelected=allSelected,vm.toggleSelection=toggleSelection}angular.module("xpl.common").directive("xplCmptActionBar",xplCmptActionBar)}(),function(){"use strict";function xplCmptAdsLeaderboard(){return{bindToController:{user:"=",publisher:"="},controller:AdsLeaderboardComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/ads-leaderboard-component.html",transclude:!0}}function AdsLeaderboardComponent($element,$scope){function closeAds(){$scope.$destroy(),$element.remove()}var vm=this;vm.closeAds=closeAds}angular.module("xpl.common").directive("xplCmptAdsLeaderboard",xplCmptAdsLeaderboard),AdsLeaderboardComponent.$inject=["$element","$scope"]}(),function(){"use strict";function xplCmptAdsSidebar(){return{bindToController:{loading:"=",user:"="},controller:AdsSidebarComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/ads-sidebar-component.html",transclude:!0}}function AdsSidebarComponent(){}angular.module("xpl.common").directive("xplCmptAdsSidebar",xplCmptAdsSidebar)}(),function(){"use strict";function xplCmptAuthortabBio(){return{bindToController:{bioParagraphs:"=",hashedName:"@"},controller:AuthortabBioComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/authortab-bio-component.html"}}function AuthortabBioComponent($rootScope,$state,documentConstants,utilsService){function initialize(){}function viewMoreBio(anchor){$state.includes("document.full",{ctx:"authors"})?utilsService.scrollTo(anchor,120):$state.go("document.full",{ctx:"authors",tab:"authors",anchor:anchor,q:null,part:null,section:null,tabFilter:null})}var vm=this;vm.viewMoreBio=viewMoreBio,vm.charlimit=425,vm.charlimitExceeded=vm.bioParagraphs.reduce(function(prevLength,currParagraph){return prevLength+currParagraph.length},0)>vm.charlimit,initialize()}angular.module("xpl.common").directive("xplCmptAuthortabBio",xplCmptAuthortabBio),AuthortabBioComponent.$inject=["$rootScope","$state","documentConstants","utilsService"]}(),function(){"use strict";function xplCmptDashboard(){return{bindToController:{breadcrumbs:"=",endRecord:"=",loading:"=",startRecord:"=",terms:"=",totalRecords:"="},controller:DashboardComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/dashboard-component.html",transclude:!0}}function DashboardComponent(){}angular.module("xpl.common").directive("xplCmptDashboard",xplCmptDashboard)}(),function(){"use strict";function xplCmptFacets(){return{bindToController:{facets:"=",error:"=",loading:"=",resultLength:"="},controller:FacetsComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/facets-component.html",transclude:!0}}function FacetsComponent(){}angular.module("xpl.common").directive("xplCmptFacets",xplCmptFacets)}(),function(){"use strict";function xplCmptResultList(){return{bindToController:{error:"=",loading:"=",length:"=",suggestions:"=",terms:"="},controller:ResultListComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/result-list-component.html",transclude:!0}}function ResultListComponent(){}angular.module("xpl.common").directive("xplCmptResultList",xplCmptResultList)}(),function(){"use strict";function xplCmptToolbar(){return{bindToController:{id:"="},controller:ToolbarComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"common/components/toolbar-component.html",transclude:!0}}function ToolbarComponent(){}angular.module("xpl.common").directive("xplCmptToolbar",xplCmptToolbar)}(),function(){"use strict";function BrowseSortFilterService(DataFilterService,userService,$state,searchState){function BrowseSortFilterService(totalRecords,label){DataFilterService.apply(this,[totalRecords,label]),this.user=userService.getUser(),this.options=this.setOptions()}var OPTION_SET=[{value:"newest",name:"Newest First",order:0,standards:!0,pub:!0},{value:"pub-title-asc",name:"Publication Title A - Z",order:1,pub:!0,isDefault:!0},{value:"pub-title-desc",name:"Publication Title Z - A",order:2,pub:!0},{value:"std-number",name:"Standard Number",order:3,standards:!0,isDefault:!0}];return BrowseSortFilterService.prototype=new DataFilterService,BrowseSortFilterService.prototype.defaultItem=function(){if($state.params.sortType){var definedSortType=$state.params.sortType;return _.find(this.options,function(option){return option.value===definedSortType})}return _.find(this.options,function(option){return option.isDefault})},BrowseSortFilterService.prototype.onChange=function(newVal){return searchState.push(searchState.$facets.sort,newVal.value).update(),newVal},BrowseSortFilterService.prototype.setOptions=function(){var options=OPTION_SET.slice(0);return"standards"===$state.params.contentType?_.remove(options,function(o){return o.standards}):_.remove(options,function(o){return o.pub})},BrowseSortFilterService}angular.module("xpl.common").service("BrowseSortFilterService",BrowseSortFilterService),BrowseSortFilterService.$inject=["DataFilterService","userService","$state","searchState"]}(),function(){"use strict";function DataFilterService(){function DataFilterService(totalRecords,label){this.totalRecords=totalRecords,this.label=label}return DataFilterService.prototype.defaultItem=function(){throw"No options available. Cannot set default item."},DataFilterService.prototype.onChange=function(newVal){return newVal},DataFilterService.prototype.enabled=function(){return this.totalRecords>1},DataFilterService}angular.module("xpl.common").factory("DataFilterService",DataFilterService)}(),function(){"use strict";angular.module("xpl.common").constant("pagingConstants",{options:[{name:"10",value:10,order:0},{name:"25",value:25,order:1,isDefault:!0},{name:"50",value:50,order:2},{name:"75",value:75,order:3},{name:"100",value:100,order:4}]})}(),function(){"use strict";function PagingFilterService(DataFilterService,pagingConstants,userService,searchState,$stateParams){function PagingFilterService(totalRecords,label){DataFilterService.apply(this,[totalRecords,label]),this.user=userService.getUser(),this.options=this.setOptions(this.totalRecords)}return PagingFilterService.prototype=new DataFilterService,PagingFilterService.prototype.defaultItem=function(){if(searchState.$params[searchState.$facets.rowsPerPage]){var definedItemCount=searchState.$params[searchState.$facets.rowsPerPage];return definedItemCount>this.totalRecords?this.options[this.options.length-1]:_.find(this.options,function(option){return option.name===definedItemCount})}if(this.user.userPreferencesInfo&&this.user.userPreferencesInfo.rowsPerPage){var userItemCount=this.user.userPreferencesInfo.rowsPerPage;return userItemCount>this.totalRecords?this.options[this.options.length-1]:_.find(this.options,function(option){return option.value===userItemCount})}var defaultItemCount=_.find(this.options,function(option){return option.isDefault});return defaultItemCount?defaultItemCount:this.options[this.options.length-1]},PagingFilterService.prototype.onChange=function(newVal){return searchState.push(searchState.$facets.rowsPerPage,newVal.value).update(),newVal},PagingFilterService.prototype.enabled=function(){return this.totalRecords>this.options[0].value},PagingFilterService.prototype.setOptions=function(){var options=pagingConstants.options.slice(0);if(this.totalRecords>=options[options.length-1].value)return options;for(var i=options.length-1;i>0;i--)if(options[i].value>this.totalRecords){if(!(options[i-1].value>=this.totalRecords))break;options.pop()}return options},PagingFilterService}angular.module("xpl.common").service("PagingFilterService",PagingFilterService),PagingFilterService.$inject=["DataFilterService","pagingConstants","userService","searchState","$stateParams"]}(),function(){"use strict";angular.module("xpl.common").constant("showTypeConstants",{options:[{value:"allResults",name:"All Results",order:0,isDefault:!0},{value:"subscribed",name:"My Subscribed Content",order:1,isSubscribed:!0},{value:"openAccess",name:"Open Access",order:2},{value:"fileCabinet",name:"File Cabinet",order:3}]})}(),function(){"use strict";function ShowTypeFilterService($stateParams,DataFilterService,showTypeConstants,userService,searchState){function ShowTypeFilterService(totalRecords,label){DataFilterService.apply(this,[totalRecords,label]),this.user=userService.getUser(),this.options=setOptions(this.user)}function setOptions(user){return user.subscribedContent||(showTypeConstants.options=_.remove(showTypeConstants.options,function(option){return!option.isSubscribed})),user.fileCabinetContent||(showTypeConstants.options=_.remove(showTypeConstants.options,function(option){return"fileCabinet"!==option.value})),showTypeConstants.options}return ShowTypeFilterService.prototype=new DataFilterService,ShowTypeFilterService.prototype.defaultItem=function(){var definedContentFilter=_.find(showTypeConstants.options,function(option){return searchState.$params[option.value]&&"true"===searchState.$params[option.value]});return definedContentFilter?definedContentFilter:_.find(this.options,function(option){return option.isDefault})},ShowTypeFilterService.prototype.onChange=function(newVal){return _.forEach(this.options,function(o){$stateParams[o.value]=void 0}),newVal.isDefault||($stateParams[newVal.value]=!0),searchState.update(),newVal},ShowTypeFilterService}angular.module("xpl.common").service("ShowTypeFilterService",ShowTypeFilterService),ShowTypeFilterService.$inject=["$stateParams","DataFilterService","showTypeConstants","userService","searchState"]}(),function(){"use strict";angular.module("xpl.common").constant("sortByConstants",{options:[{name:"Relevance",value:"relevance",order:0,isDefault:!0},{name:"Newest First",value:"desc_p_Publication_Year",order:1},{name:"Oldest First",value:"asc_p_Publication_Year",order:2},{name:"Most Cited [By Papers]",value:"desc_p_Citation_Count",order:3},{name:"Most Cited [By Patents]",value:"desc_p_Patent_Count",order:4,isPatentCount:!0},{name:"Publication Title A-Z",value:"asc_p_Publication_Title",order:5},{name:"Publication Title Z-A",value:"desc_p_Publication_Title",order:6}]})}(),function(){"use strict";function SortByFilterService(DataFilterService,sortByConstants,userService,searchState){function SortByFilterService(totalRecords,label){DataFilterService.apply(this,[totalRecords,label]),this.user=userService.getUser(),this.options=this.setOptions(this.user)}return SortByFilterService.prototype=new DataFilterService,SortByFilterService.prototype.defaultItem=function(){if(searchState.$params[searchState.$facets.sort]){var definedSortType=searchState.$params[searchState.$facets.sort];return _.find(this.options,function(option){return option.value===definedSortType})}if(this.user.userPreferencesInfo&&this.user.userPreferencesInfo.sortType){var userSortType=this.user.userPreferencesInfo.sortType;return _.find(this.options,function(option){return option.value===userSortType})}return _.find(this.options,function(option){return option.isDefault})},SortByFilterService.prototype.onChange=function(newVal){return newVal.isDefault?searchState.clear(searchState.$facets.sort).update():searchState.push(searchState.$facets.sort,newVal.value).update(),newVal},SortByFilterService.prototype.setOptions=function(user){return user.showPatentCitations?sortByConstants.options:_.remove(sortByConstants.options,function(option){return option.isPatentCount!==!0})},SortByFilterService}angular.module("xpl.common").service("SortByFilterService",SortByFilterService),SortByFilterService.$inject=["DataFilterService","sortByConstants","userService","searchState"]}(),function(){"use strict";function breadcrumbService(){function getBreadcrumb(key,value){if(breadcrumbService.breadcrumbs){var breadcrumb=_.filter(breadcrumbService.breadcrumbs,{key:value});return breadcrumb.length?breadcrumb[0]:void 0}}function removeBreadcrumb(value){var breadcrumb=_.remove(breadcrumbService.breadcrumbs,function(b){return b.type.toLowerCase()===value.toLowerCase()});return breadcrumb.length?breadcrumb[0]:void 0}var breadcrumbService={breadcrumbs:void 0,getBreadcrumb:getBreadcrumb,removeBreadcrumb:removeBreadcrumb};return breadcrumbService}angular.module("xpl.common").factory("breadcrumbService",breadcrumbService)}(),function(){"use strict";function collabratecService($http){function exportRecords(ids){return $http({method:"POST",url:COLLABRATEC_ENDPOINT,data:$.param({id:ids}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).success(getExportSuccess).error(getExportFailure)}function getExportSuccess(response){}function getExportFailure(error){}var COLLABRATEC_ENDPOINT="/rest/search/export/",COLLABRATEC_URL=xpl.properties.collabratec.url,collabratecService={exportRecords:exportRecords,url:COLLABRATEC_URL};return collabratecService}angular.module("xpl.common").factory("collabratecService",collabratecService),collabratecService.$inject=["$http"]}(),function(){"use strict";function addBreakAtSpace(){function addBreakAtSpaceFilter(input){if(input&&input.length)return input.replace(" ","<br>")}return addBreakAtSpaceFilter}function charlimit($filter){function charlimitFilter(input,maxLimit,disable){input="string"==typeof input?input:"number"==typeof input?input.toString():"",maxLimit="number"==typeof maxLimit?maxLimit:48,disable="boolean"==typeof disable&&disable;var output="";return output=disable||input.length<=maxLimit?input:$filter("limitTo")(input,maxLimit)+"..."}return charlimitFilter}function charlimitHtml(){function charlimitHtmlFilter(input,maxLimit,disable,maxLimitExceededCallback){if(input="string"==typeof input?input:"number"==typeof input?input.toString():"",maxLimit="number"==typeof maxLimit?maxLimit:48,disable="boolean"==typeof disable&&disable,maxLimitExceededCallback="function"==typeof maxLimitExceededCallback?maxLimitExceededCallback:function(){},disable)return input;for(var output="",count=0,parsedHtml=j$.parseHTML(input)||[],i=0;i<parsedHtml.length;i++){var domNode=parsedHtml[i],nodeName=domNode.nodeName,isMathjaxNode="INLINE-FORMULA"===nodeName||"FORMULA"===nodeName,isTextNode=3===domNode.nodeType,nodeText=domNode.textContent,nodeContentLength=isMathjaxNode?1:nodeText.length,nodeHtml=domNode.outerHTML;if(maxLimit<nodeContentLength+count){if(isTextNode){var lengthToMaxLimit=maxLimit-count;count+=lengthToMaxLimit,output+=nodeText.substring(0,lengthToMaxLimit)}else isMathjaxNode&&(count+=nodeContentLength,output+=nodeHtml);output+="...",maxLimitExceededCallback(!0);break}count+=nodeContentLength,output+=isTextNode?nodeText:nodeHtml}return output}return charlimitHtmlFilter}function charlimitAuthorBio($filter){function charlimitAuthorBioFilter(input,maxLimit){input=Array.isArray(input)?input:[],maxLimit="number"==typeof maxLimit?maxLimit:48;for(var output=[],i=0,inputLength=input.length;i<inputLength;i++){var inputElem=input[i];if(!(inputElem.length<=maxLimit)){inputElem=$filter("charlimit")(inputElem,maxLimit),output.push(inputElem);break}output.push(inputElem),maxLimit-=inputElem.length}return output}return charlimitAuthorBioFilter}function charlimitAuthorConcat($filter){function charlimitAuthorConcatFilter(input,maxLimit){input=Array.isArray(input)?input:[],maxLimit="number"==typeof maxLimit?maxLimit:25;for(var output="",i=0,inputLength=input.length;i<inputLength;i++){var inputElem=input[i];output+=inputElem+"; "}return output=output.slice(0,-2),output.length>maxLimit&&(output=$filter("charlimit")(output,maxLimit)),output}return charlimitAuthorConcatFilter}function convertMinutesToHours(){function convertMinutesToHoursFilter(minutes){if(minutes){var hours=parseInt(minutes,10)/60;return hours>=1?hours:minutes}}return convertMinutesToHoursFilter}function convertMinutesToHoursWithLabel(){function convertMinutesToHoursWithLabelFilter(minutes){if(minutes){minutes=parseInt(minutes,10);var value,label,hours=minutes/60;return minutes>=60?(value=hours,label=hours>1?"Hours":"Hour"):(value=minutes,label=minutes>1?"Minutes":"Minute"),value+" "+label}}return convertMinutesToHoursWithLabelFilter}function correctlyEncodeForwardSlash(){function correctlyEncodeForwardSlashFilter(str){return str.replace(/(%252F)/g,"%2F")}return correctlyEncodeForwardSlashFilter}function dehighlight(){function dehighlightFilter(str){return str.replace(/(\[::)|(::\])/g,"")}return dehighlightFilter}function encodeURIComponent(){function encodeURIComponentFilter(item){return window.encodeURIComponent(item)}return encodeURIComponentFilter}function endecaSearchValues(){function endecaSearchValuesFilter(str){return str.replace(/\&amp;/g,".AND.").replace(/\&/g,".AND.").replace(/\=/g,".EQ.").replace(/\+/g,".PLS.").replace(/\#/g,".HSH.").replace(/\(/g,".LB.").replace(/\)/g,".RB.").replace(/\"/g,".QT.")}return endecaSearchValuesFilter}function fileSize(){function fileSizeFilter(input){var numInput=Math.round(Math.abs(+input)),output="";return Number.isNaN(numInput)||(output+=numInput>999e3?Math.round(numInput/1e5)+"Mb":numInput>1e3?Math.round(numInput/1e3)+"Kb":numInput+"b"),output}return fileSizeFilter}function joinWithComma(){function joinWithCommaFilter(input){return(input||[]).join(", ")}return joinWithCommaFilter}function labelForDuration(){function labelForDurationFilter(minutes){if(minutes){minutes=parseInt(minutes,10);var label,hours=minutes/60;return label=minutes>=60?hours>1?"Hours":"Hour":minutes>1?"Minutes":"Minute"}}return labelForDurationFilter}function slug(){function slugFilter(str){return str.trim().toLowerCase().replace(/^%20|%20$/g,"").replace(/%20|[^a-z0-9]+/g,"-")}return slugFilter}function toTitleCase(){function toTitleCaseFilter(str){return str.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}return toTitleCaseFilter}function unslug($filter){function unslugFilter(str){return $filter("toTitleCase")(_.trim(str).replace(/-/g," "))}return unslugFilter}angular.module("xpl.common").filter("addBreakAtSpace",addBreakAtSpace).filter("charlimit",charlimit).filter("charlimitAuthorBio",charlimitAuthorBio).filter("charlimitAuthorConcat",charlimitAuthorConcat).filter("charlimitHtml",charlimitHtml).filter("convertMinutesToHours",convertMinutesToHours).filter("convertMinutesToHoursWithLabel",convertMinutesToHoursWithLabel).filter("correctlyEncodeForwardSlash",correctlyEncodeForwardSlash).filter("dehighlight",dehighlight).filter("encodeURIComponent",encodeURIComponent).filter("endecaSearchValues",endecaSearchValues).filter("fileSize",fileSize).filter("joinWithComma",joinWithComma).filter("labelForDuration",labelForDuration).filter("slug",slug).filter("toTitleCase",toTitleCase).filter("unslug",unslug),charlimit.$inject=["$filter"],charlimitAuthorBio.$inject=["$filter"],charlimitAuthorConcat.$inject=["$filter"],unslug.$inject=["$filter"]}(),function(){"use strict";function facetService(){function getFacet(value){if(facetService.facets){var facet=_.filter(facetService.facets,{name:value});return facet.length?facet[0]:void 0}}function removeFacet(value){var facet=_.remove(facetService.facets,function(f){return f.name.toLowerCase()===value.toLowerCase()});return facet.length?facet[0]:void 0}var facetService={facets:void 0,getFacet:getFacet,removeFacet:removeFacet};return facetService}angular.module("xpl.common").factory("facetService",facetService)}(),function(){"use strict";function getParameters(){var parameters={};return parameters[QUERY_PARAMETERS.within]={array:!0},parameters[QUERY_PARAMETERS.refinements]={array:!0},parameters[QUERY_PARAMETERS.range]={array:!0},parameters}function generateUrl(){var url="?";return _.each(QUERY_PARAMETERS,function(paramater){url+="{"+paramater+"}&"}),url}var QUERY_PARAMETERS={query:"queryText",refinements:"refinements",range:"ranges",sort:"sortType",combineQuery:"combineQuery",matchBoolean:"matchBoolean",page:"pageNumber",rowsPerPage:"rowsPerPage",within:"searchWithin",openAccess:"openAccess",subscribed:"subscribed",fileCabinet:"fileCabinet",newsearch:"newsearch",punumber:"punumber",searchField:"searchField",promo:"promo",history:"history",selectedValue:"selectedValue",selectActive:"showActiveTitlesOnly"};angular.module("xpl.common").constant("queryConstants",{appendRouteUrl:generateUrl,parameters:getParameters})}(),function(){"use strict";function sceDecorator($delegate){function parseAsText(html){return decodeURI($("<p>"+encodeURI(html)+"</p>").text())}return $delegate.parseAsText=parseAsText,$delegate}angular.module("xpl.common").config(["$provide",function($provide){$provide.decorator("$sce",sceDecorator)}]),sceDecorator.$inject=["$delegate"]}(),function(){"use strict";function typeaheadService($http,$log,api){function getSuggestions(params,term,name,id){var requestData=params,endpoint=api.typeahead.browse,success=getSuggestionsSuccess;return requestData.searchRefinementTerm=term,id&&(endpoint=api.typeahead.search,success=getSearchSuggestionsSuccess,requestData.searchRefinementId=id,name&&(requestData.refinementName=name)),$http.post(endpoint,requestData).then(success)["catch"](getSuggestionsFailure)}function getSuggestionsSuccess(response){return response.data}function getSearchSuggestionsSuccess(response){return response.data[0]?response.data[0].children:{}}function getSuggestionsFailure(error){$log.error(error)}var typeaheadService={getSuggestions:getSuggestions};return typeaheadService}angular.module("xpl.common").factory("typeaheadService",typeaheadService),typeaheadService.$inject=["$http","$log","api"]}(),function(){"use strict";function unauthorizedInterceptor($q,$window){function responseError(rejection){return 401===rejection.status&&$window.location.reload(),$q.reject(rejection)}var unauthorizedInterceptor={responseError:responseError};return unauthorizedInterceptor}angular.module("xpl.common").factory("unauthorizedInterceptor",unauthorizedInterceptor),unauthorizedInterceptor.$inject=["$q","$window"]}(),function(){"use strict";function userService($http,$log){function getUser(){return userService.user?userService.user:{institute:!1,member:!1,guest:!1}}function setUser(user){user&&(user.preferences=user.userPreferencesInfo||{},userService.user=user)}function setPreferences(){angular.noop()}function getUserType(userInfo){if(userInfo=userInfo||userService.user,"undefined"!=typeof userInfo){if(userInfo.institute===!0)return"Institute";if(userInfo.individual===!0)return"Individual";if(userInfo.member===!0)return"Member";if(userInfo.guest===!0)return"Guest"}return"Anonymous"}function getUserInstitutionId(userInfo){if(userInfo=userInfo||userService.user,"undefined"!=typeof userInfo&&userInfo.userIds instanceof Array&&userInfo.userIds.length>0&&userInfo.institute===!0)return userInfo.userIds[0]}function getUserId(userInfo){if(userInfo=userInfo||userService.user,"undefined"!=typeof userInfo&&userInfo.userIds instanceof Array&&userInfo.userIds.length>0){if(userInfo.institute===!1&&userInfo.individual===!0)return userInfo.userIds[0];if(userInfo.institute===!0&&userInfo.individual===!0)return userInfo.userIds[1]}}function getProducts(userInfo){return userInfo=userInfo||userService.user,"undefined"!=typeof userInfo&&userInfo.products instanceof Array&&userInfo.products.length>0?userInfo.products.toString():"undefined"!=typeof userInfo?userInfo.products:void 0}function fetchUserInfo(){return $http({method:"GET",url:USER_INFO_URL,cache:!1}).then(function(response){return setUser(response.data),response.data},function(errorResponse){$log.error("ERROR in fetching user info;",errorResponse)})}var USER_INFO_URL="/rest/user/info",userService={user:void 0,getUser:getUser,setUser:setUser,setPreferences:setPreferences,getUserType:getUserType,getUserInstitutionId:getUserInstitutionId,getUserId:getUserId,getProducts:getProducts,fetchUserInfo:fetchUserInfo};return userService}angular.module("xpl.common").factory("userService",userService),userService.$inject=["$http","$log"]}(),function(){"use strict";function utilService(){function brackets2customHtmlEntity(str){return isEmptyStr(str)?str:str.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function brackets2htmlEntity(str){return isEmptyStr(str)?str:str.replace(/</g,"&#60;").replace(/>/g,"&#62;")}function clone(obj){return JSON.parse(JSON.stringify(obj))}function decodeHtmlEntity(str){return str.replace(/&#(\d+);/g,function(match,dec){return String.fromCharCode(dec)})}function encodeHtmlEntity(str){for(var buf=[],i=str.length-1;i>=0;i--)buf.unshift(["&#",str[i].charCodeAt(),";"].join(""));
return buf.join("")}function equalsIgnoreCase4str(str1,str2){return!(!isTruty4str(str1)||!isTruty4str(str2))&&!(!isTruty4str(str1)||!isTruty4str(str2)||str1.toLowerCase()!==str2.toLowerCase())}function isEmptyStr(str){return!!("string"==typeof str&&str||"").match(/^\s*$/)}function isTruty4str(str){return!(!str||"string"!=typeof str)}function string2Hash(str){var i,chr,len,hash=0;if(0===str.length)return hash;for(i=0,len=str.length;i<len;i++)chr=str.charCodeAt(i),hash=(hash<<5)-hash+chr,hash|=0;return Math.abs(hash)}var utilService={brackets2customHtmlEntity:brackets2customHtmlEntity,brackets2htmlEntity:brackets2htmlEntity,clone:clone,decodeHtmlEntity:decodeHtmlEntity,encodeHtmlEntity:encodeHtmlEntity,equalsIgnoreCase4str:equalsIgnoreCase4str,isEmptyStr:isEmptyStr,isTruty4str:isTruty4str,string2Hash:string2Hash};return utilService}angular.module("xpl.common").factory("utilService",utilService)}(),function(){"use strict";function xplCmptBundleDetailsLink(){return{restrict:"A",bindToController:{bundleDetails:"="},controller:BundleDetailsLinkComponent,controllerAs:"lvm",scope:{},link:link}}function link(scope,element,attr,ctrl){function openModal(){ctrl.openModal()}element.on("click",openModal)}function BundleDetailsLinkComponent($log,$state,$uibModal){function openModal(){function closedResolve(){angular.element(sipModalSelector).removeClass("u-hide-important")}var sipModalSelector=".sip-modal-content";angular.element(sipModalSelector).addClass("u-hide-important");var modalInstance=$uibModal.open({templateUrl:"ui/signin-purchase/modal-tabs/bundle-details-modal-component.html",controller:BundleDetailsModalComponent,controllerAs:"vm",backdrop:"static"});modalInstance.closed.then(closedResolve)}function BundleDetailsModalComponent($scope,$uibModalInstance){function initialize(){vm.loading=!1}function closeModal(){$uibModalInstance.close()}var vm=this;vm.error=!1,vm.loading=!0,vm.bundleDetails=lvm.bundleDetails,vm.closeModal=closeModal,initialize()}var lvm=this;lvm.openModal=openModal,BundleDetailsModalComponent.$inject=["$scope","$uibModalInstance"]}angular.module("xpl.ui").directive("xplCmptBundleDetailsLink",xplCmptBundleDetailsLink),BundleDetailsLinkComponent.$inject=["$log","$state","$uibModal"]}(),function(){"use strict";function xplCmptSipModalPurchaseTab(){return{bindToController:{purchaseOptions:"=",publisher:"@",userInfo:"=",addToCartConfirmation:"&",modalInstanceService:"="},controller:SipModalPurchaseTabComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"ui/signin-purchase/modal-tabs/sip-modal-purchase-tab-component.html"}}function SipModalPurchaseTabComponent($log,$scope,$state,documentService){function initialize(){vm.purchaseOptions.showPdfFormatPricingTab?vm.applyFormat("pdfHtml"):vm.purchaseOptions.showOtherFormatPricingTab&&vm.applyFormat("other"),vm.loading=!1}function closeModal(){vm.modalInstanceService.close()}function applyFormat(format){format=format||"pdfHtml",clearError(),vm.activeFormat=format,"pdfHtml"===format&&vm.purchaseOptions.pdfPricingInfoAvailable?(vm.activePurchables=vm.purchaseOptions.pdfPricingInfo,vm.selectedPartNumber=vm.activePurchables[0].partNumber):"other"===format&&vm.purchaseOptions.otherPricingInfoAvailable&&(vm.activePurchables=vm.purchaseOptions.otherFormatPricingInfo,vm.selectedPartNumber=vm.activePurchables[0].partNumber)}function addToCart(){if(clearError(),vm.loading=!0,"other"===vm.activeFormat)return void(window.location=vm.purchaseOptions.purchasePartnerUrl);var itemData='[{"partNum":"'+vm.selectedPartNumber+'","quantity":"1","membershipType":"","country":""}]';"function"==typeof mc_addItems?mc_addItems(itemData,addToCartSuccess,catchPromiseFailure):vm.error.unavailable=!0}function clearError(){for(var key in vm.error)vm.error.hasOwnProperty(key)&&(vm.error[key]=!1)}function addToCartSuccess(data){setCurrentCartCount(),$scope.$apply(function(){vm.loading=!1,vm.addToCartConfirmation()})}function catchPromiseFailure(error){$scope.$apply(function(){$log.error(error),error&&error.indexOf("You have requested quantity more than what is allowed")>-1?vm.error.alreadyInCart=!0:(vm.error.failure=!0,error&&error.length>0&&(vm.error.message=error)),vm.loading=!1})}var vm=this;vm.error={unavailable:!1,failure:!1,alreadyInCart:!1},vm.loading=!0,vm.activeFormat="",vm.activePurchables=[],vm.selectedPartNumber=null,vm.closeModal=closeModal,vm.applyFormat=applyFormat,vm.addToCart=addToCart,initialize()}angular.module("xpl.ui").directive("xplCmptSipModalPurchaseTab",xplCmptSipModalPurchaseTab),SipModalPurchaseTabComponent.$inject=["$log","$scope","$state","documentService"]}(),function(){"use strict";function xplCmptSipModalSigninTab(){return{bindToController:{userInfo:"=",modalInstanceService:"="},controller:SipModalSigninTabComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"ui/signin-purchase/modal-tabs/sip-modal-signin-tab-component.html"}}function SipModalSigninTabComponent($http,$log,$scope,$state,api,documentService){function initialize(){vm.applyFormat("regular"),vm.loading=!1}function showForgotPasswordModal(){return Modal.show("/xpl/mwForgotPassword.jsp"),!1}function closeModal(){vm.modalInstanceService.close()}function applyFormat(format){format=format||"regular",clearError(),resetUser(),vm.activeFormat=format}function signIn(){if(clearError(),!vm.user.username||!vm.user.password)return void(vm.error.message='"Username" and "Password" are required fields.');vm.loading=!0;var loginData={username:encodeURIComponent(vm.user.username),password:encodeURIComponent(vm.user.password),src2:"loginModalWindow",url2:encodeURIComponent(window.location.pathname+window.location.search),successRedirectUrl:encodeURIComponent(window.location.pathname+window.location.search)},queryString="?username="+loginData.username+"&password="+loginData.password;loginData.src2&&(queryString+="&src2="+loginData.src2),loginData.url2&&(queryString+="&url2="+loginData.url2),loginData.successRedirectUrl&&(queryString+="&successRedirectUrl="+loginData.successRedirectUrl),$http.post(api.login+queryString).then(signInSuccess,signInFail)["catch"](catchPromiseFailure)}function ssoSignIn(){if(clearError(),!vm.user.email)return void(vm.error.message='"Email" is required field.');vm.loading=!0;var loginData={email:encodeURIComponent(vm.user.email),url:encodeURIComponent(window.location.href)},queryString="?email="+loginData.email+"&url="+loginData.url;$http.post(api.loginSso+queryString).then(ssoSignInSuccess,ssoSignInFail)["catch"](catchPromiseFailure)}function navToWayf(entity){var navUrl="/servlet/wayf.jsp";entity&&(navUrl+="?entityId="+entity+"&url="+getWayfRedirectUrl()),window.location.href=navUrl}function clearError(){vm.error.message=null}function resetUser(){for(var key in vm.user)vm.user.hasOwnProperty(key)&&(vm.user[key]=null)}function getWayfRedirectUrl(){var url=window.location.href;return url.indexOf("guesthome.jsp")>=0&&(url="/Xplore/home.jsp"),url=encodeURIComponent(url)}function signInSuccess(data){var resp=data.data;resp?resp.errorReason?signInFail(resp.errorReason):resp.successRedirectUrl?window.location.href=resp.successRedirectUrl:window.location.reload():signInFail("Unexpected response from login service.")}function signInFail(error){$log.error(error),vm.error.message=error,vm.loading=!1}function ssoSignInSuccess(data){var resp=data.data;resp?resp.errorMessage?ssoSignInFail(resp.errorMessage):resp.wayflessURL?window.location.href=resp.wayflessURL:window.location.reload():ssoSignInFail("Unexpected response from login service.")}function ssoSignInFail(error){$log.error(error),vm.error.message=error+" "+vm.genericErrorMessage,vm.loading=!1}function catchPromiseFailure(error){$log.error(error),vm.error.message="An unexpected error occurred. "+vm.genericErrorMessage,vm.loading=!1}var vm=this;vm.error={message:null},vm.loading=!0,vm.activeFormat="",vm.user={username:null,password:null,email:null},vm.closeModal=closeModal,vm.applyFormat=applyFormat,vm.signIn=signIn,vm.ssoSignIn=ssoSignIn,vm.navToWayf=navToWayf,vm.showForgotPasswordModal=showForgotPasswordModal,vm.genericErrorMessage='Please try again or <a href="http://ieeexplore.ieee.org/xpl/techform.jsp">contact us</a> for more information.',initialize()}angular.module("xpl.ui").directive("xplCmptSipModalSigninTab",xplCmptSipModalSigninTab),SipModalSigninTabComponent.$inject=["$http","$log","$scope","$state","api","documentService"]}(),function(){"use strict";angular.module("xpl.ui").directive("addthisToolbox",function(){return{restrict:"A",transclude:!0,replace:!0,template:"<div ng-transclude></div>",scope:{share:"=",config:"="},link:function($scope,element,attrs){return!1}}})}(),function(){"use strict";function xplDisplayer($timeout,xplDisplayerOptions){function link(scope,element){var opt=xplDisplayerOptions;$timeout(function(){var control=element.find("."+opt.controlClass),content=element.find("."+opt.contentClass);control.on("click",function(){control.hasClass(opt.activeClass)?(control.removeClass(opt.activeClass),content.slideUp(opt.animateSpeed)):(control.addClass(opt.activeClass),content.slideDown(opt.animateSpeed))})})}var directive={link:link,restrict:"A"};return directive}angular.module("xpl.ui").directive("xplDisplayer",xplDisplayer).constant("xplDisplayerOptions",{controlClass:"js-displayer-control",contentClass:"js-displayer-content",activeClass:"active",animateSpeed:250}),xplDisplayer.$inject=["$timeout","xplDisplayerOptions"]}(),function(){"use strict";function xplDisqus($window){return{restrict:"E",scope:{config:"="},template:'<div id="disqus_thread"></div><a href="http://disqus.com" class="dsq-brlink"></a>',link:function(scope){function configChanged(){if(scope.config.disqus_shortname&&scope.config.disqus_identifier&&scope.config.disqus_url)if($window.disqus_shortname=scope.config.disqus_shortname,$window.disqus_identifier=scope.config.disqus_identifier,$window.disqus_url=scope.config.disqus_url,$window.disqus_title=scope.config.disqus_title,$window.disqus_category_id=scope.config.disqus_category_id,$window.disqus_disable_mobile=scope.config.disqus_disable_mobile,$window.disqus_config=function(){this.language=scope.config.disqus_config_language,this.page.remote_auth_s3=scope.config.disqus_remote_auth_s3,this.page.api_key=scope.config.disqus_api_key,this.sso=scope.config.disqus_sso,scope.config.disqus_on_ready&&(this.callbacks.onReady=[function(){scope.config.disqus_on_ready()}])},$window.DISQUS)$window.DISQUS.reset({reload:!0,config:function(){this.page.identifier=scope.config.disqus_identifier,this.page.url=scope.config.disqus_url,this.page.title=scope.config.disqus_title,this.language=scope.config.disqus_config_language,this.page.remote_auth_s3=scope.config.disqus_remote_auth_s3,this.page.api_key=scope.config.disqus_api_key}});else{var dsq=document.createElement("script");dsq.type="text/javascript",dsq.async=!0,dsq.src="//"+scope.config.disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(dsq)}}scope.$watch("config",configChanged,!0)}}}angular.module("xpl.ui").directive("xplDisqus",xplDisqus),xplDisqus.$inject=["$window"]}(),function(){"use strict";function xplHighlight($timeout){function link(scope,element){$timeout(function(){var highlightedText,text=element.html();highlightedText=text.replace(/\[::/g,'<span class="highlight">').replace(/::\]/g,"</span>"),element.html(highlightedText)})}var directive={link:link,restrict:"A"};return directive}angular.module("xpl.ui").directive("xplHighlight",xplHighlight),xplHighlight.$inject=["$timeout"]}(),function(){"use strict";function events(){return{priority:200,restrict:"A",controller:["$scope","$element","$attrs","$anchorScroll","$state","$location",function($scope,$element,$attrs,$anchorScroll,$state,$location){$scope.$watch($attrs.bindEvents,function(texExpression){function inlineReferences(referenceData){function findReference(referenceArray,anchor){return $.grep(referenceArray,function(item){return item.id==anchor})}function clearPopup(){window.hidePopupTimeout&&clearTimeout(window.hidePopupTimeout)}function hidePopupDelay(){window.hidePopupTimeout=setTimeout(hidePopup,750)}function hidePopup(){ref_pop.removeClass("flip").hide(),all_refs.removeClass("popup_active")}var all_refs=jQuery("#BodyWrapper").find('a[ref-type^="bibr"]');if(all_refs.length){jQuery("body").append('<div id="ref_popup" class="ref"></div>');var ref_pop=jQuery("#ref_popup"),max=jQuery("#article").offset().left+jQuery("#article").width(),width=ref_pop.width();all_refs.click(function(){jQuery("#references-section").find(".toggle-btn").parent().siblings("div.content").slideDown(),clearPopup(),hidePopup()}),all_refs.hover(function(e){var anchor=jQuery(this).attr("anchor"),reference=findReference(referenceData.references,anchor);clearPopup(),hidePopup();var left=jQuery(this).offset().left+19;left+width/2>max&&(left-=width+30,ref_pop.addClass("flip")),jQuery(this).addClass("popup_active"),ref_pop.show().css({top:jQuery(this).offset().top+"px",left:left+"px"}).html('<div class="header"></div><div class="body"></div><div class="footer"></div>');var html=(ref_pop.find("div.footer"),"<p><b>"+reference[0].order+".</b> "+reference[0].text+"</p>");jQuery("#ref_popup .body").append(html),jQuery("#ref_popup .footer").append('<a class="reference-link">View All References</a>'),jQuery("#ref_popup").on("click",".reference-link",function(){$state.go("document.full",{q:null,ctx:"references",part:null,tab:"references",section:null,anchor:null,tabfilter:null})})},function(e){hidePopupDelay()}),ref_pop.hover(function(e){clearPopup(),jQuery(this).show()},function(e){hidePopupDelay()})}}function addTableZoom(){function zoom_table(table_src){var layout_el=jQuery("#LayoutWrapper"),new_win=jQuery('<div class="table-win" />'),close_btn=jQuery('<span class="button"><span>X CLOSE</span></span>');close_btn.click(function(){jQuery(this).parent(".table-win").remove()}),new_win.append(close_btn);var new_img=jQuery(table_src);new_win.append(new_img),layout_el.prepend(new_win)}var parent_el=jQuery("#BodyWrapper"),all_tables=parent_el.find("div.figure.figure-full.table"),tbl_lnks=all_tables.find("div.zoom");tbl_lnks.click(function(){return zoom_table(jQuery(this.closest("div.figure.figure-full.table")).html()),!1})}function addImageZoom(){function zoom(img_src,alt_txt){var layout_el=jQuery("#LayoutWrapper"),new_win=jQuery('<div class="fig-win" />'),close_btn=jQuery('<span class="button"><span>X CLOSE</span></span>');layout_el.find("div.fig-win").remove(),close_btn.click(function(){jQuery(this).parent(".fig-win").remove()}),new_win.append(close_btn);var new_img=jQuery('<img src="'+img_src+'" alt="'+alt_txt+'" />');new_win.append(new_img),layout_el.prepend(new_win)}var parent_el=jQuery("#BodyWrapper"),all_figs_tables=parent_el.find("div.figure"),fig_lnks=all_figs_tables.find("div.img-wrap a");fig_lnks.click(function(){return zoom(jQuery(this).attr("href"),jQuery(this).find("img").attr("alt")),!1})}function linkNavigation(){function fullTextLink(){var link=j$(this),id=link.attr("anchor"),part=link.attr("part");id=id.replace("#",""),part==currentPart?($location.hash(id),$anchorScroll()):$state.go("document.full",{section:null,part:part+"|"+id,q:null,ctx:null,anchor:null})}function footNoteLink(){$state.go("document.full",{q:null,ctx:"footnotes",part:null,section:null,anchor:null})}jQuery("#article").on("click",".fulltext-link",fullTextLink),jQuery("#article").on("click",".footnote-link",footNoteLink),jQuery("#ref_popup").on("click",".fulltext-link",fullTextLink)}$element.html(texExpression);var currentPart=$scope.$eval($attrs.currentPart),referenceData=$scope.$eval($attrs.referenceData);$element.on("click","span.formula span.link",function(){var this_frml_trig=j$(this);this_frml_trig.toggleClass("open_lnk"),this_frml_trig.siblings("span.tex2jax_ignore").toggle()}),linkNavigation(),inlineReferences(referenceData),addImageZoom(),addTableZoom()})}]}}function footnoteEvents(){return{priority:200,restrict:"A",controller:["$scope","$element","$attrs","$anchorScroll","$state","$location",function($scope,$element,$attrs,$anchorScroll,$state,$location){function fullTextLink(){var link=j$(this),id=link.attr("anchor"),part=link.attr("part");id=id.replace("#",""),$state.go("document.full",{section:null,part:part+"|"+id,q:null,ctx:null,anchor:null})}function referenceLink(){$state.go("document.full",{q:null,ctx:"references",part:null,section:null,anchor:null})}jQuery("#footnotes-section").on("click",".reference-section",referenceLink),jQuery("#footnotes-section").on("click",".fulltext-link",fullTextLink)}]}}angular.module("xpl.ui").directive("bindEvents",events),angular.module("xpl.ui").directive("contextEvents",footnoteEvents)}(),function(){"use strict";function jwplayerAngular($compile){return{restrict:"EC",scope:{playerId:"@",setupVars:"=setup"},link:function(scope,element,attrs){var id=scope.playerId||"random_player_"+Math.floor(999999999*Math.random()+1),getTemplate=function(playerId){return'<div id="'+playerId+'"></div>'};element.html(getTemplate(id)),$compile(element.contents())(scope),jwplayer(id).setup(scope.setupVars)}}}angular.module("xpl.ui").directive("jwplayer",jwplayerAngular),jwplayerAngular.$inject=["$compile"]}(),function(){"use strict";function xplLazyLoad($window){function link(scope,element,attrs){var originalHeight=angular.element($window)[0].screen.height,toggleHeight=.9*originalHeight;angular.element($window).bind("scroll",function(){var y=angular.element($window)[0].scrollY||angular.element($window)[0].pageYOffset;y>=toggleHeight&&angular.element($window)[0].requestAnimationFrame(function(){scope.$apply(attrs.xplLazyLoad),toggleHeight+=1.5*originalHeight})})}var directive={link:link,restrict:"A"};return directive}angular.module("xpl.ui").directive("xplLazyLoad",xplLazyLoad),xplLazyLoad.$inject=["$window"]}(),function(){"use strict";function mathjax(){return{priority:100,restrict:"A",controller:mathJaxController,link:{post:postLink}}}function mathJaxController($scope,$element,$attrs){}function postLink(scope,elem,attrs){scope.$watch(attrs.mathjaxBind,function(newVal,oldVal,scope){MathJax.Hub.Config({"HTML-CSS":{styles:{".MathJax_Display":{"overflow-x":"auto"}}}}),MathJax.Hub.Queue(["Typeset",MathJax.Hub,elem[0]])})}angular.module("xpl.ui").directive("mathjaxBind",mathjax),mathJaxController.$inject=["$scope","$element","$attrs"]}(),function(){"use strict";function overflowEllipsis(){return{priority:100,restrict:"A",link:overFlowEllipsisLink}}function overFlowEllipsisLink(scope,elem,attr){function getDomElemWidth(){return domElem.scrollWidth}function watchForOverflow(){var jqliteElem=angular.element(domElem),className="overflow-ellipsis-parent";domElem.offsetWidth<domElem.scrollWidth?jqliteElem.parent().addClass(className):jqliteElem.parent().removeClass(className)}var domElem=elem[0];scope.$watch(getDomElemWidth,watchForOverflow)}angular.module("xpl.ui").directive("overflowEllipsis",overflowEllipsis)}(),function(){"use strict";function qtipPopover($templateCache,$compile){function link(scope,element,attrs){function initialize(){var defaults={content:{text:void 0===scope.qtipText?"<div></div>":"<div>"+scope.qtipText+"</div>",button:!!scope.qtipButtonClose&&jQuery('<div class="qtip-xpl-close"><i class="icon qtip-xpl-close-icon"></i></div>')},style:{classes:"qtip-popover"},show:{event:void 0===scope.qtipEventShow?"click":scope.qtipEventShow,solo:!0,effect:function(){constructTemplate(),$(this).append(popoverElement).show(),bindEvents(this),setActive()}},hide:{event:!scope.qtipButtonClose&&(void 0===scope.qtipEventHide?"unfocus":scope.qtipEventHide),effect:destroyTemplate},position:{my:"top center",at:"bottom center",target:element}},config=$.extend(!0,{},defaults,$(element).data("qtip-config"));popover=$(element).qtip(config)}function setActive(){$(element).addClass("js-popover-active")}function setInactive(){$(element).removeClass("js-popover-active")}function bindEvents(popover){function close(){popover.qtip().hide()}popover.find(".js-popover-close").on("click",close),popover.on("qtip-popover-close",close),$(element).on("qtip-popover-close",close)}function constructTemplate(){popoverScope=scope.$new(),popoverScope.originalAttributes=attrs,popoverScope.selectedItems=scope.selectedItems,popoverScope.close=function(){popover.qtip().hide(),$(element).removeClass("js-popover-active")},popoverElement=$compile(template)(popoverScope)}function destroyTemplate(){popoverElement.remove(),popoverScope.$destroy(),setInactive()}var popover,popoverElement,popoverScope,PATH_PREFIX="ui/actionbar/",template=$templateCache.get(PATH_PREFIX+attrs.content+".html");initialize()}var directive={link:link,restrict:"A",scope:{selectedItems:"=",qtipText:"@",qtipEventShow:"@",qtipEventHide:"@",qtipButtonClose:"="}};return directive}angular.module("xpl.ui").directive("qtipPopover",qtipPopover),qtipPopover.$inject=["$templateCache","$compile"]}(),function(){"use strict";function CitationsController($scope,userService){function onClick(){$("form#Citations").submit()}function onFormatChange(){this.include=this.format===FORMAT_DEFAULT?INCLUDE_DEFAULT:INCLUDE_ALT,this.disableInclude=this.format===FORMAT_DEFAULT,this.form.action=this.disableInclude?CSV_EXPORT_ENDPOINT:CITATION_ENDPOINT}function setFormat(){return selectedItems.length>0&&userPreferences?userPreferences.dowloadFormat:FORMAT_DEFAULT}function setInclude(format){return format===FORMAT_DEFAULT?INCLUDE_DEFAULT:selectedItems.length>0&&userPreferences?userPreferences.dowloadCitationFormat:INCLUDE_ALT}var FORMAT_DEFAULT="download-csv",INCLUDE_DEFAULT="citation-abstract",INCLUDE_ALT="citation-only",CITATION_ENDPOINT="/xpl/downloadCitations",CSV_EXPORT_ENDPOINT="/search/searchExport.jsp",selectedItems=$scope.$parent.selectedItems?$scope.$parent.selectedItems:[],userPreferences=userService.getUser().userPreferencesInfo;this.format=setFormat(),this.include=setInclude(this.format),this.disableInclude=this.format===FORMAT_DEFAULT,this.disableFormat=selectedItems.length<1,this.selectedItemsLength=selectedItems.length,this.form={action:this.disableInclude?CSV_EXPORT_ENDPOINT:CITATION_ENDPOINT,input:{exportCSV:{name:selectedItems.length<1?"bulkSetSize":"ar",value:selectedItems.length<1?"2000":selectedItems.join(",")},downloadCitation:{name:"recordIds",value:selectedItems.join(",")}}},this.onFormatChange=onFormatChange,this.onClick=onClick}angular.module("xpl.ui").controller("CitationsController",CitationsController),CitationsController.$inject=["$scope","userService"]}(),function(){"use strict";function CitationsPopoverController($scope,$state,userService){function onClick(){$("form#CitationsPopover").submit()}function setFormat(){return userPreferences?userPreferences.dowloadFormat:FORMAT_DEFAULT}function setInclude(){return userPreferences?userPreferences.dowloadCitationFormat:INCLUDE_DEFAULT}var INCLUDE_DEFAULT="citation-only",FORMAT_DEFAULT="download-ascii",CITATION_ENDPOINT="/xpl/downloadCitations",selectedItem=$state.params.id,userPreferences=userService.getUser().userPreferencesInfo;this.format=setFormat(),this.include=setInclude(),this.form={action:CITATION_ENDPOINT,input:{downloadCitation:{name:"recordIds",value:selectedItem}}},this.onClick=onClick}angular.module("xpl.ui").controller("CitationsPopoverController",CitationsPopoverController),CitationsPopoverController.$inject=["$scope","$state","userService"]}(),function(){"use strict";function CollabratecController($element,$scope,collabratecService){function onExportClick(){Xplore.component.globalNotification.options.autoHide=!1,collabratecService.exportRecords(selectedItems.join(",")).success(onExportSuccess).error(onExportFailure)}function onExportSuccess(response){Xplore.component.globalNotification.show(composeNotification(angular.fromJson(response.message)))}function onExportFailure(error){Xplore.component.globalNotification.show('<div class="Notification-collabratec"><span class="Notification-collabratec-total-failed">IEEE Collabratec&trade; is currently unavailable. Please try again later.</span></div>')}function composeNotification(response){var notification='<div class="Notification-collabratec">',totalSuccess=response.totalSucceeded+response.totalDuplicates,totalFailed=response.totalFailed;return totalSuccess>0&&(notification+='<span class="Notification-collabratec-total">'+totalSuccess+(totalSuccess>1?" records":" record")+" successfully exported.</span>"),totalFailed>0&&(notification+='<span class="Notification-collabratec-total Notification-collabratec-total-failed">'+totalFailed+(totalFailed>1?" records":" record")+" failed to export.</span>"),notification+='<a href="'+collabratecService.url+'" target="_blank" class="Notification-collabratec-link stats-ppct-notification">View in IEEE Collabratec&trade;</a></div>'}var selectedItems=$scope.$parent.selectedItems;this.selectedItemsLength=selectedItems.length,this.noItemsSelected=selectedItems.length<1,this.render,this.onExportClick=onExportClick,$element.addTag({tagNode:".stats-search-ppct",tagName:"EXPORT_COLLABRATEC",analyticType:"unica"})}angular.module("xpl.ui").controller("CollabratecController",CollabratecController),CollabratecController.$inject=["$element","$scope","collabratecService"]}(),function(){"use strict";function DocumentFigureController($scope,$element){var vm=this,attrs=$scope.$parent.originalAttributes;vm.figure=JSON.parse(attrs.figure)}angular.module("xpl.ui").controller("DocumentFigureController",DocumentFigureController),DocumentFigureController.$inject=["$scope","$element"]}(),function(){"use strict";function DocumentSearchController($element,$scope,$state,searchService,userService){function validate(){return ssc.param.length<3?(ssc.hasErrors=!0,ssc.validationErrors="Minimum search length is 3 characters.",!1):(ssc.hasErrors=!1,ssc.validationErrors=null,!0)}function onEnter($event){13==$event.keyCode&&onGoClick()}function onGoClick(){validate()&&(search(ssc.param),$element.trigger("qtip-popover-close"))}function search(str){$state.go($state.current.name,{q:str,ctx:null,part:null,anchor:null})}var ssc=this;ssc.param="",ssc.hasErrors=!1,ssc.validationErrors=null,ssc.onGoClick=onGoClick,ssc.onEnter=onEnter}angular.module("xpl.ui").controller("DocumentSearchController",DocumentSearchController),DocumentSearchController.$inject=["$element","$scope","$state","searchService","userService"]}(),function(){"use strict";function DocumentTextResizerController($scope,$element){var vm=this,attrs=$scope.$parent.originalAttributes,$content=$(attrs.contentSelector);vm.value=$content.css("font-size").replace("px",""),vm.min=parseInt(attrs.minSize||"12"),vm.max=parseInt(attrs.maxSize||"18"),vm.minStyle={"font-size":vm.min+"px"},vm.maxStyle={"font-size":vm.max+"px"},vm.reset=function(){$content.removeAttr("style"),vm.value=$content.css("font-size").replace("px","")},vm.onChange=function(){$content.css({"font-size":vm.value+"px"})}}angular.module("xpl.ui").controller("DocumentTextResizerController",DocumentTextResizerController),DocumentTextResizerController.$inject=["$scope","$element"]}(),function(){"use strict";function EmailPopoverController($scope,$state,$http){function onClick(form){$scope.submitted=!0,form.$invalid||this.sendEmail()}function sendEmail(){var challenge=Recaptcha.get_challenge(),response=Recaptcha.get_response();$http.get(EMAILER_ENDPOINT,{params:{your_name:this.name,your_email:this.myemail,recipients_email:this.recipient,recordIds:selectedItem,optional_message:this.optional_message,captcha_challenge:challenge,captcha_response:response}}).error(function(data,status,headers,config){onResponse(data)}).success(function(data,status,headers,config){onResponse(data)})}function onResponse(responseData){responseData.status?(Xplore.component.globalNotification.show(responseData.message),$scope.close()):(Recaptcha.reload(),$scope.emailer.errorMessage=responseData.message,$scope.emailer.showNotification=!0)}var EMAILER_ENDPOINT="/xpl/ngCaptchaEmailArticles",selectedItem=$state.params.id;this.name="",this.myemail="",this.recipient="",this.optional_message="",this.showNotification=!1,this.errorMessage,this.onClick=onClick,this.sendEmail=sendEmail,this.onResponse=onResponse}angular.module("xpl.ui").controller("EmailPopoverController",EmailPopoverController),EmailPopoverController.$inject=["$scope","$state","$http"]}(),function(){"use strict";function ManageAlertsPopoverController($scope,$element,$log,documentService,userService){function addCitationAlert(artnum){var user=userService.getUser();user&&(user.member||user.guest||user.individual)?documentService.addCitationAlert(artnum).then(addCitationAlertSuccess)["catch"](addCitationAlertFailure):Xplore.component.globalNotification.show("Login with an individual account to add Citation Alerts")}function addCitationAlertSuccess(data){var confirmMsg="<span>This document has been added to Citation Alerts</span>&nbsp;&nbsp;";confirmMsg+='<a class="Notification-button-link" href="/xpl/citation_alerts.jsp">Manage Citation Alerts</a>',Xplore.component.globalNotification.options.autoHide=!1,Xplore.component.globalNotification.show(confirmMsg)}function addCitationAlertFailure(error){Xplore.component.globalNotification.show("An unexpected error occurred. Try again or contact customer service."),$log.error(error)}var vm=this,attrs=$scope.$parent.originalAttributes;vm.artnum=attrs.artnum,vm.addCitationAlert=addCitationAlert}angular.module("xpl.ui").controller("ManageAlertsPopoverController",ManageAlertsPopoverController),ManageAlertsPopoverController.$inject=["$scope","$element","$log","documentService","userService"]}(),function(){"use strict";function SearchAlertController($scope,searchService,userService){function onSaveClick(){this.alertName.trim().length<1?(this.errorMessage=NULL_ALERT_ERROR,this.showNotification=!0):!this.alertName.match(ALERT_NAME_REGEX)||this.alertName.length>40?(this.errorMessage=INVALID_NAME_ERROR,this.showNotification=!0):(this.showNotification=!1,searchService.setAlert(this.alertName).then(onSetAlert))}function onSetAlert(response){response.data.status?(Xplore.component.globalNotification.show(response.data.message),$scope.close()):($scope.searchAlert.errorMessage=response.data.message,$scope.searchAlert.showNotification=!0)}var ALERT_NAME_REGEX=/^[A-Za-z0-9\s]+$/,INVALID_NAME_ERROR="Alert name can contain up to 40 alpha-numeric characters.",NULL_ALERT_ERROR="Alert Name is a required field.";this.email=userService.getUser().emailAddress,this.alertName="",this.showNotification=!1,this.errorMessage="",this.onSaveClick=onSaveClick,this.onSetAlert=onSetAlert}angular.module("xpl.ui").controller("SearchAlertController",SearchAlertController),SearchAlertController.$inject=["$scope","searchService","userService"]}(),function(){"use strict";function xplBreadcrumb($timeout,searchState){function link(scope,element){$timeout(function(){function onClick(node){var crumb=generateFacet(node);isLastCrumb()?removeCollection():removeCrumb(this),searchState.pop(crumb.facet,crumb.value).update()}function removeCrumb(crumb){var $crumb=$(crumb).parents(".js-crumb");$crumb.animate({opacity:0},250),$timeout(function(){$crumb.animate({width:0},{easing:"easeInOutCubic",duration:500,complete:function(){$crumb.remove()}})},500)}function removeCollection(){element.animate({height:0},{easing:"easeInOutCubic",duration:250,complete:function(){element.remove()}})}function isLastCrumb(){return 1===element.find(".js-crumb").length}function generateFacet(crumb){return crumb.id=crumb.id.toString(),"refinement"===crumb.type&&(crumb.type="refinements"),"search"===crumb.type&&(crumb.type=searchState.$params[searchState.$facets.query]===crumb.id?"query":"within"),{facet:searchState.$facets[crumb.type],value:crumb.id}}scope.onClick=onClick})}var directive={link:link,replace:!0,restrict:"EA",templateUrl:"ui/breadcrumbs/breadcrumb.html",scope:{breadcrumb:"="}};return directive}angular.module("xpl.ui").directive("xplBreadcrumb",xplBreadcrumb),xplBreadcrumb.$inject=["$timeout","searchState"]}(),function(){"use strict";function xplBreadstick(){
function link(scope,element,attrs){}var directive={link:link,restrict:"EA",templateUrl:"ui/breadstick/breadstick.html",scope:{crumbs:"="}};return directive}angular.module("xpl").directive("xplBreadstick",xplBreadstick)}(),function(){"use strict";function xplButtonGroup(searchState,$sce,$stateParams,userService){function link(scope,element){function toggleContent(){scope.allContent=!scope.allContent}function showButtonGroup(){var user=userService.getUser();return!(!user.institute&&!user.member||!user.guest)&&void("standards"===$stateParams.contentType)}scope.showButtonGroup=showButtonGroup(),scope.allContent=!0,scope.toggleContent=toggleContent}var directive={link:link,restrict:"EA",scope:{keyword:"="},templateUrl:"ui/button-group/button-group.html"};return directive}angular.module("xpl").directive("xplButtonGroup",xplButtonGroup),xplButtonGroup.$inject=["searchState","$sce","$stateParams","userService"]}(),function(){"use strict";function xplCarousel(){function controller($log,$scope,$state,utilsService){$scope.prevPage=function(){$scope.currentPage<=0||($scope.currentPage-=1,setPagingStates())},$scope.nextPage=function(){$scope.currentPage>=$scope.totalPages-1||($scope.currentPage+=1,setPagingStates())},$scope.gotoPage=function(page){page<0||page>$scope.totalPages-1||($scope.currentPage=page,setPagingStates())},$scope.isCurrentPage=function(page){return $scope.currentPage===page};var setPagingStates=function(){$scope.hasPrevPage=$scope.currentPage>0,$scope.hasNextPage=$scope.totalPages-1>$scope.currentPage};$scope.navToViewAllState=function(viewAllState,anchor){if(!viewAllState.name)return void $log.error("View All State name not provided");viewAllState.params||(viewAllState.params={});var anchorToUse="undefined"==typeof anchor?viewAllState.params.anchor:anchor;$state.current.name===viewAllState.name&&$state.params.ctx==viewAllState.params.ctx&&$state.params.section==viewAllState.params.section?anchorToUse?($state.go(viewAllState.name,{anchor:anchorToUse},{notify:!1}),utilsService.scrollTo(anchorToUse,80)):utilsService.scrollTo("full-text-section",80):(anchorToUse&&(viewAllState.params.anchor=anchorToUse),$state.go(viewAllState.name,viewAllState.params))};var init=function(){$scope.currentPage=0,$scope.pageSize=parseInt($scope.pageSize||3),$scope.totalItems=$scope.items.length||0,$scope.totalPages=Math.ceil($scope.totalItems/$scope.pageSize),$scope.pages=Array.apply(null,Array($scope.totalPages)).map(function(x,i){return i}),$scope.carouselSizeClass="carousel-size-"+$scope.pageSize,setPagingStates()};init(),$scope.$watchGroup(["items","pageSize"],init)}var directive={controller:controller,replace:!0,restrict:"EA",templateUrl:"ui/carousel/carousel.html",transclude:!0,scope:{items:"=",itemTemplateUrl:"@",pageSize:"@",viewAllState:"="}};return directive}angular.module("xpl.ui").directive("xplCarousel",xplCarousel)}(),function(){"use strict";function xplCollectionTabs(browseConstants){function link(scope,element){function getCurIndex(){return curCollectionIndex}function switchCollectionTab(index){curCollectionIndex=index,scope.curCollectionTopics=scope.collectionTabs[curCollectionIndex].topics}scope.switchCollectionTab=switchCollectionTab,scope.getCurIndex=getCurIndex;var curCollectionIndex=0;scope.collectionTabs=browseConstants.standardsCollections,switchCollectionTab(curCollectionIndex)}var directive={link:link,scope:{user:"="},restrict:"EA",replace:!0,templateUrl:"ui/collection-tabs/collection-tabs.html"};return directive}angular.module("xpl").directive("xplCollectionTabs",xplCollectionTabs),xplCollectionTabs.$inject=["browseConstants"]}(),function(){"use strict";function xplDocumentSearchItems($injector){function prelink($scope){$scope.getContextUrl=function(){return"ui/document/"+$scope.context+".html"}}function postlink($scope){var $jumpLink=$("#jump-link");$jumpLink.qtip({content:{text:$jumpLink.next("div")},hide:{event:"unfocus"},position:{my:"top center",at:"bottom center"},show:{event:"click",solo:!0},style:{classes:"qtip-popover all-figures-jump-toc document-toc"}})}function xplDocumentContext($anchorScroll,$location,$log,$state,productService){function initialize(){"citations"===vm.context&&(vm.loadCitationType=void 0,vm.loadMoreCitations=loadMoreCitations)}function gotoFullText(id){$state.go("document.full",{q:null,section:id,ctx:null,anchor:null})}function scrollTo(id){$location.hash(id),$anchorScroll(),$jumpLink.qtip().hide()}function loadMoreCitations(type){vm.loading=!0,type=type||"ieee",vm.loadCitationType=type;var citations;citations="ieee"===type||"nonIeee"===type?vm.contextData.paperCitations[type]:vm.contextData[type+"Citations"];var params={type:type,start:citations.length+1,count:100};productService.getProductDetail(vm.articleNumber,vm.context,params).then(getProductDetailSuccess)["catch"](catchPromiseFailure)}function getProductDetailSuccess(data){"ieee"===vm.loadCitationType||"nonIeee"===vm.loadCitationType?vm.contextData.paperCitations[vm.loadCitationType]=vm.contextData.paperCitations[vm.loadCitationType].concat(data.paperCitations[vm.loadCitationType]):"patent"===vm.loadCitationType&&(vm.contextData[vm.loadCitationType+"Citations"]=vm.contextData[vm.loadCitationType+"Citations"].concat(data[vm.loadCitationType+"Citations"])),vm.loading=!1}function catchPromiseFailure(error){$log.error(error),vm.error=!0,vm.loading=!1}var vm=this,$jumpLink=$("#jump-link");vm.loading=!1,vm.error=!1,vm.gotoFullText=gotoFullText,vm.scrollTo=scrollTo,initialize()}var directive={bindToController:{articleNumber:"@",context:"@",contextData:"="},link:{post:postlink,pre:prelink},replace:!0,restrict:"EA",controllerAs:"vm",controller:xplDocumentContext,scope:{context:"@"},template:'<div ng-include="getContextUrl()"></div>'};return xplDocumentContext.$inject=["$anchorScroll","$location","$log","$state","productService"],directive}angular.module("xpl.ui").directive("xplDocumentContext",xplDocumentSearchItems),xplDocumentSearchItems.$inject=["$injector"]}(),function(){"use strict";function xplReferenceItem(){return{bindToController:{item:"="},controller:ReferenceItemComponent,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"ui/document/reference-item.html",transclude:!0}}function ReferenceItemComponent(){}angular.module("xpl.common").directive("xplReferenceItem",xplReferenceItem)}(),function(){"use strict";function xplDocumentSearchItems($injector){function link($scope){}function xplDocumentSearchController($state,$location,$anchorScroll,$stateParams){function gotoFullText(part,id){$state.go("document.full",{part:part+"|"+id,section:null,ctx:null,q:vm.queryText,anchor:null})}var vm=this;vm.items=vm.searchReferences.response.result,vm.count=vm.searchReferences.response.count,vm.gotoFullText=gotoFullText,vm.queryText=$stateParams.q}var directive={bindToController:{searchReferences:"="},link:link,replace:!0,restrict:"EA",controllerAs:"vm",controller:xplDocumentSearchController,scope:{},templateUrl:"ui/document/search-items.html"};return directive}angular.module("xpl.ui").directive("xplDocumentSearchItems",xplDocumentSearchItems),xplDocumentSearchItems.$inject=["$injector"]}(),function(){"use strict";function xplDynamicContent($compile){function link(scope,element,attrs){var el;attrs.$observe("content",function(tpl){angular.isDefined(tpl)&&(el=$compile(tpl)(scope),element.html(el))})}var directive={replace:!0,restrict:"A",scope:!0,link:link};return directive}angular.module("xpl.ui").directive("xplDynamicContent",xplDynamicContent),xplDynamicContent.$inject=["$compile"]}(),function(){"use strict";function xplFacetDate(searchState){function link(scope,element){function onClickButton(){var queryParam=scope.range[0]+"_"+scope.range[1]+"_"+scope.name.replace(/\ /g,"_");searchState.clear(searchState.$facets.range).push(searchState.$facets.range,queryParam).update()}function watchRange(newValue,oldValue){newValue!==oldValue&&(scope.showApply=!0)}function updateRange(){var range0=parseInt(scope.sliderRange[0]),range1=parseInt(scope.sliderRange[1]);scope.sliderRange[0]=getClosestValue(range0),scope.sliderRange[1]=getClosestValue(range1),scope.range=angular.copy(scope.sliderRange),scope.$apply()}function onKeyUpInput(e){scope.range[0]>scope.range[1]||8!==e.keyCode&&(38!==e.keyCode&&40!==e.keyCode||getPreviousOrNext(e),e.shiftKey||e.keyCode>57&&e.keyCode<91||e.keyCode>105&&e.keyCode<112||e.keyCode>145?e.preventDefault():scope.isRange?scope.sliderRange=angular.copy(scope.range):scope.range[1]=scope.range[0])}function syncSlider(e){var currentValue=e.currentTarget.value,rangeID="from"===e.currentTarget.name?0:1;scope.range[rangeID]=getClosestValue(currentValue),scope.range[0]>scope.range[1]&&(scope.range[1]=scope.range[0]),scope.sliderRange=angular.copy(scope.range)}function onBlurInput(e){syncSlider(e)}function getClosestValue(input){if(!_.includes(scope.values,parseInt(input))){var previous,length=scope.values.length;if(length<2)return scope.values[length-1];for(previous=Math.abs(scope.values[--length]-input);length--&&!(previous<(previous=Math.abs(scope.values[length]-input))););return scope.values[length+1]}return input}function getPreviousOrNext(e){var currentIndex=_.indexOf(scope.values,parseInt(getClosestValue(e.currentTarget.value))),rangeID="from"===e.currentTarget.name?0:1;38===e.keyCode?currentIndex<scope.values.length-1&&(scope.range[rangeID]=scope.values[currentIndex+1]):currentIndex>0&&(scope.range[rangeID]=scope.values[currentIndex-1]),e.preventDefault()}function toggleRange(){scope.isRange=!scope.isRange,scope.isRange?(scope.range[1]=scope.values[scope.values.length-1],scope.sliderRange=angular.copy(scope.range)):scope.range[1]=scope.range[0]}function toNumber(entry){var num=parseInt(entry.name);if(_.isFinite(num))return num}scope.values=_.map(scope.entries,toNumber),scope.range=[scope.values[0],scope.values[scope.values.length-1]],scope.sliderRange=angular.copy(scope.range),scope.toggleRange=toggleRange,scope.$watchCollection("range",watchRange),scope.showApply=!1,scope.onKeyUpInput=onKeyUpInput,scope.onBlurInput=onBlurInput,scope.updateRange=updateRange,scope.isRange=!0,element.find("button[type=submit]").on("click",onClickButton)}var directive={link:link,templateUrl:"ui/facets/facet-date.html",scope:{entries:"=",name:"="},replace:!0,requires:"^xplFacet",restrict:"EA"};return directive}angular.module("xpl.ui").directive("xplFacetDate",xplFacetDate),xplFacetDate.$inject=["searchState"]}(),function(){"use strict";function xplFacetList($state,typeaheadService){function link(scope,element,attrs){function getSuggestions(term,refinement){return typeaheadService.getSuggestions($state.params,term,refinement.name,refinement.id)}function onClick(id,state){toggleSelection(id,state)}function onSelect(item){toggleSelection(item.id,item.isChecked)}function getDisplayLimit(){return"Publisher"===refinement.name||"Content Type"===refinement.name?refinement.children.length:attrs.displayLimit}function getPlaceholderText(){var placeholder="Enter ",refinementName=refinement.name.split(/[, ]+/).pop();return placeholder+="Author"===refinementName||"Country"===refinementName?refinementName+" Name":refinementName}function toggleSelection(id,state){state?scope.$parent.selected.push(id):scope.$parent.selected.pop(id)}var refinement=scope.$parent.refinement;scope.displayLimit=getDisplayLimit(),scope.placeholder=getPlaceholderText(),scope.searchThreshold=24,scope.showMore=refinement.children.length>scope.displayLimit,scope.onClick=onClick,scope.onSelect=onSelect,scope.getSuggestions=getSuggestions}var directive={link:link,replace:!0,requires:"^xplFacet",restrict:"EA",scope:!1,templateUrl:"ui/facets/facet-list.html"};return directive}angular.module("xpl.ui").directive("xplFacetList",xplFacetList),xplFacetList.$inject=["$state","typeaheadService"]}(),function(){"use strict";function xplFacetNest(){function link(scope,element,attrs){}var directive={link:link,replace:!0,requires:"^xplFacet",restrict:"EA",scope:!1,templateUrl:"ui/facets/facet-nest.html"};return directive}angular.module("xpl.ui").directive("xplFacetNest",xplFacetNest)}(),function(){"use strict";function FacetsCtrl($scope,$log,$filter,searchState){function updateRefinements(){searchState.push(searchState.$facets.refinements,$scope.selected).update()}function init(){$scope.refinement=$scope.$parent.refinement,$scope.refinement.name.indexOf("Year")!==-1?$scope.facetType="date":"nest"===$scope.refinement.type&&($scope.facetType="nest")}$scope.active=!1,$scope.selected=[],$scope.facetType="list",$scope.parseInt=parseInt,$scope.updateRefinements=updateRefinements,init()}angular.module("xpl.ui").controller("FacetsCtrl",FacetsCtrl),FacetsCtrl.$inject=["$scope","$log","$filter","searchState"]}(),function(){"use strict";function xplFacet(){function link(scope,element,attrs,controller){var $displayToggle=element.find(".js-toggle"),$displayTitle=element.find(".js-header"),$content=element.find(".js-content");controller.id<2&&($content.show(),scope.active=!0),$displayTitle.on("click",function(){$displayToggle.hasClass("fa-angle-down")?$content.slideDown(250):$content.slideUp(250)})}var xplFacet={link:link,templateUrl:"ui/facets/facet.html",controller:"FacetsCtrl as FacetsCtrl",bindToController:!0,replace:!0,restrict:"EA",scope:{refinement:"=",id:"="}};return xplFacet}angular.module("xpl.ui").directive("xplFacet",xplFacet)}(),function(){var MODULE_NAME,SLIDER_TAG,angularize,contain,events,gap,halfWidth,hide,module,offset,offsetLeft,pixelize,qualifiedDirectiveDefinition,roundStep,show,sliderDirective,width;MODULE_NAME="ui.slider",SLIDER_TAG="slider",angularize=function(element){return angular.element(element)},pixelize=function(position){return""+position+"px"},hide=function(element){return element.css({opacity:0})},show=function(element){return element.css({opacity:1})},offset=function(element,position){return element.css({left:position})},halfWidth=function(element){return element[0].offsetWidth/2},offsetLeft=function(element){return element[0].offsetLeft},width=function(element){return element[0].offsetWidth},gap=function(element1,element2){return offsetLeft(element2)-offsetLeft(element1)-width(element1)},contain=function(value){return isNaN(value)?value:Math.min(Math.max(0,value),100)},roundStep=function(value,precision,step,floor){var decimals,remainder,roundedValue,steppedValue;return null===floor&&(floor=0),null===step&&(step=1/Math.pow(10,precision)),remainder=(value-floor)%step,steppedValue=remainder>step/2?value+step-remainder:value-remainder,decimals=Math.pow(10,precision),roundedValue=steppedValue*decimals/decimals,parseFloat(roundedValue.toFixed(precision))},events={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"}},sliderDirective=function($timeout){return{restrict:"E",scope:{floor:"@",ceiling:"@",values:"=?",step:"@",highlight:"@",precision:"@",buffer:"@",dragstop:"@",ngModel:"=?",ngModelLow:"=?",ngModelHigh:"=?"},template:'<div class="bar"><div class="selection"></div></div>\n<div class="handle low"></div><div class="handle high"></div>\n<div class="bubble limit low">{{ values.length ? values[floor || 0] : floor }}</div>\n<div class="bubble limit high">{{ values.length ? values[ceiling || values.length - 1] : ceiling }}</div>\n<div class="bubble value low">{{ values.length ? values[local.ngModelLow || local.ngModel || 0] : local.ngModelLow || local.ngModel || 0 }}</div>\n<div class="bubble value high">{{ values.length ? values[local.ngModelHigh] : local.ngModelHigh }}</div>',compile:function(element,attributes){var high,low,range,watchables;return range=null===attributes.ngModel&&null!==attributes.ngModelLow&&null!==attributes.ngModelHigh,low=range?"ngModelLow":"ngModel",high="ngModelHigh",watchables=["floor","ceiling","values",low],range&&watchables.push(high),{post:function(scope,element,attributes){var bar,barWidth,bound,ceilBub,dimensions,e,flrBub,handleHalfWidth,highBub,lowBub,maxOffset,maxPtr,maxValue,minOffset,minPtr,minValue,ngDocument,offsetRange,selection,updateDOM,upper,valueRange,w,_i,_j,_len,_len1,_ref,_ref1;if(_ref=function(){var _i,_len,_ref,_results;for(_ref=element.children(),_results=[],_i=0,_len=_ref.length;_i<_len;_i++)e=_ref[_i],_results.push(angularize(e));return _results}(),bar=_ref[0],minPtr=_ref[1],maxPtr=_ref[2],flrBub=_ref[3],ceilBub=_ref[4],lowBub=_ref[5],highBub=_ref[6],selection=angularize(bar.children()[0]),!range){for(_ref1=[maxPtr,highBub],_i=0,_len=_ref1.length;_i<_len;_i++)upper=_ref1[_i],upper.remove();attributes.highlight||selection.remove()}for(scope.local={},scope.local[low]=scope[low],scope.local[high]=scope[high],bound=!1,ngDocument=angularize(document),handleHalfWidth=barWidth=minOffset=maxOffset=minValue=maxValue=valueRange=offsetRange=void 0,dimensions=function(){var value,_j,_len1,_ref2;for(null===scope.step&&(scope.step=1),null===scope.floor&&(scope.floor=0),null===scope.precision&&(scope.precision=0),range||(scope.ngModelLow=scope.ngModel),(null!==(_ref2=scope.values)?_ref2.length:void 0)&&null===scope.ceiling&&(scope.ceiling=scope.values.length-1),scope.local[low]=scope[low],scope.local[high]=scope[high],_j=0,_len1=watchables.length;_j<_len1;_j++)value=watchables[_j],"number"==typeof value&&(scope[value]=roundStep(parseFloat(scope[value]),parseInt(scope.precision),parseFloat(scope.step),parseFloat(scope.floor)));return handleHalfWidth=halfWidth(minPtr),barWidth=width(bar),minOffset=0,maxOffset=barWidth-width(minPtr),minValue=parseFloat(scope.floor),maxValue=parseFloat(scope.ceiling),valueRange=maxValue-minValue,offsetRange=maxOffset-minOffset},updateDOM=function(){var bind,percentOffset,percentValue,pixelsToOffset,setBindings,setPointers;return dimensions(),percentOffset=function(offset){return contain((offset-minOffset)/offsetRange*100)},percentValue=function(value){return contain((value-minValue)/valueRange*100)},pixelsToOffset=function(percent){return pixelize(percent*offsetRange/100)},setPointers=function(){var newHighValue,newLowValue;switch(offset(ceilBub,pixelize(barWidth-width(ceilBub))),newLowValue=percentValue(scope.local[low]),offset(minPtr,pixelsToOffset(newLowValue)),offset(lowBub,pixelize(offsetLeft(minPtr)-halfWidth(lowBub)+handleHalfWidth)),offset(selection,pixelize(offsetLeft(minPtr)+handleHalfWidth)),!0){case range:return newHighValue=percentValue(scope.local[high]),offset(maxPtr,pixelsToOffset(newHighValue)),offset(highBub,pixelize(offsetLeft(maxPtr)-halfWidth(highBub)+handleHalfWidth)),selection.css({width:pixelsToOffset(newHighValue-newLowValue)});case"right"===attributes.highlight:return selection.css({width:pixelsToOffset(110-newLowValue)});case"left"===attributes.highlight:return selection.css({width:pixelsToOffset(newLowValue)}),offset(selection,0)}},bind=function(handle,bubble,ref,events){var currentRef,onEnd,onMove,onStart;return currentRef=ref,onEnd=function(){return bubble.removeClass("active"),handle.removeClass("active"),ngDocument.unbind(events.move),ngDocument.unbind(events.end),scope.dragstop&&(scope[high]=scope.local[high],scope[low]=scope.local[low]),currentRef=ref,scope.$apply()},onMove=function(event){var eventX,newOffset,newPercent,newValue,_ref2,_ref3,_ref4,_ref5;if(eventX=event.clientX||(null!==(_ref2=event.touches)&&null!==(_ref3=_ref2[0])?_ref3.clientX:void 0)||(null!==(_ref4=event.originalEvent)&&null!==(_ref5=_ref4.changedTouches)?_ref5[0].clientX:void 0)||0,newOffset=eventX-element[0].getBoundingClientRect().left-handleHalfWidth,newOffset=Math.max(Math.min(newOffset,maxOffset),minOffset),newPercent=percentOffset(newOffset),newValue=minValue+valueRange*newPercent/100,range)switch(currentRef){case low:newValue>scope.local[high]?(currentRef=high,minPtr.removeClass("active"),lowBub.removeClass("active"),maxPtr.addClass("active"),highBub.addClass("active"),setPointers()):scope.buffer>0&&(newValue=Math.min(newValue,scope.local[high]-scope.buffer));break;case high:newValue<scope.local[low]?(currentRef=low,maxPtr.removeClass("active"),highBub.removeClass("active"),minPtr.addClass("active"),lowBub.addClass("active"),setPointers()):scope.buffer>0&&(newValue=Math.max(newValue,parseInt(scope.local[low])+parseInt(scope.buffer)))}return newValue=roundStep(newValue,parseInt(scope.precision),parseFloat(scope.step),parseFloat(scope.floor)),scope.local[currentRef]=newValue,scope.dragstop||(scope[currentRef]=newValue),setPointers(),scope.$apply()},onStart=function(event){return dimensions(),bubble.addClass("active"),handle.addClass("active"),setPointers(),event.stopPropagation(),event.preventDefault(),ngDocument.bind(events.move,onMove),ngDocument.bind(events.end,onEnd)},handle.bind(events.start,onStart)},setBindings=function(){var method,_j,_len1,_ref2;for(_ref2=["touch","mouse"],_j=0,_len1=_ref2.length;_j<_len1;_j++)method=_ref2[_j],bind(minPtr,lowBub,low,events[method]),bind(maxPtr,highBub,high,events[method]);return bound=!0},bound||setBindings(),setPointers()},$timeout(updateDOM),_j=0,_len1=watchables.length;_j<_len1;_j++)w=watchables[_j],scope.$watch(w,updateDOM,!0);return window.addEventListener("resize",updateDOM)}}}}},qualifiedDirectiveDefinition=["$timeout",sliderDirective],(module=function(window,angular){return angular.module(MODULE_NAME,[]).directive(SLIDER_TAG,qualifiedDirectiveDefinition)})(window,window.angular)}.call(this),function(){"use strict";function xplFigure($injector){function link($scope){$scope.figureTypeClass="figure-"+$scope.layout}var directive={link:link,replace:!0,restrict:"EA",scope:{figure:"=",layout:"@"},controllerAs:"vm",controller:function($state,$location,$anchorScroll){var vm=this;vm.scrollTo=function(part,id){id=id.replace("#",""),$state.go("document.full",{part:part+"|"+id,section:null,ctx:null,q:null,anchor:null})}},templateUrl:"ui/figures/figure.html"};return directive}angular.module("xpl.ui").directive("xplFigure",xplFigure),xplFigure.$inject=["$injector"]}(),function(){"use strict";function xplFigures(){function Figurescontroller($scope,$attrs){function initialize(){if(void 0!==vm.figures){var mediaPath="";null!==vm.mediaPath&&""!==vm.mediaPath&&(mediaPath=vm.mediaPath+"/");var maxlimit=30;for(vm.figures.length>maxlimit&&"all"!==$attrs.layout&&vm.figures.splice(30,vm.figures.length-30),i=0;i<vm.figures.length;i++){var figure=vm.figures[i];figure.graphic.glance=mediaPath+figure.graphic.glance,figure.graphic.large=mediaPath+figure.graphic.large,figure.graphic.hires=mediaPath+figure.graphic.hires,figure.graphic.small=mediaPath+figure.graphic.small}}}var vm=this;vm.figuresTypeClass="figures-"+$scope.layout,initialize()}var directive={controller:Figurescontroller,bindToController:{figures:"=",layout:"@",mediaPath:"@"},replace:!0,controllerAs:"vm",restrict:"EA",templateUrl:"ui/figures/figures.html",transclude:!0,scope:{}};return directive}angular.module("xpl.ui").directive("xplFigures",xplFigures)}(),function(){"use strict";function xplFilter($injector){function link(scope,element,attrs){scope.service=new($injector.get(scope.serviceName))(scope.$parent.$parent.totalRecords,attrs.label),scope.ngModel=scope.service.defaultItem(),scope.onChange=function(newVal){scope.service.onChange(newVal),scope.onNgChange&&scope.onNgChange()},scope.$parent.$parent.$watch("totalRecords",function(newValue,oldValue){newValue!==oldValue&&(scope.service.totalRecords=newValue,scope.service=new($injector.get(scope.serviceName))(scope.$parent.$parent.totalRecords,attrs.label),scope.ngModel=scope.service.defaultItem())})}var directive={link:link,replace:!0,require:"^xplFilters",restrict:"EA",scope:{ngModel:"=",serviceName:"@",onNgChange:"&"},templateUrl:"ui/filters/filter.html"};return directive}angular.module("xpl.ui").directive("xplFilter",xplFilter),xplFilter.$inject=["$injector"]}(),function(){"use strict";function xplFilters(){function controller($scope){}var directive={controller:controller,replace:!0,restrict:"EA",templateUrl:"ui/filters/filters.html",transclude:!0,scope:{totalRecords:"="}};return directive}angular.module("xpl.ui").directive("xplFilters",xplFilters)}(),function(){"use strict";function directive($state,$timeout,browseConstants){function link(scope,element,attrs){var content,contentType=scope.record.contentType;$timeout(function(){content=element.find(".js-history-content"),scope.showHistory&&content.slideDown()}),"conferences"===contentType&&void 0!==scope.record.titleHistory&&(contentType+="Home"),scope.historyUri=browseConstants.historyUris[contentType],scope.showHistory=!!$state.params.queryText,scope.toggleHistory=function(){scope.showHistory?(scope.showHistory=!1,content.slideUp()):(scope.showHistory=!0,content.slideDown())}}var directive={link:link,restrict:"E",scope:{record:"="},templateUrl:"ui/items/browse-result.html"};return directive}angular.module("xpl.ui").directive("xplBrowseResult",directive),directive.$inject=["$state","$timeout","browseConstants"]}(),function(){"use strict";function xplLittleLinks($rootScope,$stateParams){function link(scope){scope.title=$stateParams.contentType&&"standards"===$stateParams.contentType?"Browse Standard Range":"Browse Titles"}var directive={link:link,restrict:"EA",scope:{index:"=",selected:"="},templateUrl:"ui/little-links/little-links.html"};return directive}angular.module("xpl").directive("xplLittleLinks",xplLittleLinks),xplLittleLinks.$inject=["$rootScope","$stateParams"]}(),function(){"use strict";angular.module("xpl.ui").constant("xplPaginationConstants",{itemsPerPage:25,boundaryLinks:!0,directionLinks:!0,firstText:" First",previousText:"<",nextText:">",lastText:"Last ",rotate:!0,maxSize:5})}(),function(){"use strict";function xplPagination($parse,xplPaginationConstants){function link(scope,element,attrs,ctrls){function getConfigParameter(parameter){return angular.isDefined(attrs[parameter])?scope.$parent.$eval(attrs[parameter]):xplPaginationConstants[parameter]}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;number<=endPage;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(endPage<totalPages){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}}return pages}function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function newRender(){originalRender(),scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}function watchMaxSize(value){maxSize=parseInt(value,10),xplPaginationCtrl.render()}var xplPaginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){var maxSize=getConfigParameter("maxSize"),rotate=getConfigParameter("rotate");scope.boundaryLinks=getConfigParameter("boundaryLinks"),scope.directionLinks=getConfigParameter("directionLinks"),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),watchMaxSize),xplPaginationCtrl.init(ngModelCtrl,xplPaginationConstants);var originalRender=xplPaginationCtrl.render;xplPaginationCtrl.render=newRender}}var directive={controller:"xplPaginationController",link:link,replace:!0,require:["xplPagination","?ngModel"],restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},templateUrl:"ui/pagination/pagination.html"};return directive}function xplPaginationController($scope,$attrs,$parse){function getText(key){return $scope[key+"Text"]||self.config[key+"Text"]}function noNext(){return $scope.page===$scope.totalPages}function noPrevious(){return 1===$scope.page}function selectPage(page){$scope.page!==page&&page>0&&page<=$scope.totalPages&&(ngModelCtrl.$setViewValue(page),ngModelCtrl.$render())}function watchTotalItems(){$scope.totalPages=self.calculateTotalPages()}function watchTotalPages(value){setNumPages($scope.$parent,value),$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()}var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;$scope.selectPage=selectPage,$scope.getText=getText,$scope.noPrevious=noPrevious,$scope.noNext=noNext,$scope.$watch("totalItems",watchTotalItems),$scope.$watch("totalPages",watchTotalPages),this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_,this.config=config,ngModelCtrl.$render=function(){self.render()},$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1}}angular.module("xpl.ui").controller("xplPaginationController",xplPaginationController).directive("xplPagination",xplPagination),xplPagination.$inject=["$parse","xplPaginationConstants"],xplPaginationController.$inject=["$scope","$attrs","$parse"]}(),function(){"use strict";function xplSearchWithin(){return{bindToController:{placeholder:"@"},controller:SearchWithin,controllerAs:"vm",replace:!0,restrict:"E",scope:{},templateUrl:"ui/search-within/search-within.html"}}function SearchWithin($filter,$sce,$state,typeaheadService){function searchWithinResults(){vm.searchWithin.length>2&&($state.params.searchWithin||($state.params.searchWithin=[]),$state.params.searchWithin.push($filter("endecaSearchValues")($sce.parseAsText(vm.searchWithin))),$state.go($state.current,$state.params,{reload:!0}))}function getSuggestions(){return typeaheadService.getSuggestions($state.params,vm.searchWithin,void 0,3410)}var vm=this;vm.searchWithinResults=searchWithinResults,vm.getSuggestions=getSuggestions}angular.module("xpl.ui").directive("xplSearchWithin",xplSearchWithin),SearchWithin.$inject=["$filter","$sce","$state","typeaheadService"]}(),function(){"use strict";function xplSearchbar($sce,$state,searchService,searchState,typeaheadService,utilService){function link(scope,element){function getSuggestions(){return typeaheadService.getSuggestions({newsearch:$state.params.newsearch},scope.search.basic.input.query,void 0,3410)}function onTypeaheadReturn(e){return e.preventDefault(),!1}function submitQuery(e){return e.preventDefault(),!!validate()&&(removeInputs(),void activeSearchType.submit())}function toggleSearchType(searchType){_.forEach(scope.search,function(st){st.isActive=!1}),searchType.isActive=!0,activeSearchType=searchType,notification.hide()}function watchSearchResults(results){if(void 0===results||$state.params.matchBoolean&&"false"!==$state.params.matchBoolean)toggleSearchType(scope.search.basic);else{unbindSearchResults();var breadcrumbs=searchService.searchBreadcrumb;breadcrumbs&&initializeInputs(breadcrumbs,searchService.queryResult.searchType),toggleSearchType(scope.search[searchService.queryResult.searchType])}}function initializeInputs(breadcrumbs,searchType){"basic"===searchType?scope.search.basic.input.query=$sce.parseAsText(breadcrumbs[0].value):_.forEach(breadcrumbs,function(breadcrumb){breadcrumbMappings[breadcrumb.key]&&(scope.search[searchType].input[breadcrumbMappings[breadcrumb.key]]=$sce.parseAsText(breadcrumb.value))})}function removeInputs(){_.forEach(scope.search,function(searchType){searchType.isActive||_.forEach(Object.keys(searchType.input),function(key){searchType.input[key]=""})})}function crumbInputs(){var breadcrumbs=[];return _.forEach(activeSearchType.input,function(crumb,i){if(crumb.length>0){var key=_.findKey(breadcrumbMappings,function(value){return value===i});breadcrumbs.push(key+":"+crumb)}}),breadcrumbs}function submitAuthorSearch(){searchState.clearAll().push(searchState.$facets.within,crumbInputs()).push(searchState.$facets.newsearch,"true"),
submitHandler()}function submitBasicSearch(){searchState.clearAll().push(searchState.$facets.newsearch,"true").push(searchState.$facets.query,Xplore.search.replaceSpecialChars(scope.search.basic.input.query)),submitHandler()}function submitPublicationSearch(){searchState.clearAll().push(searchState.$facets.newsearch,"true").push(searchState.$facets.within,crumbInputs()).refresh(),submitHandler()}function submitHandler(){if("results"===$state.$current.name)searchState.refresh();else{var params=_(searchState.$params).omit(_.isUndefined).value();delete params.contentType,delete params.tabId,delete params.publisher,delete params.collection,delete params.topic,delete params.anchor,delete params.ctx,delete params.id,delete params.part,delete params.q,delete params.section,delete params.tab,params=$.param(params).replace(/%5[B|D]/g,""),window.location.href="/search/searchresult.jsp?"+params}}function validate(){_.forEach(activeSearchType.input,function(val,i){activeSearchType.input[i]=$sce.parseAsText(val)});var validation=Xplore.search.ngTestValidity(_.values(activeSearchType.input));return validation.isValid?(notification.hide(),!0):(notification.show(Xplore.search.config.warningIcon+Xplore.search.getMessage(validation.errorType)).updateState("error"),!1)}var activeSearchType,unbindSearchResults,breadcrumbMappings={'"First Name"':"firstName",'"Last Name"':"lastName",'"Publication Title"':"title",'"Volume"':"volume",'"Issue"':"issue",'"Start Page"':"startPage"},notification=new Xplore.Notification(".Search .Notification",{showAnimation:"transition.fadeIn",hideAnimation:"transition.fadeOut"});scope.showCount=!!scope.showCount&&scope.showCount,scope.search={basic:{isActive:!0,input:{query:""},submit:submitBasicSearch},author:{isActive:!1,input:{firstName:"",lastName:""},submit:submitAuthorSearch},publication:{isActive:!1,input:{title:"",volume:"",issue:"",startPage:""},submit:submitPublicationSearch}},scope.onTypeaheadReturn=onTypeaheadReturn,scope.onToggle=toggleSearchType,scope.getSuggestions=getSuggestions,element.find("button").on("click",submitQuery),unbindSearchResults=scope.$watch(function(){return searchService.queryResult},watchSearchResults)}var directive={link:link,replace:!0,restrict:"EA",scope:{showCount:"="},templateUrl:"ui/searchbar/searchbar.html"};return directive}angular.module("xpl.ui").directive("xplSearchbar",xplSearchbar),xplSearchbar.$inject=["$sce","$state","searchService","searchState","typeaheadService","utilService"]}(),function(){"use strict";function xplSigninPurchaseOverlay(){function link(scope){scope.pricingMap=scope.$parent.ctrl.pricingMap,scope.userInfo=scope.$parent.ctrl.userInfo,scope.courseId=scope.$parent.ctrl.courseId,scope.hideSigninPurchaseOverlay=scope.$parent.hideSigninPurchaseOverlay}var directive={link:link,restrict:"E",templateUrl:"ui/signin-purchase/overlay.html",replace:!0,scope:{}};return directive}angular.module("xpl.ui").directive("xplSigninPurchaseOverlay",xplSigninPurchaseOverlay)}(),function(){"use strict";function xplCmptSipModalTrigger(){return{restrict:"A",bindToController:{purchaseOptions:"=",publisher:"@",userInfo:"=",purchaseNow:"=",chorusPdfPath:"@"},controller:SipModalTriggerComponent,controllerAs:"bvm",scope:{},link:link}}function link(scope,element,attr,ctrl){function openModal(){ctrl.openModal()}element.on("click",openModal),ctrl.purchaseNow&&(ctrl.openModal(),ctrl.clearPurchaseNow())}function SipModalTriggerComponent($log,$state,$uibModal,documentService){function openModal(){function closedResolve(){}var modalInstance=$uibModal.open({templateUrl:"ui/signin-purchase/sip-modal-component.html",controller:SipModalComponent,controllerAs:"vm",backdrop:"static",windowClass:"sip-modal-content"});modalInstance.closed.then(closedResolve)}function clearPurchaseNow(){$state.go($state.current,{purchaseNow:void 0},{notify:!1,reload:!1,location:"replace",inherit:!0})}function SipModalComponent($scope,$uibModalInstance){function initialize(){vm.openTab("signin"),vm.loading=!1}function closeModal(){$uibModalInstance.close()}function openTab(tab){tab=tab||"signin",vm.activeTab=tab}function addToCartConfirmation(){vm.isAddToCartConfirmation=!0}function proceedToCheckout(){window.location.href=IBP_WS_ASSETS+"/cart/checkout/page.html?refSite="+window.location.href}var vm=this;vm.error=!1,vm.loading=!0,vm.activeTab="",vm.isAddToCartConfirmation=!1,vm.proceedToCheckout=proceedToCheckout,vm.userInfo=bvm.userInfo,vm.publisher=bvm.publisher,vm.chorusPdfPath=bvm.chorusPdfPath,vm.purchaseOptions=bvm.purchaseOptions,vm.$uibModalInstance=$uibModalInstance,vm.addToCartConfirmation=addToCartConfirmation,vm.closeModal=closeModal,vm.openTab=openTab,initialize()}var bvm=this;bvm.openModal=openModal,bvm.clearPurchaseNow=clearPurchaseNow,SipModalComponent.$inject=["$scope","$uibModalInstance"]}angular.module("xpl.ui").directive("xplCmptSipModalTrigger",xplCmptSipModalTrigger),SipModalTriggerComponent.$inject=["$log","$state","$uibModal","documentService"]}(),function(){"use strict";function xplTabRangePicker(searchState){function link(scope,element){function onClickButton(){var queryParam=scope.range[0]+"_"+scope.range[1]+"_"+scope.name.replace(/\ /g,"_");searchState.clear(searchState.$facets.range).push(searchState.$facets.range,queryParam).update()}function watchRange(newValue,oldValue){newValue!==oldValue&&(scope.showApply=!0)}function updateRange(){var range0=parseInt(scope.sliderRange[0]),range1=parseInt(scope.sliderRange[1]);scope.sliderRange[0]=getClosestValue(range0),scope.sliderRange[1]=getClosestValue(range1),scope.range=angular.copy(scope.sliderRange),scope.$apply()}function onKeyUpInput(e){scope.range[0]>scope.range[1]||8!==e.keyCode&&(38!==e.keyCode&&40!==e.keyCode||getPreviousOrNext(e),e.shiftKey||e.keyCode>57&&e.keyCode<91||e.keyCode>105&&e.keyCode<112||e.keyCode>145?e.preventDefault():scope.isRange?scope.sliderRange=angular.copy(scope.range):scope.range[1]=scope.range[0])}function syncSlider(e){var currentValue=e.currentTarget.value,rangeID="from"===e.currentTarget.name?0:1;scope.range[rangeID]=getClosestValue(currentValue),scope.range[0]>scope.range[1]&&(scope.range[1]=scope.range[0]),scope.sliderRange=angular.copy(scope.range)}function onBlurInput(e){syncSlider(e)}function getClosestValue(input){if(!_.includes(scope.values,parseInt(input))){var previous,length=scope.values.length;if(length<2)return scope.values[length-1];for(previous=Math.abs(scope.values[--length]-input);length--&&!(previous<(previous=Math.abs(scope.values[length]-input))););return scope.values[length+1]}return input}function getPreviousOrNext(e){var currentIndex=_.indexOf(scope.values,parseInt(getClosestValue(e.currentTarget.value))),rangeID="from"===e.currentTarget.name?0:1;38===e.keyCode?currentIndex<scope.values.length-1&&(scope.range[rangeID]=scope.values[currentIndex+1]):currentIndex>0&&(scope.range[rangeID]=scope.values[currentIndex-1]),e.preventDefault()}function toggleRange(){scope.isRange=!scope.isRange,scope.isRange?(scope.range[1]=scope.values[scope.values.length-1],scope.sliderRange=angular.copy(scope.range)):scope.range[1]=scope.range[0]}function toNumber(entry){var num=parseInt(entry.name);if(_.isFinite(num))return num}scope.values=_.map(scope.entries,toNumber),scope.range=[scope.values[0],scope.values[scope.values.length-1]],scope.sliderRange=angular.copy(scope.range),scope.toggleRange=toggleRange,scope.$watchCollection("range",watchRange),scope.showApply=!1,scope.onKeyUpInput=onKeyUpInput,scope.onBlurInput=onBlurInput,scope.updateRange=updateRange,element.find("button[type=submit]").on("click",onClickButton)}var directive={link:link,templateUrl:"ui/tab-range-picker/tab-range-picker.html",scope:{entries:"=",name:"="},replace:!0,requires:"^xplFacet",restrict:"EA"};return directive}angular.module("xpl.ui").directive("xplTabRangePicker",xplTabRangePicker),xplTabRangePicker.$inject=["searchState"]}(),function(){"use strict";function xplTimeline(){var directive={templateUrl:"ui/timeline/timeline.html",replace:!0,restrict:"EA",scope:{history:"="}};return directive}angular.module("xpl.ui").directive("xplTimeline",xplTimeline)}(),function(){"use strict";function xplToc($state){var directive={bindToController:{currentPart:"@"},link:link,templateUrl:"ui/toc/toc.html",replace:!0,restrict:"EA",scope:{toc:"=",param:"="},controllerAs:"vm",controller:tocController};return directive}function tocController($scope,$state,utilsService,$location){$scope.state=$state;var vm=this;vm.fullTextAccess=global.document.fullTextAccess,vm.isFreeDocument=global.document.metadata.isFreeDocument,vm.scrollTo=function(id,part,qtip){id=id.replace("#",""),part!=vm.currentPart||$state.params.q||$state.params.ctx?$state.go(".",{part:part+"|"+id,section:null,ctx:null,q:null,anchor:null,tabfilter:null}):utilsService.scrollToDynamicDom(id,110),qtip&&$(qtip).qtip().hide()}}function link(scope,element,attr,$state){function setParam(id){scope.param=id,scope.state.go(scope.state.current.name,{tab:scope.state.params.tab,section:id})}scope.toc=scope.toc?scope.toc:{},scope.popoverDirection=scope.popoverDirection?scope.popoverDirection:"bottom",scope.setParam=setParam;var trigger=(scope.popoverDirection,element.find(".toc-link")),qtipConfig={content:{text:trigger.next("div")},hide:{event:1==scope.closeButton?"false":"click mouseleave",delay:300,fixed:($(this).hover,!0),leave:!1},show:{event:"click"},style:{classes:"qtip-popover document-toc"}};trigger.qtip(qtipConfig)}angular.module("xpl.ui").directive("xplToc",xplToc),xplToc.$inject=["$state"]}(),function(){"use strict";function xplTypeahead($sce,$timeout){function link(scope,element,attr){function onBlur(e){hasUrl||scope.multiselect||($timeout.cancel(loadResults),scope.currentIndex=-1,scope.items={})}function onItemSelect(item){hasUrl=!!item.typeAheadLinkUrl,scope.multiselect||(scope.ngModel=$sce.parseAsText(item.name)),scope.onSelect&&scope.onSelect({seletedRefinement:item})}function onKeyDown(e){if(!scope.multiselect)switch(e.keyCode){case 9:!_.isEmpty(scope.items)&&scope.items[scope.currentIndex]&&(scope.ngModel=$sce.parseAsText(scope.items[scope.currentIndex].name)),onBlur(e);break;case 40:_.isEmpty(scope.items)||(scope.currentIndex++,scope.currentIndex===scope.items.length&&(scope.currentIndex=0),scope.ngModel=$sce.parseAsText(scope.items[scope.currentIndex].name));break;case 38:_.isEmpty(scope.items)||(scope.currentIndex--,scope.currentIndex===-1&&(scope.currentIndex=scope.items.length-1),scope.ngModel=$sce.parseAsText(scope.items[scope.currentIndex].name));break;case 13:!_.isEmpty(scope.items)&&scope.items[scope.currentIndex]&&(scope.ngModel=$sce.parseAsText(scope.items[scope.currentIndex].name),scope.onReturn&&scope.onReturn({$event:e})),onBlur(e)}}function onKeyUp(e){e.keyCode>36&&e.keyCode<41||13===e.keyCode||scope.ngModel&&scope.ngModel.length<scope.minChars||(loadResults&&$timeout.cancel(loadResults),scope.items=[],loadResults=$timeout(function(){return scope.serviceMethod()},scope.delay),loadResults.then(onLoadResultsSuccess,angular.noop))}function onMouseEnter(index){scope.currentIndex=index}function onLoadResultsSuccess(data){scope.items=data}var loadResults,hasUrl;scope.minChars=scope.minChars>2?scope.minChars:2,scope.delay=scope.delay?scope.delay:500,scope.currentIndex=-1,element.find("input").attr("placeholder",attr.placeholder),element.find("ul").addClass(attr.ulClass),scope.onBlur=onBlur,scope.onItemSelect=onItemSelect,scope.onKeyUp=onKeyUp,scope.onKeyDown=onKeyDown,scope.onMouseEnter=onMouseEnter}var directive={link:link,templateUrl:"ui/typeahead/typeahead.html",replace:!0,restrict:"EA",scope:{delay:"@",minChars:"@",multiselect:"=",ngModel:"=",onSelect:"&",onReturn:"&",serviceMethod:"&"}};return directive}angular.module("xpl.ui").directive("xplTypeahead",xplTypeahead),xplTypeahead.$inject=["$sce","$timeout"]}(),function(){"use strict";function directive($window,$stateParams,$timeout,$rootScope){function link($scope,el,attrs){function getBottomBoundary(){if($scope.scrollTillElementId)var scrollTillElement=angular.element("#"+$scope.scrollTillElementId);var scrollTillOffset=-1;return scrollTillElement&&(scrollTillOffset=scrollTillElement.offset().top,scrollTillOffset&&$scope.scrollTillOffset&&(scrollTillOffset-=$scope.scrollTillOffset)),scrollTillOffset}function getTopBoundary(){if($scope.scrollFromElementId)var scrollFromElement=angular.element("#"+$scope.scrollFromElementId);var scrollFromOffset=0;return scrollFromElement&&(scrollFromOffset=scrollFromElement.offset().top,scrollFromOffset&&$scope.scrollFromOffset&&(scrollFromOffset=+scrollFromOffset+ +$scope.scrollFromOffset)),scrollFromOffset}function handleSnapping(totaloffset){var window_top=window.scrollTop();(scrollFromTop>=scrollTillTop||!$rootScope)&&(scrollFromTop=getTopBoundary(),scrollTillTop=getBottomBoundary()),window_top>totaloffset&&(scrollTillTop<0||window_top<scrollTillTop)?el.addClass($scope.cssClass):el.removeClass($scope.cssClass)}function adjustToZoom(){var left=$window.pageXOffset?$window.pageXOffset:document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft;left>0?el.css("right",0):el.css("right","")}var window=angular.element($window),firstTime=!0,resetScroll=!1,scrollFromTop=0,scrollTillTop=-1;$scope.$on($scope.scrollResetEventName,function(event,args){resetScroll=!0}),window.bind("scroll",_.debounce(function(){(firstTime||resetScroll)&&(scrollFromTop=getTopBoundary(),scrollTillTop=getBottomBoundary(),scrollFromTop&&(firstTime=resetScroll=!1)),handleSnapping(scrollFromTop)})),window.bind("resize",_.debounce(adjustToZoom)),window.bind("scroll",_.debounce(adjustToZoom))}var directive={link:link,restrict:"A",replace:"false",scope:{cssClass:"@",scrollFromElementId:"@",scrollFromOffset:"@",scrollResetEventName:"@",scrollTillElementId:"@",scrollTillOffset:"@"}};return directive}angular.module("xpl.ui").directive("xplScrollSnap",directive),directive.$inject=["$window","$stateParams","$timeout","$rootScope"]}(),function(){"use strict";function utilsService($log,$timeout,documentConstants){function scrollToDynamicDom(id,margin){var sec=document.getElementById(id),top=cumulativeOffset(sec).top;scrollToX(top-margin)}function cumulativeOffset(element){var top=0,left=0;do top+=element.offsetTop||0,left+=element.offsetLeft||0,element=element.offsetParent;while(element);return{top:top,left:left}}function scrollTo(id,margin,closure){$timeout(function(){id.startsWith("#")||(id="#"+id);var $target=$(id),x=$target.offset().top-margin;scrollToX(x,closure)})}function scrollToX(xaxis,closure){$("html,body").animate({scrollTop:xaxis},"slow",closure)}function getDocumentTabOffset(tabTitle){var tabs=documentConstants.tabs;for(i=0;i<tabs.length;i++){var areEqual=tabs[i].title.toLowerCase()===tabTitle.toLowerCase();if(areEqual)return tabs[i].offset}}var utilsService={getDocumentTabOffset:getDocumentTabOffset,scrollTo:scrollTo,scrollToX:scrollToX,cumulativeOffset:cumulativeOffset,scrollToDynamicDom:scrollToDynamicDom};return utilsService}angular.module("xpl.ui").factory("utilsService",utilsService),utilsService.$inject=["$log","$timeout","documentConstants"]}(),function(){"use strict";function netInsightsService(){function inject(){var scriptElement=document.createElement("script");scriptElement.src=SOURCE,scriptElement.id=ID,document.body.appendChild(scriptElement)}function retract(){var scriptElement=document.getElementById(ID);scriptElement&&document.body.removeChild(scriptElement)}var SOURCE="/assets/js/analytics/ntpagetag.min.js",ID="ntpagetag",netInsightsService={inject:inject,retract:retract};return netInsightsService}angular.module("xpl.ads").factory("netInsightsService",netInsightsService)}(),function(){"use strict";function xplCustomerSurvey(){function link(scope,element){function watchUser(user){void 0!==user&&(unbindUserWatch(),element.append(generateAd()))}function generateAd(){return scope.user.customerSurvey?'<section class="CustomerSurvey"><a href="'+scope.user.customerSurvey+'" target="_blank"><img class="fullsize" src="/assets/img/surveygraphic.gif"/></a></section>':""}var unbindUserWatch=scope.$watch("user",watchUser)}var directive={link:link,replace:!0,restrict:"EA",scope:{user:"="}};return directive}angular.module("xpl.ads").directive("xplCustomerSurvey",xplCustomerSurvey)}(),function(){"use strict";function xplIeee802(){function link(scope,element){function watchUser(user){void 0!==user&&(unbindUserWatch(),element.append(generateAd()))}function generateAd(){return scope.user.showGet802Link?'<section class="IEEE802"><a href="http://standards.ieee.org/about/get/index.html"><img src="/assets/img/btn.get802.fulltext.gif" alt="Link goes to Get IEEE 802&reg; site" class="button"/></a></section>':""}var unbindUserWatch=scope.$watch("user",watchUser)}var directive={link:link,replace:!0,restrict:"EA",scope:{user:"="}};return directive}angular.module("xpl.ads").directive("xplIeee802",xplIeee802)}(),function(){"use strict";function xplGoogleAd($injector,$state,breadcrumbService,googleAdSlots){function link(scope,element){function watchUser(user){void 0!==user&&(unbindUserWatch(),element.append(generateAd()))}function generateAd(){var slot=defineSlot(element[0].className.split(" "));if(!slot)return"<div><small>No ad definition found.</small></div>";var adGeneratedCode='<script type="text/javascript">googletag.cmd.push(function() {googletag.defineSlot("/3890430/'+slot.name+'", ['+slot.dimensions.toString()+'], "'+slot.id+'").addService(googletag.pubads());';return adGeneratedCode+=addUserTargeting(),adGeneratedCode+=addSearchTargeting(),adGeneratedCode+=addPublisherTargeting(),adGeneratedCode+='googletag.pubads().collapseEmptyDivs();googletag.enableServices();});</script><div id="'+slot.id+'" style="width:'+slot.dimensions[0]+"px; height:"+slot.dimensions[1]+'; display:block;"><script type="text/javascript">googletag.cmd.push(function() { googletag.display("'+slot.id+'"); });</script></div>'}function defineSlot(classes){var slot;return _.forEach(classes,function(className){className.indexOf("Ads-")!==-1&&(slot=googleAdSlots[className.split("-")[1]],slot.id=generateID())}),slot}function generateID(){return"div-gpt-ad-1366327280661-"+Math.floor(1e4*Math.random()).toString()}function addUserTargeting(){var userTargeting,userDetails={type:getUserType(),products:scope.user.products?scope.user.products.toString():"",instituteType:scope.user.instType?scope.user.instType:"",ip:scope.user.ip,userID:scope.user.userIds?scope.user.userIds[0]:"",institute:scope.user.institute===!0?"true":""};return userTargeting='googletag.pubads().setTargeting("usertype", "'+userDetails.type+'");',userTargeting+='googletag.pubads().setTargeting("sub_type", "'+userDetails.products+'");',userTargeting+='googletag.pubads().setTargeting("cust_type", "'+userDetails.instituteType+'");',userTargeting+='googletag.pubads().setTargeting("geoip", "'+userDetails.ip+'");',userTargeting+='googletag.pubads().setTargeting("userid", "'+userDetails.userID+'");',userTargeting+='googletag.pubads().setTargeting("isinst", "'+userDetails.institute+'");'}function addPublisherTargeting(){if(scope.publisher)return'googletag.pubads().setTargeting("publisher",["'+scope.publisher+'"]);';if($state.params.publisher)return'googletag.pubads().setTargeting("publisher",["'+$state.params.publisher+'"]);';var publishers=breadcrumbService.getBreadcrumb("key","Publisher");return publishers?(publishers=_.pluck(publishers.children,"key"),'googletag.pubads().setTargeting("publisher",'+JSON.stringify(publishers)+");"):""}function addSearchTargeting(){if(!hasSearchState)return"";var searchTargeting,searchState=$injector.get("searchState"),search={query:searchState.$params[searchState.$facets.query]?searchState.$params[searchState.$facets.query]:"",punumber:searchState.$params[searchState.$facets.punumber]?searchState.$params[searchState.$facets.punumber]:""};return searchTargeting='googletag.pubads().setTargeting("search", "'+search.query.replace(/[/"]/g,'\\"')+'");',searchTargeting+='googletag.pubads().setTargeting("pu_number", "'+search.punumber+'");',searchTargeting+='googletag.pubads().setTargeting("content_ID", "");'}function getUserType(){return scope.user.institute?"inst":scope.user.member||scope.user.guest?"guest":"anonymous"}var hasSearchState=$injector.has("searchState"),unbindUserWatch=scope.$watch("user",watchUser)}var directive={link:link,replace:!0,restrict:"EA",scope:{user:"=",publisher:"="}};return directive}angular.module("xpl.ads").directive("xplGoogleAd",xplGoogleAd),xplGoogleAd.$inject=["$injector","$state","breadcrumbService","googleAdSlots"]}(),function(){"use strict";function xplGoogleAdServices($location){function link(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],function(){var gads=document.createElement("script"),node=document.getElementsByTagName("script")[0];gads.async=!0,gads.src=$location.protocol()+"://www.googletagservices.com/tag/js/gpt.js",node.parentNode.insertBefore(gads,node)}()}var directive={link:link,replace:!0,restrict:"EA"};return directive}angular.module("xpl.ads").directive("xplGoogleAdServices",xplGoogleAdServices),xplGoogleAdServices.$inject=["$location"]}(),function(){"use strict";angular.module("xpl.ads").constant("googleAdSlots",{books:{name:"xplore_books",dimensions:[180,150]},conferences:{name:"xplore_conferences",dimensions:[180,150]},leadGen:{name:"xplore_subscription_leadgen",dimensions:[180,150]},periodicals:{name:"xplore_journals",dimensions:[180,150]},standards:{name:"xplore_standards",dimensions:[180,150]},thirdParty:{name:"xplore_third_party",dimensions:[160,600]},leaderBoard:{name:"xplore_leader_board",dimensions:[728,90]}})}(),function(){"use strict";function xplTealium($location,tealiumDataPrvdr,tealiumPrvdr,$state){function link(scope,element){var link=function(dataLayer){var d=scope.data||"{}",b={};try{b=angular.extend({},dataLayer,JSON.parse(d))}catch(error){}tealiumPrvdr.track("link",b)};element.bind("click",function(e){var event_type,event_text,event_source,dataLayer=tealiumDataPrvdr.getDataLayer($location.path()),target=e.target;switch(target.nodeName&&(event_type=""+(target.nodeName.toLowerCase()||target.localName||target.tagName.toLowerCase()),"a"===event_type?event_type="link":"img"==event_type&&(event_type="image"),dataLayer.event_type=event_type+" click"),dataLayer.event_target=event_type,event_text=target.title||target.innerText||target.innerHTML.trim(),""===event_text&&target.value&&""!==target.value?event_text=target.value:""===event_text&&target.alt&&""!==target.alt&&(event_text=target.alt),dataLayer.event_attr1=event_text,event_type){case"link":event_source=target.href;break;case"button":event_source=target.type||"";break;case"input":event_source=target.value||"";break;default:target.src&&""!==target.src&&(event_source=target.src)}dataLayer.event_attr2=event_source,link(dataLayer)})}var directive={link:link,restrict:"A",scope:{data:"@utagDataStr"}};return directive}angular.module("xpl.tags.tealium.directive",["xpl.tags.tealium"]).directive("xplTealium",xplTealium),xplTealium.$inject=["$location","tealiumDataPrvdr","tealiumPrvdr","$state"]}(),function(){"use strict";function tealiumService(tealiumPrvdr,tealiumDataPrvdr,$state,breadcrumbService,userService,$log){function view(data,setUserData){setUserData&&"boolean"==typeof setUserData&&(data=tealiumService.setUserdata2data(data)),tealiumPrvdr.view(data)}function link(data){tealiumPrvdr.link(data)}function isTealiumEnabled(){return tealiumPrvdr.isTealiumEnabled()}function setUserdata2data(data){var userData=tealiumService.getUserData(),dataWithUserData=tealiumService.copySrcObjs2data(data,userData);return dataWithUserData}function copySrcObjs2data(data,srcObj1,srcObj2){data=data||{},srcObj1=srcObj1||{},srcObj2=srcObj2||{};var retObj={};try{"string"==typeof data&&(data=JSON.parse(data)),"string"==typeof srcObj1&&(srcObj1=JSON.parse(srcObj1)),"string"==typeof srcObj2&&(srcObj2=JSON.parse(srcObj2)),retObj=angular.extend(data,srcObj1,srcObj2)}catch(error){return $log.error("ERROR - copySrcObjs2data returning original data back. Can not copy srcObj1:",srcObj1," and srcObj2:",srcObj2,"on to data:",data,"got error:",error),data}return retObj}function getUserData(){return{user_id:userService.getUserId(),user_institution_id:userService.getUserInstitutionId(),user_product:userService.getProducts(),user_third_party:TEALIUM_user_third_party,user_type:userService.getUserType()}}function getPublisher(useJSONstringify){if(useJSONstringify=!!(useJSONstringify===!0||useJSONstringify&&"true"===useJSONstringify),$state.params.publisher)return $state.params.publisher;var publishers=breadcrumbService.getBreadcrumb("key","Publisher");return publishers?(publishers=_.pluck(publishers.children,"key"),useJSONstringify?JSON.stringify(publishers):publishers.join("|")):void 0}function getSearchWithin(useJSONstringify){if(useJSONstringify=!!(useJSONstringify===!0||useJSONstringify&&"true"===useJSONstringify),$state.params)return strOrArray2str($state.params.searchWithin,useJSONstringify)}function getRefinements(responseData,useJSONstringify){if(useJSONstringify=!!(useJSONstringify===!0||useJSONstringify&&"true"===useJSONstringify),$state.params){var id2match,refinements=$state.params.refinements,breadCrumbs=responseData.breadCrumbs,breadCrumbsChildren=_.map(breadCrumbs,"children"),func4map=function(children){return _.result(_.find(children,function(child){return child.value===id2match}),"key")};return refinements=_.map(refinements,function(refinementId){return id2match=refinementId,_.find(_.map(breadCrumbsChildren,func4map),function(val){return void 0!==val})}),strOrArray2str(refinements,useJSONstringify)}}function getSelectedValue(responseData,useJSONstringify){if(useJSONstringify=!!(useJSONstringify===!0||useJSONstringify&&"true"===useJSONstringify),$state.params){var selectedValue_FROM_state_params=$state.params.selectedValue,selectedValue_FROM_responseData_meta_queryParams=_.get(responseData,"meta.queryParams.selectedValue"),selectedValue=decodeURIComponent(selectedValue_FROM_state_params),selectedValue_parsedInt=_.parseInt(selectedValue);return _.isNaN(selectedValue_parsedInt)||!_.isNumber(selectedValue_parsedInt)||_.isUndefined(selectedValue_FROM_responseData_meta_queryParams)||(selectedValue=selectedValue_FROM_responseData_meta_queryParams),strOrArray2str(selectedValue,useJSONstringify)}}function getCollection(useJSONstringify){if(useJSONstringify=!!(useJSONstringify===!0||useJSONstringify&&"true"===useJSONstringify),$state.params)return strOrArray2str($state.params.collection,useJSONstringify)}function strOrArray2str(val,useJSONstringify){if(useJSONstringify=!!(useJSONstringify===!0||useJSONstringify&&"true"===useJSONstringify),void 0!==val){var valStr="";return _.isString(val)?valStr=encodeURIComponent(val):_.isArray(val)&&(val=_.map(val,function(v){return encodeURIComponent(v)}),valStr=useJSONstringify?JSON.stringify(val):val.join("|")),valStr}}var tealiumService={view:view,link:link,isTealiumEnabled:isTealiumEnabled,setViewIdMapEntry:tealiumPrvdr.setViewIdMapEntry,setUserdata2data:setUserdata2data,copySrcObjs2data:copySrcObjs2data,getUserData:getUserData,getPublisher:getPublisher,getSearchWithin:getSearchWithin,getRefinements:getRefinements,getSelectedValue:getSelectedValue,getCollection:getCollection};return tealiumService}angular.module("xpl.tags").factory("tealiumService",tealiumService),tealiumService.$inject=["tealiumPrvdr","tealiumDataPrvdr","$state","breadcrumbService","userService","$log"]}();